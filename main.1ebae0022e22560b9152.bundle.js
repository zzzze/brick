(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1141:function(module,exports,__webpack_require__){"use strict";var _clientApi=__webpack_require__(64),_clientLogger=__webpack_require__(40),_configFilename=__webpack_require__(1142);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}(_configFilename.args||_configFilename.argTypes)&&_clientLogger.logger.warn("Invalid args/argTypes in config, ignoring.",JSON.stringify({args:_configFilename.args,argTypes:_configFilename.argTypes})),_configFilename.decorators&&_configFilename.decorators.forEach((function(decorator){return(0,_clientApi.addDecorator)(decorator,!1)})),_configFilename.loaders&&_configFilename.loaders.forEach((function(loader){return(0,_clientApi.addLoader)(loader,!1)})),(_configFilename.parameters||_configFilename.globals||_configFilename.globalTypes)&&(0,_clientApi.addParameters)(_objectSpread(_objectSpread({},_configFilename.parameters),{},{globals:_configFilename.globals,globalTypes:_configFilename.globalTypes}),!1),_configFilename.argTypesEnhancers&&_configFilename.argTypesEnhancers.forEach((function(enhancer){return(0,_clientApi.addArgTypesEnhancer)(enhancer)}))},1142:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"parameters",(function(){return parameters}));const parameters={actions:{argTypesRegex:"^on[A-Z].*"}}},1143:function(module,exports,__webpack_require__){"use strict";(function(module){(0,__webpack_require__(399).configure)([__webpack_require__(1144),__webpack_require__(1146),__webpack_require__(1147)],module,!1)}).call(this,__webpack_require__(121)(module))},1144:function(module,exports,__webpack_require__){var map={"./Introduction.stories.mdx":1145};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=1144},1145:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",(function(){return __page}));__webpack_require__(1);var _mdx_js_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(9),_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(251),_assets_code_brackets_svg__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(525),_assets_code_brackets_svg__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_assets_code_brackets_svg__WEBPACK_IMPORTED_MODULE_3__),_assets_colors_svg__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(526),_assets_colors_svg__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_assets_colors_svg__WEBPACK_IMPORTED_MODULE_4__),_assets_comments_svg__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(527),_assets_comments_svg__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(_assets_comments_svg__WEBPACK_IMPORTED_MODULE_5__),_assets_direction_svg__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(528),_assets_direction_svg__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(_assets_direction_svg__WEBPACK_IMPORTED_MODULE_6__),_assets_flow_svg__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(529),_assets_flow_svg__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(_assets_flow_svg__WEBPACK_IMPORTED_MODULE_7__),_assets_plugin_svg__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(530),_assets_plugin_svg__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(_assets_plugin_svg__WEBPACK_IMPORTED_MODULE_8__),_assets_repo_svg__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(531),_assets_repo_svg__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(_assets_repo_svg__WEBPACK_IMPORTED_MODULE_9__),_assets_stackalt_svg__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(532),_assets_stackalt_svg__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(_assets_stackalt_svg__WEBPACK_IMPORTED_MODULE_10__);function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}const layoutProps={};function MDXContent({components:components,...props}){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.mdx)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.mdx)(_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_2__.Meta,{title:"Example/Introduction",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.mdx)("style",null,"\n  .subheading {\n    --mediumdark: '#999999';\n    font-weight: 900;\n    font-size: 13px;\n    color: #999;\n    letter-spacing: 6px;\n    line-height: 24px;\n    text-transform: uppercase;\n    margin-bottom: 12px;\n    margin-top: 40px;\n  }\n\n  .link-list {\n    display: grid;\n    grid-template-columns: 1fr;\n    grid-template-rows: 1fr 1fr;\n    row-gap: 10px;\n  }\n\n  @media (min-width: 620px) {\n    .link-list {\n      row-gap: 20px;\n      column-gap: 20px;\n      grid-template-columns: 1fr 1fr;\n    }\n  }\n\n  @media all and (-ms-high-contrast:none) {\n  .link-list {\n      display: -ms-grid;\n      -ms-grid-columns: 1fr 1fr;\n      -ms-grid-rows: 1fr 1fr;\n    }\n  }\n\n  .link-item {\n    display: block;\n    padding: 20px 30px 20px 15px;\n    border: 1px solid #00000010;\n    border-radius: 5px;\n    transition: background 150ms ease-out, border 150ms ease-out, transform 150ms ease-out;\n    color: #333333;\n    display: flex;\n    align-items: flex-start;\n  }\n\n  .link-item:hover {\n    border-color: #1EA7FD50;\n    transform: translate3d(0, -3px, 0);\n    box-shadow: rgba(0, 0, 0, 0.08) 0 3px 10px 0;\n  }\n\n  .link-item:active {\n    border-color: #1EA7FD;\n    transform: translate3d(0, 0, 0);\n  }\n\n  .link-item strong {\n    font-weight: 700;\n    display: block;\n    margin-bottom: 2px;\n  }\n  \n  .link-item img {\n    height: 40px;\n    width: 40px;\n    margin-right: 15px;\n    flex: none;\n  }\n\n  .link-item span {\n    font-size: 14px;\n    line-height: 20px;\n  }\n\n  .tip {\n    display: inline-block;\n    border-radius: 1em;\n    font-size: 11px;\n    line-height: 12px;\n    font-weight: 700;\n    background: #E7FDD8;\n    color: #66BF3C;\n    padding: 4px 12px;\n    margin-right: 10px;\n    vertical-align: top;\n  }\n\n  .tip-wrapper {\n    font-size: 13px;\n    line-height: 20px;\n    margin-top: 40px;\n    margin-bottom: 40px;\n  }\n\n  .tip-wrapper code {\n    font-size: 12px;\n    display: inline-block;\n  }\n\n  \n"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.mdx)("h1",{id:"welcome-to-storybook"},"Welcome to Storybook"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.mdx)("p",null,"Storybook helps you build UI components in isolation from your app's business logic, data, and context.\nThat makes it easy to develop hard-to-reach states. Save these UI states as ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.mdx)("strong",{parentName:"p"},"stories")," to revisit during development, testing, or QA."),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.mdx)("p",null,"Browse example stories now by navigating to them in the sidebar.\nView their code in the ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.mdx)("inlineCode",{parentName:"p"},"src/stories")," directory to learn how they work.\nWe recommend building UIs with a ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.mdx)("a",{parentName:"p",href:"https://componentdriven.org",target:"_blank",rel:"nofollow noopener noreferrer"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.mdx)("strong",{parentName:"a"},"component-driven"))," process starting with atomic components and ending with pages."),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.mdx)("div",{className:"subheading"},"Configure"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.mdx)("div",{className:"link-list"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.mdx)("a",{className:"link-item",href:"https://storybook.js.org/docs/react/addons/addon-types",target:"_blank"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.mdx)("img",{src:_assets_plugin_svg__WEBPACK_IMPORTED_MODULE_8___default.a,alt:"plugin"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.mdx)("span",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.mdx)("strong",null,"Presets for popular tools"),"Easy setup for TypeScript, SCSS and more.")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.mdx)("a",{className:"link-item",href:"https://storybook.js.org/docs/react/configure/webpack",target:"_blank"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.mdx)("img",{src:_assets_stackalt_svg__WEBPACK_IMPORTED_MODULE_10___default.a,alt:"Build"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.mdx)("span",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.mdx)("strong",null,"Build configuration"),"How to customize webpack and Babel")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.mdx)("a",{className:"link-item",href:"https://storybook.js.org/docs/react/configure/styling-and-css",target:"_blank"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.mdx)("img",{src:_assets_colors_svg__WEBPACK_IMPORTED_MODULE_4___default.a,alt:"colors"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.mdx)("span",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.mdx)("strong",null,"Styling"),"How to load and configure CSS libraries")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.mdx)("a",{className:"link-item",href:"https://storybook.js.org/docs/react/get-started/setup#configure-storybook-for-your-stack",target:"_blank"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.mdx)("img",{src:_assets_flow_svg__WEBPACK_IMPORTED_MODULE_7___default.a,alt:"flow"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.mdx)("span",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.mdx)("strong",null,"Data"),"Providers and mocking for data libraries"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.mdx)("div",{className:"subheading"},"Learn"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.mdx)("div",{className:"link-list"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.mdx)("a",{className:"link-item",href:"https://storybook.js.org/docs",target:"_blank"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.mdx)("img",{src:_assets_repo_svg__WEBPACK_IMPORTED_MODULE_9___default.a,alt:"repo"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.mdx)("span",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.mdx)("strong",null,"Storybook documentation"),"Configure, customize, and extend")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.mdx)("a",{className:"link-item",href:"https://www.learnstorybook.com",target:"_blank"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.mdx)("img",{src:_assets_direction_svg__WEBPACK_IMPORTED_MODULE_6___default.a,alt:"direction"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.mdx)("span",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.mdx)("strong",null,"In-depth guides"),"Best practices from leading teams")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.mdx)("a",{className:"link-item",href:"https://github.com/storybookjs/storybook",target:"_blank"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.mdx)("img",{src:_assets_code_brackets_svg__WEBPACK_IMPORTED_MODULE_3___default.a,alt:"code"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.mdx)("span",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.mdx)("strong",null,"GitHub project"),"View the source and add issues")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.mdx)("a",{className:"link-item",href:"https://discord.gg/UUt2PJb",target:"_blank"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.mdx)("img",{src:_assets_comments_svg__WEBPACK_IMPORTED_MODULE_5___default.a,alt:"comments"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.mdx)("span",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.mdx)("strong",null,"Discord chat"),"Chat with maintainers and the community"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.mdx)("div",{className:"tip-wrapper"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.mdx)("span",{className:"tip"},"Tip"),"Edit the Markdown in ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.mdx)("code",null,"src/stories/Introduction.stories.mdx")))}MDXContent.isMDXComponent=!0;const __page=()=>{throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};const componentMeta={title:"Example/Introduction",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs={...componentMeta.parameters.docs||{},page:()=>Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.mdx)(_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_2__.AddContext,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentMeta:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.mdx)(MDXContent,null))},__webpack_exports__.default=componentMeta},1146:function(module,exports){function webpackEmptyContext(req){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}webpackEmptyContext.keys=function(){return[]},webpackEmptyContext.resolve=webpackEmptyContext,module.exports=webpackEmptyContext,webpackEmptyContext.id=1146},1147:function(module,exports,__webpack_require__){var map={"./components/src/code-editor/stories/code-editor.stories.tsx":1148,"./components/src/expression-input/stories/expression-input.stories.tsx":1182,"./components/src/modal/stories/modal.stories.tsx":1183,"./components/src/object-key-value-input/stories/object-key-value-input.stories.tsx":1181,"./components/src/object-string-input/stories/object-string-input.stories.tsx":1184,"./components/src/select/stories/select.stories.tsx":1155,"./components/src/switch/stories/switch.stories.tsx":1158,"./components/src/tooltip/stories/tooltip.stories.tsx":1185,"./engine/stories/engine.stories.tsx":1178};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=1147},1148:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Default",(function(){return Default}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_index__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(187);function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}__webpack_exports__.default={title:"Components/Editor",component:_index__WEBPACK_IMPORTED_MODULE_1__.a,argTypes:{}};const Default=(args=>{const ref=Object(react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),handleSetValue=Object(react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{ref.current&&(ref.current.value="() => {}")},[]);return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("button",{onClick:handleSetValue},"click"),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_index__WEBPACK_IMPORTED_MODULE_1__.a,_extends({ref:ref},args)))}).bind({});Default.args={value:'function x() {\n\tconsole.log("Hello world!");\n}',style:{width:"100%",height:300}},Default.parameters={storySource:{source:"(args) => {\n  const ref = useRef<Instance | null>(null)\n  const handleSetValue = useCallback(() => {\n    if (!ref.current) {\n      return\n    }\n    ref.current.value = '() => {}'\n  }, [])\n\n  return (\n    <div>\n      <button onClick={handleSetValue}>click</button>\n      <Editor ref={ref} {...args} />\n    </div>\n  )\n}"},...Default.parameters}},1149:function(module,exports,__webpack_require__){var api=__webpack_require__(131),content=__webpack_require__(1150);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},1150:function(module,exports,__webpack_require__){(exports=__webpack_require__(132)(!1)).push([module.i,".select {\n  display: inline-flex;\n  align-items: center;\n  padding: 5px;\n  border: solid var(--border-width) var(--border-color);\n  border-radius: var(--border-radius);\n  font-size: 13px;\n}\n\n.select__arrow {\n  margin-left: 10px;\n  font-size: 12px;\n  transition: transform 200ms ease;\n  opacity: 0.5;\n}\n\n.select--active .select__arrow {\n  transform: rotate(90deg);\n}\n\n.select__overlay {\n  position: absolute;\n  border-radius: 5px;\n  max-width: 300px;\n  padding: 10px;\n  background: rgba(0, 0, 0, 0.8);\n  color: #fff;\n  transform-origin: 15px -5px;\n  z-index: 9999;\n}\n\n.select__overlay::before {\n  content: '';\n  position: absolute;\n  left: 10px;\n  top: -10px;\n  border-style: solid;\n  border-width: 5px;\n  border-color: transparent;\n  border-bottom-color: rgba(0, 0, 0, 0.8);\n}\n\n.select__overlay.fade-down-enter {\n  opacity: 0;\n  transform: scale(0.4) translateY(-20px);\n}\n\n.select__overlay.fade-down-exit {\n  opacity: 1;\n  transform: scale(1) translateY(0);\n}\n\n.select__overlay.fade-down-enter-active {\n  opacity: 1;\n  transform: scale(1) translateY(0);\n  transition: all 200ms;\n}\n\n.select__overlay.fade-down-exit-active {\n  opacity: 0;\n  transform: scale(0.4) translateY(-20px);\n  transition: all 200ms;\n}\n\n:not(.select) > .select-option {\n  display: block;\n  min-width: 100px;\n  height: 30px;\n  line-height: 30px;\n  padding: 5px 0;\n}\n\n:not(.select) > .select-option:not(:last-child) {\n  border-bottom: solid 1px rgba(255, 255, 255, 0.3);\n}\n",""]),module.exports=exports},1152:function(module,exports,__webpack_require__){(exports=__webpack_require__(132)(!1)).push([module.i,".select {\n  display: inline-flex;\n  align-items: center;\n  padding: 5px;\n  border: solid var(--border-width) var(--border-color);\n  border-radius: var(--border-radius);\n  font-size: 13px;\n}\n\n.select__arrow {\n  margin-left: 10px;\n  font-size: 12px;\n  transition: transform 200ms ease;\n  opacity: 0.5;\n}\n\n.select--active .select__arrow {\n  transform: rotate(90deg);\n}\n\n.select__overlay {\n  position: absolute;\n  border-radius: 5px;\n  max-width: 300px;\n  padding: 10px;\n  background: rgba(0, 0, 0, 0.8);\n  color: #fff;\n  transform-origin: 15px -5px;\n  z-index: 9999;\n}\n\n.select__overlay::before {\n  content: '';\n  position: absolute;\n  left: 10px;\n  top: -10px;\n  border-style: solid;\n  border-width: 5px;\n  border-color: transparent;\n  border-bottom-color: rgba(0, 0, 0, 0.8);\n}\n\n.select__overlay.fade-down-enter {\n  opacity: 0;\n  transform: scale(0.4) translateY(-20px);\n}\n\n.select__overlay.fade-down-exit {\n  opacity: 1;\n  transform: scale(1) translateY(0);\n}\n\n.select__overlay.fade-down-enter-active {\n  opacity: 1;\n  transform: scale(1) translateY(0);\n  transition: all 200ms;\n}\n\n.select__overlay.fade-down-exit-active {\n  opacity: 0;\n  transform: scale(0.4) translateY(-20px);\n  transition: all 200ms;\n}\n\n:not(.select) > .select-option {\n  display: block;\n  min-width: 100px;\n  height: 30px;\n  line-height: 30px;\n  padding: 5px 0;\n}\n\n:not(.select) > .select-option:not(:last-child) {\n  border-bottom: solid 1px rgba(255, 255, 255, 0.3);\n}\n",""]),module.exports=exports},1153:function(module,exports,__webpack_require__){var api=__webpack_require__(131),content=__webpack_require__(1154);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},1154:function(module,exports,__webpack_require__){(exports=__webpack_require__(132)(!1)).push([module.i,".container {\n  --border-color: #ccc;\n  --border-radius: 5px;\n  --border-width: 1px;\n}\n",""]),module.exports=exports},1155:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"OptionsChildren",(function(){return OptionsChildren})),__webpack_require__.d(__webpack_exports__,"OptionsProps",(function(){return OptionsProps}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_index__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(138);__webpack_require__(1156),__webpack_require__(515);__webpack_exports__.default={title:"Components/Select",component:_index__WEBPACK_IMPORTED_MODULE_1__.a,argTypes:{}};const Template=args=>react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{className:"container"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_index__WEBPACK_IMPORTED_MODULE_1__.a,args,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_index__WEBPACK_IMPORTED_MODULE_1__.a.Option,{value:"hello"},"hello"),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_index__WEBPACK_IMPORTED_MODULE_1__.a.Option,{value:"world"},"world"))),OptionsChildren=Template.bind({});OptionsChildren.args={value:"hello"};const OptionsProps=Template.bind({});OptionsProps.args={value:"world ...",options:[{label:"hello ...",value:"hello ..."},{label:"world ...",value:"world ..."}]},OptionsChildren.parameters={storySource:{source:'(args) => {\n  return (\n    <div className="container">\n      <Select {...args}>\n        <Select.Option value="hello">hello</Select.Option>\n        <Select.Option value="world">world</Select.Option>\n      </Select>\n    </div>\n  )\n}'},...OptionsChildren.parameters},OptionsProps.parameters={storySource:{source:'(args) => {\n  return (\n    <div className="container">\n      <Select {...args}>\n        <Select.Option value="hello">hello</Select.Option>\n        <Select.Option value="world">world</Select.Option>\n      </Select>\n    </div>\n  )\n}'},...OptionsProps.parameters}},1156:function(module,exports,__webpack_require__){var api=__webpack_require__(131),content=__webpack_require__(1157);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},1157:function(module,exports,__webpack_require__){(exports=__webpack_require__(132)(!1)).push([module.i,".container {\n  --border-color: #ccc;\n  --border-radius: 5px;\n  --border-width: 1px;\n}\n",""]),module.exports=exports},1158:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Default",(function(){return Default})),__webpack_require__.d(__webpack_exports__,"AsFormItem",(function(){return AsFormItem}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_index__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(152);__webpack_exports__.default={title:"Components/Switch",component:_index__WEBPACK_IMPORTED_MODULE_1__.a,argTypes:{}};const Default=(args=>react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_index__WEBPACK_IMPORTED_MODULE_1__.a,args)).bind({});Default.args={value:!0};const AsFormItem=(args=>{const[value,setValue]=Object(react__WEBPACK_IMPORTED_MODULE_0__.useState)(args.value);Object(react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>setValue(args.value),[args.value]);const handleChange=Object(react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(event=>{setValue(!!event.target.value),args.onChange&&args.onChange(event)},[args.onChange]);return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_index__WEBPACK_IMPORTED_MODULE_1__.a,{value:value,onChange:handleChange})}).bind({});Default.args={value:!0},Default.parameters={storySource:{source:"(args) => <Switch {...args} />"},...Default.parameters},AsFormItem.parameters={storySource:{source:"(args) => {\n  const [value, setValue] = useState(args.value)\n  useEffect(() => setValue(args.value), [args.value])\n  const handleChange = useCallback(\n    (event: EventData<unknown>) => {\n      setValue(!!event.target.value)\n      args.onChange && args.onChange(event)\n    },\n    [args.onChange]\n  )\n  return <Switch value={value} onChange={handleChange} />\n}"},...AsFormItem.parameters}},116:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var pattern=Object.freeze({__proto__:null,FUNCTION_STR:/^\s*function\s*\w*\s*\(|^(\w+|\((\s*\w+,?)*\))\s*=>\s*/}),index=Object.freeze({__proto__:null});var typePredication=Object.freeze({__proto__:null,isString:function isString(obj){return"string"==typeof obj}}),theme$1=Object.freeze({__proto__:null,defaultTheme:{mixins:{},overrides:{},palette:{common:{black:"#000",white:"#fff"},type:"light",primary:{main:"#1976d2",light:"rgb(71, 145, 219)",dark:"rgb(17, 82, 147)",contrastText:"#fff"},secondary:{main:"rgb(220, 0, 78)",light:"rgb(227, 51, 113)",dark:"rgb(154, 0, 54)",contrastText:"#fff"},error:{light:"#e57373",main:"#f44336",dark:"#d32f2f",contrastText:"#fff"},warning:{light:"#ffb74d",main:"#ff9800",dark:"#f57c00",contrastText:"rgba(0, 0, 0, 0.87)"},info:{light:"#64b5f6",main:"#2196f3",dark:"#1976d2",contrastText:"#fff"},success:{light:"#81c784",main:"#4caf50",dark:"#388e3c",contrastText:"rgba(0, 0, 0, 0.87)"},mask:{light:"rgba(0, 0, 0, 0.3)",main:"rgba(0, 0, 0, 0.5)",dark:"rgba(0, 0, 0, 0.87)",contrastText:"#fff"},grey:{50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#d5d5d5",A200:"#aaaaaa",A400:"#303030",A700:"#616161"},contrastThreshold:3,tonalOffset:.2,text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",hint:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:"#fff",default:"#fff",level2:"#f5f5f5",level1:"#fff"},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},spacing:{Lg:24,Md:16,Sm:12,Xs:8,Xss:4},shadows:["none","0px 2px 1px -1px rgba(0,0,0,0.2),0px 1px 1px 0px rgba(0,0,0,0.14),0px 1px 3px 0px rgba(0,0,0,0.12)","0px 3px 1px -2px rgba(0,0,0,0.2),0px 2px 2px 0px rgba(0,0,0,0.14),0px 1px 5px 0px rgba(0,0,0,0.12)","0px 3px 3px -2px rgba(0,0,0,0.2),0px 3px 4px 0px rgba(0,0,0,0.14),0px 1px 8px 0px rgba(0,0,0,0.12)","0px 2px 4px -1px rgba(0,0,0,0.2),0px 4px 5px 0px rgba(0,0,0,0.14),0px 1px 10px 0px rgba(0,0,0,0.12)","0px 3px 5px -1px rgba(0,0,0,0.2),0px 5px 8px 0px rgba(0,0,0,0.14),0px 1px 14px 0px rgba(0,0,0,0.12)","0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12)","0px 4px 5px -2px rgba(0,0,0,0.2),0px 7px 10px 1px rgba(0,0,0,0.14),0px 2px 16px 1px rgba(0,0,0,0.12)","0px 5px 5px -3px rgba(0,0,0,0.2),0px 8px 10px 1px rgba(0,0,0,0.14),0px 3px 14px 2px rgba(0,0,0,0.12)","0px 5px 6px -3px rgba(0,0,0,0.2),0px 9px 12px 1px rgba(0,0,0,0.14),0px 3px 16px 2px rgba(0,0,0,0.12)","0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)","0px 6px 7px -4px rgba(0,0,0,0.2),0px 11px 15px 1px rgba(0,0,0,0.14),0px 4px 20px 3px rgba(0,0,0,0.12)","0px 7px 8px -4px rgba(0,0,0,0.2),0px 12px 17px 2px rgba(0,0,0,0.14),0px 5px 22px 4px rgba(0,0,0,0.12)","0px 7px 8px -4px rgba(0,0,0,0.2),0px 13px 19px 2px rgba(0,0,0,0.14),0px 5px 24px 4px rgba(0,0,0,0.12)","0px 7px 9px -4px rgba(0,0,0,0.2),0px 14px 21px 2px rgba(0,0,0,0.14),0px 5px 26px 4px rgba(0,0,0,0.12)","0px 8px 9px -5px rgba(0,0,0,0.2),0px 15px 22px 2px rgba(0,0,0,0.14),0px 6px 28px 5px rgba(0,0,0,0.12)","0px 8px 10px -5px rgba(0,0,0,0.2),0px 16px 24px 2px rgba(0,0,0,0.14),0px 6px 30px 5px rgba(0,0,0,0.12)","0px 8px 11px -5px rgba(0,0,0,0.2),0px 17px 26px 2px rgba(0,0,0,0.14),0px 6px 32px 5px rgba(0,0,0,0.12)","0px 9px 11px -5px rgba(0,0,0,0.2),0px 18px 28px 2px rgba(0,0,0,0.14),0px 7px 34px 6px rgba(0,0,0,0.12)","0px 9px 12px -6px rgba(0,0,0,0.2),0px 19px 29px 2px rgba(0,0,0,0.14),0px 7px 36px 6px rgba(0,0,0,0.12)","0px 10px 13px -6px rgba(0,0,0,0.2),0px 20px 31px 3px rgba(0,0,0,0.14),0px 8px 38px 7px rgba(0,0,0,0.12)","0px 10px 13px -6px rgba(0,0,0,0.2),0px 21px 33px 3px rgba(0,0,0,0.14),0px 8px 40px 7px rgba(0,0,0,0.12)","0px 10px 14px -6px rgba(0,0,0,0.2),0px 22px 35px 3px rgba(0,0,0,0.14),0px 8px 42px 7px rgba(0,0,0,0.12)","0px 11px 14px -7px rgba(0,0,0,0.2),0px 23px 36px 3px rgba(0,0,0,0.14),0px 9px 44px 8px rgba(0,0,0,0.12)","0px 11px 15px -7px rgba(0,0,0,0.2),0px 24px 38px 3px rgba(0,0,0,0.14),0px 9px 46px 8px rgba(0,0,0,0.12)"],typography:{htmlFontSize:16,fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',fontSize:14,fontWeightLight:300,fontWeightRegular:400,fontWeightMedium:500,fontWeightBold:700,h1:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',fontWeight:300,fontSize:"6rem",lineHeight:1.167,letterSpacing:"-0.01562em"},h2:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',fontWeight:300,fontSize:"3.75rem",lineHeight:1.2,letterSpacing:"-0.00833em"},h3:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',fontWeight:400,fontSize:"3rem",lineHeight:1.167,letterSpacing:"0em"},h4:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',fontWeight:400,fontSize:"2.125rem",lineHeight:1.235,letterSpacing:"0.00735em"},h5:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',fontWeight:400,fontSize:"1.5rem",lineHeight:1.334,letterSpacing:"0em"},h6:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',fontWeight:500,fontSize:"1.25rem",lineHeight:1.6,letterSpacing:"0.0075em"},subtitle1:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',fontWeight:400,fontSize:"1rem",lineHeight:1.75,letterSpacing:"0.00938em"},subtitle2:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',fontWeight:500,fontSize:"0.875rem",lineHeight:1.57,letterSpacing:"0.00714em"},body1:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',fontWeight:400,fontSize:"1rem",lineHeight:1.5,letterSpacing:"0.00938em"},body2:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',fontWeight:400,fontSize:"0.875rem",lineHeight:1.43,letterSpacing:"0.01071em"},button:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',fontWeight:500,fontSize:"0.875rem",lineHeight:1.75,letterSpacing:"0.02857em",textTransform:"uppercase"},caption:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',fontWeight:400,fontSize:"0.75rem",lineHeight:1.66,letterSpacing:"0.03333em"},overline:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',fontWeight:400,fontSize:"0.75rem",lineHeight:2.66,letterSpacing:"0.08333em",textTransform:"uppercase"}},shape:{borderRadius:4},transitions:{easing:{easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},duration:{shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195}},zIndex:{mobileStepper:1e3,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},nprogress:{color:"#000"}}});exports.pattern=pattern,exports.theme=theme$1,exports.typePredication=typePredication,exports.types=index},1161:function(module,exports,__webpack_require__){var api=__webpack_require__(131),content=__webpack_require__(1162);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},1162:function(module,exports,__webpack_require__){(exports=__webpack_require__(132)(!1)).push([module.i,".tooltip {\n  position: absolute;\n  border-radius: 5px;\n  max-width: 300px;\n  padding: 10px;\n  background: rgba(0, 0, 0, 0.8);\n  color: #fff;\n  transform-origin: -5px 15px;\n  z-index: 9999;\n}\n\n.tooltip::before {\n  content: '';\n  position: absolute;\n  left: -10px;\n  top: 10px;\n  border-style: solid;\n  border-width: 5px;\n  border-color: transparent;\n  border-right-color: rgba(0, 0, 0, 0.8);\n}\n\n.tooltip.fade-enter {\n  opacity: 0;\n  transform: scale(0.4) translateX(-20px);\n}\n\n.tooltip.fade-exit {\n  opacity: 1;\n  transform: scale(1) translateX(0);\n}\n\n.tooltip.fade-enter-active {\n  opacity: 1;\n  transform: scale(1) translateX(0);\n  transition: all 200ms;\n}\n\n.tooltip.fade-exit-active {\n  opacity: 0;\n  transform: scale(0.4) translateX(-20px);\n  transition: all 200ms;\n}\n",""]),module.exports=exports},1163:function(module,exports,__webpack_require__){var api=__webpack_require__(131),content=__webpack_require__(1164);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},1164:function(module,exports,__webpack_require__){(exports=__webpack_require__(132)(!1)).push([module.i,"html,\nbody {\n  font-family: -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans,\n    Helvetica Neue, sans-serif;\n}\n",""]),module.exports=exports},1165:function(module,exports,__webpack_require__){var api=__webpack_require__(131),content=__webpack_require__(1166);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},1166:function(module,exports,__webpack_require__){(exports=__webpack_require__(132)(!1)).push([module.i,".brick {\n  --font-family: -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans,\n    Helvetica Neue, sans-serif;\n  --border-radius: 5px;\n  --border-color: #ccc;\n  --border-width: 1px;\n}\n\n/* ---------------------------------------------------- */\n/* brick__with-config-form                              */\n/* ---------------------------------------------------- */\n/* style of birck with config form                      */\n/* ---------------------------------------------------- */\n/* .brick__with-config-form { */\n/*   position: relative; */\n/*   padding: 20px; */\n/*   margin: 10px; */\n/*   min-width: 100px; */\n/*   min-height: 20px; */\n/*   vertical-align: middle; */\n/*   border: solid 1px #ccc; */\n/*   border-radius: 5px; */\n/* } */\n/*  */\n/* span.brick__with-config-form { */\n/*   display: inline-block; */\n/* } */\n/*  */\n/* div.brick__with-config-form + div.brick__with-config-form { */\n/*   margin-top: 20px; */\n/* } */\n\n/* .brick__config-form-btn-g2 { */\n/*   text-align: right; */\n/*   margin-bottom: 10px; */\n/*   display: none; */\n/* } */\n/*  */\n/* .brick__config-form-close-btn { */\n/*   font-size: 20px; */\n/* } */\n/*  */\n/* .brick__with-config-form .brick__config-form--active .brick__config-form-btn-g2 { */\n/*   display: block; */\n/* } */\n\n/* .brick__config-form-btn-g1 { */\n/*   display: none; */\n/*   padding: 5px 8px; */\n/*   color: #fff; */\n/*   border-radius: 0 4px; */\n/*   background: rgba(0, 0, 0, 0.4); */\n/* } */\n/*  */\n/* .brick__config-form-btn-g1 > * { */\n/*   margin: 0 5px; */\n/* } */\n/*  */\n/* .brick__config-form-edit-btn { */\n/*   cursor: pointer; */\n/* } */\n/*  */\n/* .brick__config-form-move-btn { */\n/*   cursor: move; */\n/* } */\n/*  */\n/* .brick__with-config-form:hover > .brick__config-form .brick__config-form-btn-g1 { */\n/*   display: flex; */\n/* } */\n/*  */\n/* .brick__config-form { */\n/*   position: absolute; */\n/*   top: 0; */\n/*   right: 0; */\n/*   z-index: 100; */\n/*   font-size: 16px; */\n/*   max-height: 80vh; */\n/*   overflow-y: auto; */\n/*   overflow-x: hidden; */\n/*   color: #333; */\n/* } */\n\n/* .brick__config-form--active { */\n/*   width: 500px; */\n/*   background: #fff; */\n/*   z-index: 100; */\n/*   padding: 10px 10px 20px; */\n/*   border: solid 1px #ccc; */\n/*   border-radius: 5px; */\n/*   background: #fff; */\n/* } */\n\n/* .brick__with-config-form--dragging { */\n/*   border: dashed 1px #ccc; */\n/*   background: #fff8d1; */\n/*   color: #fff8d1; */\n/* } */\n/*  */\n/* .brick__with-config-form--dragging * { */\n/*   opacity: 0; */\n/* } */\n\n/* .brick__with-config-form:not(.brick__with-config-form--hovered) > .brick__action-area { */\n/*   display: none; */\n/* } */\n\n/* .brick__with-config-form--hovered { */\n/*   background-color: #efefef; */\n/* } */\n/* ---------------------------------------------------- */\n/* brick__with-config-form                              */\n/* ---------------------------------------------------- */\n\n/* ---------------------------------------------------- */\n/* brick__action-area                                   */\n/* ---------------------------------------------------- */\n/* dragger over the area will trigger position changing */\n/* ---------------------------------------------------- */\n/* .brick__action-area { */\n/*   position: absolute; */\n/* } */\n/*  */\n/* .brick__action-area::before { */\n/*   position: absolute; */\n/*   background-color: #ccc; */\n/*   content: ''; */\n/* } */\n/*  */\n/* .brick__action-area.brick__action-area--hovered::before { */\n/*   background-color: #1da1ff; */\n/* } */\n/*  */\n/* .brick__action-area.brick__action-area-top { */\n/*   top: 0; */\n/*   left: 0; */\n/*   right: 0; */\n/*   height: 10px; */\n/*   border-radius: 2px; */\n/* } */\n/*  */\n/* .brick__action-area.brick__action-area-top::before { */\n/*   top: 8px; */\n/*   left: 50%; */\n/*   width: 20px; */\n/*   height: 2px; */\n/*   border-radius: 2px; */\n/*   transform: translateX(-50%); */\n/* } */\n/*  */\n/* .brick__action-area.brick__action-area-bottom { */\n/*   bottom: 0; */\n/*   left: 0; */\n/*   right: 0; */\n/*   height: 10px; */\n/*   border-radius: 2px; */\n/* } */\n/*  */\n/* .brick__action-area.brick__action-area-bottom::before { */\n/*   bottom: 8px; */\n/*   left: 50%; */\n/*   width: 20px; */\n/*   height: 2px; */\n/*   border-radius: 2px; */\n/*   transform: translateX(-50%); */\n/* } */\n/*  */\n/* .brick__action-area.brick__action-area-left { */\n/*   left: 0; */\n/*   top: 0; */\n/*   bottom: 0; */\n/*   width: 10px; */\n/*   border-radius: 2px; */\n/* } */\n/*  */\n/* .brick__action-area.brick__action-area-left::before { */\n/*   left: 8px; */\n/*   top: 50%; */\n/*   height: 20px; */\n/*   width: 2px; */\n/*   border-radius: 2px; */\n/*   transform: translateY(-50%); */\n/* } */\n/*  */\n/* .brick__action-area.brick__action-area-right { */\n/*   right: 0; */\n/*   top: 0; */\n/*   bottom: 0; */\n/*   width: 10px; */\n/*   border-radius: 2px; */\n/* } */\n/*  */\n/* .brick__action-area.brick__action-area-right::before { */\n/*   right: 8px; */\n/*   top: 50%; */\n/*   height: 20px; */\n/*   width: 2px; */\n/*   border-radius: 2px; */\n/*   transform: translateY(-50%); */\n/* } */\n/* ---------------------------------------------------- */\n/* brick__action-area                                   */\n/* ---------------------------------------------------- */\n\n/* ---------------------------------------------------- */\n/* formitem                                          */\n/* ---------------------------------------------------- */\n.formitem-input {\n  border: solid 1px #ccc;\n  border-radius: 5px;\n  padding: 5px;\n  flex: 1 1;\n}\n\n.formitem-textarea {\n  border: solid 1px #ccc;\n  border-radius: 5px;\n  padding: 5px;\n  flex: 1 1;\n  min-height: 100px;\n  resize: none;\n}\n/* ---------------------------------------------------- */\n/* formitem                                          */\n/* ---------------------------------------------------- */\n\n.monaco-editor,\n.monaco-editor .margin,\n.monaco-editor-background {\n  background-color: transparent !important;\n}\n\n.error-boundary {\n  font-family: monospace;\n  white-space: pre;\n}\n\n.error-boundary > * {\n  font-family: var(--font-family);\n  white-space: initial;\n}\n",""]),module.exports=exports},1178:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Default",(function(){return Default})),__webpack_require__.d(__webpack_exports__,"WithHandler",(function(){return WithHandler})),__webpack_require__.d(__webpack_exports__,"WebPage",(function(){return WebPage})),__webpack_require__.d(__webpack_exports__,"Todos",(function(){return Todos}));var react=__webpack_require__(1),react_default=__webpack_require__.n(react),item_root_config=__webpack_require__(537),github_style_page_config=__webpack_require__(538),todos_config=__webpack_require__(539),eventemitter3=__webpack_require__(253),eventemitter3_default=__webpack_require__.n(eventemitter3);var src_context=react_default.a.createContext({options:{},renderConfigurationForm:()=>null,configurationFormContainerRef:Object(react.createRef)(),bricks:{},dataTypes:{},ee:new eventemitter3_default.a,previewMode:!1,transactionBegin:()=>{},transactionCommit:()=>{},transactionRollback:()=>{},autoCommit:!1,registerBrick:()=>{},selectInstance:()=>{},selectedInstance:null,configurationPanelContentUseTransition:!1,configurationPanelRef:Object(react.createRef)(),overlayRef:Object(react.createRef)(),moveOnDropOnly:!1});let ChildrenType,BrickStyle;function checkTypeIsString(dataType){return"string"==typeof dataType}function normalizeDataType(registeredTypes,dataTypes){return Object.keys(dataTypes).reduce((result,key)=>{const typeDefinition=dataTypes[key];if(checkTypeIsString(typeDefinition)){if(!registeredTypes[typeDefinition])throw Error(`type "${typeDefinition}" not found`);result[key]={...registeredTypes[typeDefinition]}}else{if(!registeredTypes[typeDefinition.type])throw Error(`type "${typeDefinition.type}" not found`);result[key]={...registeredTypes[typeDefinition.type],...typeDefinition}}return result},{})}!function(ChildrenType){ChildrenType.SINGLE="single",ChildrenType.MULTIPLE="multiple",ChildrenType.NONE="none"}(ChildrenType||(ChildrenType={})),function(BrickStyle){BrickStyle.INLINE="inline",BrickStyle.BLOCK="block"}(BrickStyle||(BrickStyle={}));var form_item_context=react_default.a.createContext({data:{},autoCommit:!1,commit:()=>{},onChange:()=>{}}),cloneDeep=__webpack_require__(134),cloneDeep_default=__webpack_require__.n(cloneDeep),index_esm=__webpack_require__(66),lib=__webpack_require__(41),react_jss_esm=__webpack_require__(33),set=__webpack_require__(535),set_default=__webpack_require__.n(set),get=__webpack_require__(133),get_default=__webpack_require__.n(get),classnames=__webpack_require__(191),classnames_default=__webpack_require__.n(classnames),shared_lib=__webpack_require__(116);function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}const useStyles=Object(react_jss_esm.createUseStyles)(theme=>({item:{display:"flex",position:"relative",borderBottom:"solid 1px "+theme.palette.grey[200],borderTop:"solid 1px "+theme.palette.grey[200],paddingBottom:theme.spacing.Sm,paddingTop:theme.spacing.Sm,marginTop:"-1px"},itemEditMode:{flexWrap:"wrap"},itemValue:{flex:1,lineHeight:1.5,overflow:"hidden",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",cursor:"pointer",wordBreak:"break-all",color:theme.palette.grey[400]},itemLabel:{minWidth:"120px",marginRight:theme.spacing.Md,fontWeight:theme.typography.fontWeightMedium,lineHeight:"24px",borderRight:"solid 1px "+theme.palette.grey[100],"$itemEditMode &":{width:"100%",marginBottom:theme.spacing.Sm}},itemBtnGroup:{display:"flex",alignItems:"center",position:"absolute",right:0},itemBtn:{marginLeft:theme.spacing.Sm},expressionCheckbox:{fontSize:theme.typography.fontSize}}),{name:"FormItem"});var form_item=({label:label,name:name,children:children,style:style,getOverlayContainer:getOverlayContainer,tips:tips,defaultValue:defaultValue,canUseExpression:canUseExpression,...props})=>{const classes=useStyles(),child=react_default.a.Children.only(children),context=Object(react.useContext)(form_item_context),[isEditMode,setIsEditMode]=Object(react.useState)(!1),[useExpr,setUseExpr]=Object(react.useState)(!1),onChange=Object(react.useCallback)(event=>{let newData=cloneDeep_default()(context.data);newData=set_default()(newData,event.target.name,event.target.value),context.onChange(newData)},[context.data]),ref=Object(react.useRef)(null);Object(react.useEffect)(()=>{var _ref,_get;!context.autoCommit&&ref.current&&isEditMode&&(ref.current.value=null!==(_ref=null!==(_get=get_default()(context.data,name))&&void 0!==_get?_get:defaultValue)&&void 0!==_ref?_ref:null)},[context.data,name,isEditMode,defaultValue]);const value=Object(react.useMemo)(()=>get_default()(context.data,name),[context.data,name]);Object(react.useEffect)(()=>{shared_lib.typePredication.isString(value)&&/^\{\{.*\}\}$/.test(value)&&setUseExpr(!0)},[value]);const enterEditMode=Object(react.useCallback)(()=>{setIsEditMode(!0)},[]),exitEditMode=Object(react.useCallback)(()=>{setIsEditMode(!1)},[]),handleCommit=Object(react.useCallback)(()=>{context.commit(),exitEditMode()},[]),handleCheckboxChange=Object(react.useCallback)(event=>{setUseExpr(event.target.checked)},[]),childProps=Object(react.useMemo)(()=>{const props={name:name,ref:ref,onChange:onChange,style:{...child.props.style,...style,display:isEditMode?"block":"none"}};return"string"!=typeof child.type&&(props.getOverlayContainer=getOverlayContainer),props},[child,getOverlayContainer,isEditMode]);return react_default.a.createElement("div",{className:classnames_default()(classes.item,{[classes.itemEditMode]:isEditMode})},react_default.a.createElement("label",{className:classes.itemLabel,htmlFor:"id"},label,tips&&react_default.a.createElement(lib.Tooltip,{getOverlayContainer:getOverlayContainer,content:tips},react_default.a.createElement("span",{style:{verticalAlign:"middle",marginLeft:5}},react_default.a.createElement(index_esm.AiOutlineQuestionCircle,null)))),!isEditMode&&react_default.a.createElement("div",{className:classes.itemValue,onClick:enterEditMode},"object"==typeof value?JSON.stringify(value):String(null!=value?value:"")),context.autoCommit&&react_default.a.cloneElement(child,{value:null!=value?value:"",...childProps,...props}),!context.autoCommit&&!useExpr&&react_default.a.cloneElement(child,{...childProps,...props}),!context.autoCommit&&useExpr&&react_default.a.createElement(lib.ExpressionInput,_extends({},childProps,props)),isEditMode&&react_default.a.createElement("div",{className:classes.itemBtnGroup},canUseExpression&&react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement("input",{checked:useExpr,type:"checkbox",id:"form-item-"+label,onChange:handleCheckboxChange}),react_default.a.createElement("label",{className:classes.expressionCheckbox,htmlFor:"form-item-"+label},"Expression")),react_default.a.createElement(index_esm.AiFillCheckCircle,{title:"confirm",className:classes.itemBtn,onClick:handleCommit}),react_default.a.createElement(index_esm.AiFillCloseCircle,{title:"cancel",className:classes.itemBtn,onClick:exitEditMode})))};try{formitem.displayName="formitem",formitem.__docgenInfo={description:"",displayName:"formitem",props:{name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!1,type:{name:"unknown"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"unknown"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},"data-testid":{defaultValue:null,description:"",name:"data-testid",required:!1,type:{name:"string"}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"RefObject<{ value: unknown; }>"}},tips:{defaultValue:null,description:"",name:"tips",required:!1,type:{name:"string | ReactElement<any, string | ((props: any) => ReactElement<any, string | ... | (new (props: any) => Component<any, any, any>)> | null) | (new (props: any) => Component<any, any, any>)>"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((data: EventData) => void)"}},getOverlayContainer:{defaultValue:null,description:"",name:"getOverlayContainer",required:!1,type:{name:"(() => HTMLElement)"}},types:{defaultValue:null,description:"",name:"types",required:!1,type:{name:"InputType[]"}},canUseExpression:{defaultValue:null,description:"",name:"canUseExpression",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/engine/src/form-item/form-item.tsx#formitem"]={docgenInfo:formitem.__docgenInfo,name:"formitem",path:"packages/engine/src/form-item/form-item.tsx#formitem"})}catch(__react_docgen_typescript_loader_error){}var compile_custom_render=__webpack_require__(189);function copyData(brick,bgm,context){return Object.keys(brick.dataTypes).reduce((acc,cur)=>{var _bgm$data;const newKey=Math.random().toString(36).slice(2);return context.dataTypes||(context.dataTypes={}),context.dataTypes[newKey]=function embedData(td,value){if(!checkTypeIsString(td))return td.default=value,td;return{type:td,default:value}}(brick.dataTypes[cur],null===(_bgm$data=bgm.data)||void 0===_bgm$data?void 0:_bgm$data[cur]),acc[cur]=newKey,acc},{})}function constructBrickMap(blueprint){const map={name:blueprint.name,data:blueprint.data,render:blueprint.render};return Array.isArray(blueprint.children)&&(map.children=blueprint.children.map(child=>constructBrickMap(child))),map}var cluster_brick=blueprint=>({name:Math.random().toString(36).slice(2),map:constructBrickMap(blueprint),dataTypes:{},childrenType:ChildrenType.NONE,render:()=>react_default.a.createElement(react_default.a.Fragment,null),version:"0.0.1"});try{clusterbrick.displayName="clusterbrick",clusterbrick.__docgenInfo={description:"",displayName:"clusterbrick",props:{_key:{defaultValue:null,description:"",name:"_key",required:!0,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},if:{defaultValue:null,description:"",name:"if",required:!1,type:{name:"boolean"}},for:{defaultValue:null,description:"",name:"for",required:!1,type:{name:"string"}},version:{defaultValue:null,description:"",name:"version",required:!0,type:{name:"string"}},id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"Record<string, unknown>"}},actions:{defaultValue:null,description:"",name:"actions",required:!1,type:{name:"Record<string, any>"}},handlers:{defaultValue:null,description:"",name:"handlers",required:!1,type:{name:"Record<string, any>"}},supply:{defaultValue:null,description:"",name:"supply",required:!1,type:{name:"Supply"}},listeners:{defaultValue:null,description:"",name:"listeners",required:!1,type:{name:"Record<string, any>"}},copy:{defaultValue:null,description:"",name:"copy",required:!1,type:{name:"boolean"}},copyID:{defaultValue:null,description:"",name:"copyID",required:!1,type:{name:"number"}},render:{defaultValue:null,description:"",name:"render",required:!1,type:{name:"string | CustomRenderFn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/engine/src/cluster-brick.tsx#clusterbrick"]={docgenInfo:clusterbrick.__docgenInfo,name:"clusterbrick",path:"packages/engine/src/cluster-brick.tsx#clusterbrick"})}catch(__react_docgen_typescript_loader_error){}const defaultFormItems={id:{type:"string",default:"",label:"ID",placeholder:"ID of brick instance",tips:"ID of brick instance"},actions:{type:"object",default:{},label:"Actions",fieldTypes:[lib.InputType.CODE,lib.InputType.STRING]},handlers:{type:"object",default:{},label:"Handlers",fieldTypes:[lib.InputType.CODE,lib.InputType.STRING]},"supply.data":{type:"object",default:{},label:"Supply Data",fieldTypes:[lib.InputType.STRING,lib.InputType.BOOLEAN]},"supply.actions":{type:"object",default:{},label:"Supply Actions",fieldTypes:[lib.InputType.CODE,lib.InputType.STRING]},render:{type:"code",default:"",label:"Render"},"data.wrapperStyle":{type:"object",default:{},label:"Wrapper Style",fieldTypes:[lib.InputType.STRING]}};var configuration_form=({blueprint:blueprint,onBlueprintChange:onBlueprintChange,onDataChange:onDataChange,autoCommit:autoCommit,getPopupContainer:getPopupContainer})=>{var _data$data;const engineCtx=Object(react.useContext)(src_context),brick=Object(react.useMemo)(()=>engineCtx.bricks[blueprint.name],[engineCtx.bricks,blueprint]),handleChange=Object(react.useCallback)(data=>{onBlueprintChange(blueprint=>({...blueprint,...data}))},[]),defaultFormItemKeys=Object(react.useMemo)(()=>Object.keys(defaultFormItems).filter(key=>!!brick.configurationForms&&brick.configurationForms.includes(key)),[brick.configurationForms]),defaultFormItemFullDefs=Object(react.useMemo)(()=>defaultFormItemKeys.reduce((result,key)=>(result[key]={...defaultFormItems[key],formItem:engineCtx.dataTypes[defaultFormItems[key].type].formItem,isValid:engineCtx.dataTypes[defaultFormItems[key].type].isValid},result),{}),[engineCtx.dataTypes]),data=Object(react.useMemo)(()=>({...blueprint}),[blueprint]),dataTypes=Object(react.useMemo)(()=>normalizeDataType(engineCtx.dataTypes,brick.dataTypes),[engineCtx.dataTypes,brick.dataTypes]),handleClick=Object(react.useCallback)(()=>{const newBrick=cluster_brick(blueprint),r=window.prompt("Please enter new brick name");r&&(newBrick.name=r),engineCtx.registerBrick(newBrick)},[brick]),hasChildren=Object(react.useMemo)(()=>Array.isArray(blueprint.children)&&!!blueprint.children.length,[blueprint]);return react_default.a.createElement(react_default.a.Fragment,null,hasChildren&&react_default.a.createElement("button",{onClick:handleClick,style:{marginBottom:10}},"Cluster"),react_default.a.createElement(form_item_context.Provider,{value:{data:data,onChange:handleChange,commit:engineCtx.transactionCommit,autoCommit:autoCommit}},defaultFormItemKeys.map(key=>{var _td$testID;const td=defaultFormItemFullDefs[key];return react_default.a.createElement(form_item,{key:key,getOverlayContainer:getPopupContainer,tips:td.tips,"data-testid":`${blueprint._key}-${null!==(_td$testID=td.testID)&&void 0!==_td$testID?_td$testID:key}`,label:(null==td?void 0:td.label)||key,types:td.fieldTypes,canUseExpression:td.canUseExpression,name:key},td.formItem())})),react_default.a.createElement(form_item_context.Provider,{value:{data:null!==(_data$data=data.data)&&void 0!==_data$data?_data$data:{},onChange:onDataChange,commit:engineCtx.transactionCommit,autoCommit:autoCommit}},Object.keys(dataTypes).map(key=>{var _td$testID2;const td=dataTypes[key];return"string"==typeof td?null:react_default.a.createElement(form_item,{key:key,defaultValue:td.default,getOverlayContainer:getPopupContainer,tips:td.tips,"data-testid":`${blueprint._key}-${null!==(_td$testID2=td.testID)&&void 0!==_td$testID2?_td$testID2:key}`,types:[lib.InputType.STRING],label:(null==td?void 0:td.label)||key,canUseExpression:td.canUseExpression,name:key},td.formItem())})))};try{configurationform.displayName="configurationform",configurationform.__docgenInfo={description:"",displayName:"configurationform",props:{blueprint:{defaultValue:null,description:"",name:"blueprint",required:!0,type:{name:"any"}},onBlueprintChange:{defaultValue:null,description:"",name:"onBlueprintChange",required:!0,type:{name:"any"}},onDataChange:{defaultValue:null,description:"",name:"onDataChange",required:!0,type:{name:"(data: any) => void"}},autoCommit:{defaultValue:null,description:"",name:"autoCommit",required:!0,type:{name:"boolean"}},getPopupContainer:{defaultValue:null,description:"",name:"getPopupContainer",required:!1,type:{name:"(() => HTMLElement)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/engine/src/configuration-form.tsx#configurationform"]={docgenInfo:configurationform.__docgenInfo,name:"configurationform",path:"packages/engine/src/configuration-form.tsx#configurationform"})}catch(__react_docgen_typescript_loader_error){}var useDrag=__webpack_require__(1199),useDrop=__webpack_require__(1198),debounce=__webpack_require__(136),debounce_default=__webpack_require__.n(debounce);const CopyWrapper=props=>react_default.a.createElement(react_default.a.Fragment,null,props.children);var ActionArea,render_copy=props=>props.render();try{rendercopy.displayName="rendercopy",rendercopy.__docgenInfo={description:"",displayName:"rendercopy",props:{render:{defaultValue:null,description:"",name:"render",required:!0,type:{name:"Render"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/engine/src/render-copy.tsx#rendercopy"]={docgenInfo:rendercopy.__docgenInfo,name:"rendercopy",path:"packages/engine/src/render-copy.tsx#rendercopy"})}catch(__react_docgen_typescript_loader_error){}try{CopyWrapper.displayName="CopyWrapper",CopyWrapper.__docgenInfo={description:"",displayName:"CopyWrapper",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/engine/src/render-copy.tsx#CopyWrapper"]={docgenInfo:CopyWrapper.__docgenInfo,name:"CopyWrapper",path:"packages/engine/src/render-copy.tsx#CopyWrapper"})}catch(__react_docgen_typescript_loader_error){}!function(ActionArea){ActionArea.TOP="top",ActionArea.LEFT="left",ActionArea.RIGHT="right",ActionArea.BOTTOM="bottom",ActionArea.PREVENT="prevent"}(ActionArea||(ActionArea={}));const ITEM_TYPE="brick-instance",brick_wrapper_useStyles=Object(react_jss_esm.createUseStyles)(theme=>({brick:{padding:"3px"},brickWithConfigForm:{position:"relative",padding:"20px",margin:"10px",minWidth:"100px",minHeight:"20px",verticalAlign:"middle",border:"solid 1px "+theme.palette.grey[400],borderRadius:"5px","span&":{display:"inline-block"},"div&":{marginTop:"20px"}},brickDragging:{border:"solid 1px "+theme.palette.grey[400],background:"#fff8d1",color:"#fff8d1","& *":{opacity:0}},brickSelected:{outline:"dashed 1px "+theme.palette.primary.main},brickHovered:{backgroundColor:"#efefef",outline:"none",boxShadow:"0 0 0 2px "+theme.palette.grey[500]},brickHidden:{opacity:.5},brickConfigFormActive:{},brickConfigForm:{position:"absolute",top:0,right:0,zIndex:100,fontSize:"16px",maxHeight:"80vh",overflowY:"auto",overflowX:"hidden",color:"#333"},brickConfigFormBtnGroup:{display:"none",padding:"5px 8px",color:"#fff",borderRadius:"0 4px",background:theme.palette.mask.main,"$brickWithConfigForm:hover > $brickConfigForm &":{display:"flex"}},actionArea:{position:"absolute","&::before":{content:'""',position:"absolute",backgroundColor:"#ccc"},"&$actionAreaHovered::before":{backgroundColor:"#1da1ff"},"$brickWithConfigForm:not($brickHovered) > &":{display:"none"}},actionAreaHovered:{}}),{name:"BrickWrapper"});function isTypeString(obj){return"string"==typeof obj}const voidElements=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],createRemoveItemFromParentFn=setBlueprint=>key=>{setBlueprint(blueprint=>{if(!blueprint.children||!blueprint.children.length)return blueprint;const children=blueprint.children.filter(item=>item._key!==key);return{...blueprint,children:children}})},isHoverOnDragItemOrItsChild=(blueprint,key)=>blueprint._key===key||!!Array.isArray(blueprint.children)&&blueprint.children.some(child=>isHoverOnDragItemOrItsChild(child,key));var brick_wrapper=props=>{const context=Object(react.useContext)(src_context),hoveredAreaRef=Object(react.useRef)(null),classes=brick_wrapper_useStyles(),brick=Object(react.useMemo)(()=>{const brick=context.bricks[props.blueprint.name];if(!brick)throw Error(`brick (${props.blueprint.name}) not found`);return brick},[context.bricks,props.blueprint]),brickContainer=Object(react.useRef)(null),handleChange=Object(react.useCallback)(newProps=>{props.onBlueprintChange(blueprint=>({...blueprint,data:newProps}))},[]),child=Object(react.useMemo)(()=>{if(react_default.a.Children.count(props.children)<=1){if(props.children.type===CopyWrapper){let Tag="div";return brick.style===BrickStyle.INLINE&&(Tag="span"),react_default.a.createElement(Tag,null,props.children)}return props.children}{const firstChild=react_default.a.Children.toArray(props.children)[0];return Object(react.cloneElement)(firstChild,{},props.children)}},[props.children,brick]),parentBrick=Object(react.useMemo)(()=>{if(!props.parentBlueprint)return null;const brick=context.bricks[props.parentBlueprint.name];if(!brick)throw Error(`brick (${props.parentBlueprint.name}) not found`);return brick},[context.bricks,props.parentBlueprint]),canDrop=Object(react.useCallback)((item,monitor)=>!!brickContainer.current&&(!!monitor.isOver({shallow:!0})&&!isHoverOnDragItemOrItsChild(item.blueprint,props.blueprint._key)),[brickContainer.current,props.blueprint]),handleRemoveFromParent=Object(react.useCallback)(key=>{createRemoveItemFromParentFn(props.onBlueprintChange)(key)},[props.onBlueprintChange]),handleAddChild=Object(react.useCallback)(_blueprint=>{props.onBlueprintChange(blueprint=>{let children=[];return blueprint.children&&blueprint.children.length&&(children=blueprint.children.slice()),children.push({..._blueprint}),{...blueprint,children:children}})},[props.onBlueprintChange]),[{isDragging:isDragging},drag,preview]=Object(useDrag.a)({item:{type:ITEM_TYPE,blueprint:props.blueprint,lastAction:"",onRemove:props.onRemoveItemFormParent},canDrag:()=>!0,isDragging:monitor=>monitor.getItem().blueprint._key===props.blueprint._key,collect:monitor=>({isDragging:monitor.isDragging()})},[props]);Object(react.useEffect)(()=>{brickContainer.current&&drag(brickContainer.current)},[drag,brickContainer.current]);const[{isOverCurrent:isOverCurrent},drop]=Object(useDrop.a)({accept:ITEM_TYPE,drop:(item,monitor)=>{context.moveOnDropOnly&&canDrop(item,monitor)&&(props.isRoot||(context.transactionBegin(),hoveredAreaRef.current&&[ActionArea.TOP,ActionArea.LEFT].includes(hoveredAreaRef.current)?(item.onRemove&&item.onRemove(item.blueprint._key),props.onAddToOrMoveInParent&&props.onAddToOrMoveInParent(item.blueprint,props.blueprint._key,"forward")):hoveredAreaRef.current&&[ActionArea.RIGHT,ActionArea.BOTTOM].includes(hoveredAreaRef.current)?(item.onRemove&&item.onRemove(item.blueprint._key),props.onAddToOrMoveInParent&&props.onAddToOrMoveInParent(item.blueprint,props.blueprint._key,"backward")):hoveredAreaRef.current!==ActionArea.PREVENT&&(item.onRemove&&item.onRemove(item.blueprint._key),handleAddChild(item.blueprint)),context.transactionCommit()))},hover:debounce_default()((item,monitor)=>{context.moveOnDropOnly||brickContainer.current&&canDrop(item,monitor)&&(context.transactionBegin(),hoveredAreaRef.current&&[ActionArea.TOP,ActionArea.LEFT].includes(hoveredAreaRef.current)?(item.onRemove&&item.onRemove(item.blueprint._key),props.onAddToOrMoveInParent&&props.onAddToOrMoveInParent(item.blueprint,props.blueprint._key,"forward"),item.onRemove=props.onRemoveItemFormParent,item.lastAction=`forward-${props.blueprint._key}-${item.blueprint._key}`):hoveredAreaRef.current&&[ActionArea.RIGHT,ActionArea.BOTTOM].includes(hoveredAreaRef.current)?(item.onRemove&&item.onRemove(item.blueprint._key),props.onAddToOrMoveInParent&&props.onAddToOrMoveInParent(item.blueprint,props.blueprint._key,"backward"),item.onRemove=props.onRemoveItemFormParent,item.lastAction=`backward-${props.blueprint._key}-${item.blueprint._key}`):hoveredAreaRef.current!==ActionArea.PREVENT&&(item.onRemove&&item.onRemove(item.blueprint._key),handleAddChild(item.blueprint),item.onRemove=handleRemoveFromParent,item.lastAction=`addition-${props.blueprint._key}-${item.blueprint._key}`),context.transactionCommit())},50),collect:monitor=>({isOverCurrent:monitor.isOver({shallow:!0})})},[props]),onRemove=Object(react.useCallback)(()=>{props.onRemoveItemFormParent&&props.onRemoveItemFormParent(props.blueprint._key),context.transactionCommit()},[props.onRemoveItemFormParent]),isVoidElement=Object(react.useMemo)(()=>isTypeString(child.type)&&voidElements.includes(child.type),[child.type]),configurationForm=context.renderConfigurationForm(react_default.a.createElement(configuration_form,{blueprint:props.blueprint,onBlueprintChange:props.onBlueprintChange,onDataChange:handleChange,autoCommit:context.autoCommit}),{connectDragSource:drag,removeItem:onRemove,blueprint:props.blueprint,classes:{container:classes.brickConfigForm,btnGroup:classes.brickConfigFormBtnGroup}});preview(drop(brickContainer));const isSelected=Object(react.useMemo)(()=>props.blueprint._key==context.selectedInstance,[props.blueprint._key,context.selectedInstance]);Object(react.useEffect)(()=>{if(brickContainer.current)return brickContainer.current.querySelectorAll("input").forEach(item=>{item.readOnly=!0}),()=>{brickContainer.current&&brickContainer.current.querySelectorAll("input").forEach(item=>{item.readOnly=!1})}},[]);const _theme=Object(react_jss_esm.useTheme)(),handleMouseMove=Object(react.useCallback)(debounce_default()(event=>{if(!brickContainer.current||isDragging||!isDragging&&!isOverCurrent)return;const hoverBoundingRect=brickContainer.current.getBoundingClientRect(),isTop=event.x>hoverBoundingRect.x&&event.x<hoverBoundingRect.x+hoverBoundingRect.width&&event.y>hoverBoundingRect.y&&event.y<hoverBoundingRect.y+5,isLeft=event.y>hoverBoundingRect.y&&event.y<hoverBoundingRect.y+hoverBoundingRect.height&&event.x>hoverBoundingRect.x&&event.x<hoverBoundingRect.x+5,isRight=event.y>hoverBoundingRect.y&&event.y<hoverBoundingRect.y+hoverBoundingRect.height&&event.x>hoverBoundingRect.x+hoverBoundingRect.width-5&&event.x<hoverBoundingRect.x+hoverBoundingRect.width,isBottom=event.x>hoverBoundingRect.x&&event.x<hoverBoundingRect.x+hoverBoundingRect.width&&event.y>hoverBoundingRect.y+hoverBoundingRect.height-5&&event.y<hoverBoundingRect.y+hoverBoundingRect.height;var _props$parentBlueprin;if(isTop)(null==parentBrick?void 0:parentBrick.childrenType)===ChildrenType.SINGLE&&null!=props&&props.parentBlueprint&&Array.isArray(null==props||null===(_props$parentBlueprin=props.parentBlueprint)||void 0===_props$parentBlueprin?void 0:_props$parentBlueprin.children)&&(null==props?void 0:props.parentBlueprint.children.length)>0?brickContainer.current.style.boxShadow="0px -2px 0px 0px "+_theme.palette.grey[500]:(brickContainer.current.style.boxShadow="0px -2px 0px 0px "+_theme.palette.primary.dark,hoveredAreaRef.current=ActionArea.TOP);else if(isLeft){var _props$parentBlueprin2;(null==parentBrick?void 0:parentBrick.childrenType)===ChildrenType.SINGLE&&null!=props&&props.parentBlueprint&&Array.isArray(null==props||null===(_props$parentBlueprin2=props.parentBlueprint)||void 0===_props$parentBlueprin2?void 0:_props$parentBlueprin2.children)&&(null==props?void 0:props.parentBlueprint.children.length)>0?brickContainer.current.style.boxShadow="-2px 0px 0px 0px "+_theme.palette.grey[500]:(brickContainer.current.style.boxShadow="-2px 0px 0px 0px "+_theme.palette.primary.dark,hoveredAreaRef.current=ActionArea.LEFT)}else if(isRight){var _props$parentBlueprin3;(null==parentBrick?void 0:parentBrick.childrenType)===ChildrenType.SINGLE&&null!=props&&props.parentBlueprint&&Array.isArray(null==props||null===(_props$parentBlueprin3=props.parentBlueprint)||void 0===_props$parentBlueprin3?void 0:_props$parentBlueprin3.children)&&(null==props?void 0:props.parentBlueprint.children.length)>0?brickContainer.current.style.boxShadow="-2px 0px 0px 0px "+_theme.palette.grey[500]:(brickContainer.current.style.boxShadow="2px 0px 0px 0px "+_theme.palette.primary.dark,hoveredAreaRef.current=ActionArea.RIGHT)}else if(isBottom){var _props$parentBlueprin4;(null==parentBrick?void 0:parentBrick.childrenType)===ChildrenType.SINGLE&&null!=props&&props.parentBlueprint&&Array.isArray(null==props||null===(_props$parentBlueprin4=props.parentBlueprint)||void 0===_props$parentBlueprin4?void 0:_props$parentBlueprin4.children)&&(null==props?void 0:props.parentBlueprint.children.length)>0?brickContainer.current.style.boxShadow="-2px 0px 0px 0px "+_theme.palette.grey[500]:(brickContainer.current.style.boxShadow="0px 2px 0px 0px "+_theme.palette.primary.dark,hoveredAreaRef.current=ActionArea.BOTTOM)}else Array.isArray(props.blueprint.children)&&props.blueprint.children.some(c=>c._key===props.blueprint._key)||brick.childrenType===ChildrenType.NONE||brick.childrenType===ChildrenType.SINGLE&&Array.isArray(props.blueprint.children)&&props.blueprint.children.length>0?(hoveredAreaRef.current=ActionArea.PREVENT,brickContainer.current.style.boxShadow="0px 0px 0px 2px "+_theme.palette.grey[500]):(hoveredAreaRef.current=null,brickContainer.current.style.boxShadow="0px 0px 0px 2px "+_theme.palette.primary.dark)},50),[isDragging,isOverCurrent,null==props?void 0:props.parentBlueprint,parentBrick]);Object(react.useEffect)(()=>{isOverCurrent||handleMouseLeave()},[isOverCurrent]);const handleMouseLeave=Object(react.useCallback)(debounce_default()(()=>{brickContainer.current&&(brickContainer.current.style.boxShadow="none",hoveredAreaRef.current=null)},50),[]);Object(react.useEffect)(()=>{if(brickContainer.current)return brickContainer.current.addEventListener("dragover",handleMouseMove),brickContainer.current.addEventListener("dragleave",handleMouseLeave),brickContainer.current.addEventListener("drop",handleMouseLeave),window.addEventListener("click",handleMouseLeave),()=>{brickContainer.current&&(brickContainer.current.removeEventListener("dragover",handleMouseMove),brickContainer.current.removeEventListener("dragleave",handleMouseLeave),brickContainer.current.removeEventListener("drop",handleMouseLeave),window.removeEventListener("click",handleMouseLeave))}},[handleMouseMove]);const className=Object(react.useMemo)(()=>classnames_default()(classes.brick,"brick",{[classes.brickSelected]:isSelected,[classes.brickDragging]:isDragging,[classes.brickHovered]:isOverCurrent&&!isDragging,[classes.brickHidden]:props.hidden}),[child.props.className,isDragging,isOverCurrent,isDragging,props.hidden,isSelected]),onSelect=Object(react.useCallback)(event=>{let node=event.target;if(event.currentTarget!==node){for(;node&&"brick-container"!==node.dataset["data-identifier".replace("data-","")];)node=node.parentElement;if(node!==event.currentTarget)return}context.selectInstance(props.blueprint._key),event.preventDefault(),event.stopPropagation()},[context.selectInstance]),newProps=Object(react.useMemo)(()=>({ref:brickContainer,"data-identifier":"brick-container",onClickCapture:onSelect,className:classnames_default()(child.props.className,className),readOnly:"string"==typeof child.type&&["input"].includes(child.type)}),[child.type,child.props.className,className,onSelect]);return context.previewMode?props.children:react_default.a.createElement(react_default.a.Fragment,null,configurationForm,Object(react.cloneElement)(child,newProps,...isTypeString(child.type)&&isVoidElement?react.Children.toArray(child.props.children):[]))};try{createRemoveItemFromParentFn.displayName="createRemoveItemFromParentFn",createRemoveItemFromParentFn.__docgenInfo={description:"",displayName:"createRemoveItemFromParentFn",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/engine/src/brick-wrapper.tsx#createRemoveItemFromParentFn"]={docgenInfo:createRemoveItemFromParentFn.__docgenInfo,name:"createRemoveItemFromParentFn",path:"packages/engine/src/brick-wrapper.tsx#createRemoveItemFromParentFn"})}catch(__react_docgen_typescript_loader_error){}try{brickwrapper.displayName="brickwrapper",brickwrapper.__docgenInfo={description:"",displayName:"brickwrapper",props:{hidden:{defaultValue:null,description:"",name:"hidden",required:!1,type:{name:"boolean"}},blueprint:{defaultValue:null,description:"",name:"blueprint",required:!0,type:{name:"Blueprint"}},parentBlueprint:{defaultValue:null,description:"",name:"parentBlueprint",required:!1,type:{name:"Blueprint"}},onBlueprintChange:{defaultValue:null,description:"",name:"onBlueprintChange",required:!0,type:{name:"SetBlueprint"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},onRemoveItemFormParent:{defaultValue:null,description:"",name:"onRemoveItemFormParent",required:!1,type:{name:"((key: string) => void)"}},onAddToOrMoveInParent:{defaultValue:null,description:"",name:"onAddToOrMoveInParent",required:!1,type:{name:"((blueprint: Blueprint, anchorKey: string, action: string) => void)"}},isRoot:{defaultValue:null,description:"",name:"isRoot",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/engine/src/brick-wrapper.tsx#brickwrapper"]={docgenInfo:brickwrapper.__docgenInfo,name:"brickwrapper",path:"packages/engine/src/brick-wrapper.tsx#brickwrapper"})}catch(__react_docgen_typescript_loader_error){}const VALUE_PARAM_PATTERN=/^\{\{(.*)\}\}$/;var compile_action=__webpack_require__(536);function parseActions(instance,obj,context){return Object.keys(obj||{}).reduce((result,key)=>{const func=obj[key]||"function(){}";let action;return action="string"==typeof func&&VALUE_PARAM_PATTERN.test(func)?((param,obj,expressionHook)=>{let value=param;const match=VALUE_PARAM_PATTERN.exec(param);if(match){let path="";path=expressionHook?expressionHook(match[1]||""):match[1],value=get_default()(obj,path)}return value})(func,context,expressions=>expressions.startsWith("$this.")&&!expressions.startsWith("$this.actions.")?expressions.replace("$this.","$this.actions."):expressions):Object(compile_action.a)(instance,func),result[key]=action,result},{})}function evalExpr(expression,$this,pSupply){return expression=(expression=expression.replace(/^\{\{|\}\}$/g,"")).replace(/(\$\w?[a-zA-Z]+\w?\.\w)/g,match=>match.startsWith("$this.")?match:"pSupply."+match),new Function("$this","pSupply","return "+expression)($this,pSupply)}function escapeRegExp(str){return str.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function parseData(engineCtx,dataConfig,data,pSupply){return Array.from(new Set([...Object.keys(dataConfig),...Object.keys(data)])).reduce((result,key)=>{if(void 0!==result[key])return result;const getValueOfkey=(result,key,traversedKeys)=>{var _data$key;if(traversedKeys.includes(key))throw Error("circular dependence");traversedKeys=traversedKeys.concat(key);let value=null!==(_data$key=data[key])&&void 0!==_data$key?_data$key:dataConfig[key].default;if(function isExpression(obj,delimiters){if("string"!=typeof obj)return!1;delimiters=delimiters.map(delimiter=>escapeRegExp(delimiter));const[pre,post]=delimiters;return new RegExp(`^${pre}.(?:(?<!${pre}).(?!${post}))*.?${post}$`).test(obj)}(value,engineCtx.options.delimiters)&&!function isForParamsExpression(obj,delimiters,forParams){if("string"!=typeof obj)return!1;delimiters=delimiters.map(delimiter=>escapeRegExp(delimiter));const[pre,post]=delimiters;return forParams=forParams.map(param=>escapeRegExp(param)),new RegExp(`^${pre}\\s*(${forParams.join("|")})\\s*${post}`).test(obj)}(value,engineCtx.options.delimiters,[engineCtx.options.identifiers.forItem,engineCtx.options.identifiers.forIndex])){const matches=function captureAttrDependencies(obj,thisIdendifier){if("string"!=typeof obj)return null;thisIdendifier=escapeRegExp(thisIdendifier);const pattern=new RegExp(thisIdendifier+"\\.(\\w+)","g"),result=[];let match=pattern.exec(obj);for(;match;)result.push(match[1]),match=pattern.exec(obj);return result.length?result:null}(value,engineCtx.options.identifiers.idPrefix+"this"),dependentData={};matches&&matches.forEach(attr=>{const valueOfAttr=getValueOfkey(result,attr,traversedKeys);dependentData[attr]=valueOfAttr}),value=evalExpr(value,{...dependentData},pSupply)}return result[key]=value,value},value=getValueOfkey(result,key,[]);return result[key]=value,result},{})}function evalForExpr(expression,$this,item,index){return expression=expression.replace(/^\{\{|\}\}$/g,""),new Function("$this","item","index","return "+expression)($this,item,index)}class error_boundary_ErrorBoundary extends react_default.a.Component{constructor(props){super(props),function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}(this,"hasShowError",!1),this.state={error:null}}componentDidCatch(error){this.setState({error:error},()=>{this.hasShowError=!0})}componentDidUpdate(){this.hasShowError&&(this.hasShowError=!1,this.setState({error:null}))}get blueprint(){return this.props.children.props.blueprint}get parentBlueprint(){return this.props.children.props.parentBlueprint}get isRoot(){return this.props.children.props.isRoot}get onRemoveItemFromParent(){return this.props.children.props.onRemoveItemFromParent}get onAddToOrMoveInParent(){return this.props.children.props.onAddToOrMoveInParent}get setBlueprint(){return this.props.children.props.setBlueprint}render(){return this.state.error?react_default.a.createElement(brick_wrapper,{key:this.blueprint._key,onRemoveItemFormParent:this.onRemoveItemFromParent,onAddToOrMoveInParent:this.onAddToOrMoveInParent,blueprint:this.blueprint,isRoot:this.isRoot,parentBlueprint:this.parentBlueprint,onBlueprintChange:this.setBlueprint},react_default.a.createElement("div",{className:"error-boundary"},String(this.state.error))):this.props.children}}var error_boundary=error_boundary_ErrorBoundary;try{error_boundary_ErrorBoundary.displayName="ErrorBoundary",error_boundary_ErrorBoundary.__docgenInfo={description:"",displayName:"ErrorBoundary",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/engine/src/error-boundary.tsx#ErrorBoundary"]={docgenInfo:error_boundary_ErrorBoundary.__docgenInfo,name:"ErrorBoundary",path:"packages/engine/src/error-boundary.tsx#ErrorBoundary"})}catch(__react_docgen_typescript_loader_error){}var use_render_children=(instance,blueprint,supply,setBlueprint)=>{const handleSetStateForChildren=Object(react.useCallback)((fn,key)=>{setBlueprint(blueprint=>{if(!blueprint.children||!blueprint.children.length)return blueprint;const children=blueprint.children.map(child=>child._key!==key?child:fn({...child}));return{...blueprint,children:children}})},[]),handleAddToOrMoveInParent=Object(react.useCallback)((_blueprint,anchorKey,action)=>{setBlueprint(blueprint=>{if(!blueprint.children||!blueprint.children.length)return blueprint;const children=blueprint.children.filter(c=>c._key!==_blueprint._key);let anchorIndex=-1;for(let i=0;i<blueprint.children.length;i++)if(blueprint.children[i]._key===anchorKey){anchorIndex=i;break}if(-1===anchorIndex)throw Error(`anchor node not found (key: ${anchorKey})`);const insertIndex="forward"===action?anchorIndex:anchorIndex+1;return children.splice(insertIndex,0,_blueprint),{...blueprint,children:children}})},[]),handleRemoveFromParent=Object(react.useCallback)(key=>{createRemoveItemFromParentFn(setBlueprint)(key)},[setBlueprint]);return Object(react.useCallback)((item,i)=>{var _supply$data$$parent,_supply$data;const newSupply={...supply,data:{...supply.data,$parent:cloneDeep_default()(null!==(_supply$data$$parent=null==supply||null===(_supply$data=supply.data)||void 0===_supply$data?void 0:_supply$data.$parent)&&void 0!==_supply$data$$parent?_supply$data$$parent:{})}};var _ref;void 0!==item&&(newSupply.data.$parent=Object.keys(null!==(_ref=newSupply.data.$parent)&&void 0!==_ref?_ref:{}).reduce((acc,cur)=>{var _newSupply$data,_newSupply$data$$pare;const value=null==newSupply||null===(_newSupply$data=newSupply.data)||void 0===_newSupply$data||null===(_newSupply$data$$pare=_newSupply$data.$parent)||void 0===_newSupply$data$$pare?void 0:_newSupply$data$$pare[cur];return"string"==typeof value&&/\b(item|index)\b/.test(value)?acc[cur]=evalForExpr(value,instance.data,item,null!=i?i:0):acc[cur]=value,acc},{}));return Array.isArray(blueprint.children)?blueprint.children.map(child=>{const newChild={...child};return void 0!==i&&(newChild.copy=!0,newChild.copyID=i),react_default.a.createElement(error_boundary,{key:child._key},react_default.a.createElement(brick_renderer,{parentBlueprint:blueprint,blueprint:newChild,context:newSupply,onAddToOrMoveInParent:handleAddToOrMoveInParent,onRemoveItemFromParent:handleRemoveFromParent,setBlueprint:fn=>handleSetStateForChildren(fn,newChild._key)}))}):null},[blueprint.children,supply.data])};var brick_renderer=({blueprint:blueprint,context:context,setBlueprint:setBlueprint,...props})=>{var _blueprint$data,_context$data,_props$data,_data$if,_ref;const engineCtx=Object(react.useContext)(src_context),brick=Object(react.useMemo)(()=>{const brick=engineCtx.bricks[blueprint.name];if(!brick)throw Error(`brick (${blueprint.name}) not found`);return brick},[engineCtx.bricks,blueprint]),dataTypes=Object(react.useMemo)(()=>normalizeDataType(engineCtx.dataTypes,brick.dataTypes),[engineCtx.dataTypes,brick.dataTypes]),[data,setData]=((engineCtx,dataConfig,dataFromConfig,pSupply,dataFromParent)=>{const[data,setData]=Object(react.useState)(parseData(engineCtx,dataConfig,dataFromConfig,pSupply));return Object(react.useEffect)(()=>{const newData=parseData(engineCtx,dataConfig,dataFromConfig,pSupply);setData({...newData,...dataFromParent})},[dataConfig,pSupply]),[data,setData]})(engineCtx,dataTypes,null!==(_blueprint$data=blueprint.data)&&void 0!==_blueprint$data?_blueprint$data:{},null!==(_context$data=context.data)&&void 0!==_context$data?_context$data:{},null!==(_props$data=props.data)&&void 0!==_props$data?_props$data:{}),instanceHandlers=function useInstanceHandlers(data,setBlueprint,setData){const context=Object(react.useContext)(src_context),handleSetData=Object(react.useCallback)((fn,options={})=>{const newData=fn(data);options.setToBlueprint?setBlueprint(blueprint=>({...blueprint,data:newData})):setData(newData),context.transactionCommit()},[data]),handleEmit=Object(react.useCallback)((event,...args)=>{context.ee.emit(event,...args)},[]);return Object(react.useMemo)(()=>({setData:handleSetData,emit:handleEmit}),[handleSetData])}(data,setBlueprint,setData),instance=Object(react.useRef)({key:blueprint._key,context:context,listeners:{},actions:{},handlers:{},data:data,editing:!engineCtx.previewMode,...instanceHandlers});instance.current.context=context,instance.current.editing=!engineCtx.previewMode,instance.current.data=data,Object.assign(instance.current,instanceHandlers);const actions=function useActions(instance,config,context){return Object(react.useMemo)(()=>{var _config$actions;return parseActions(instance,null!==(_config$actions=config.actions)&&void 0!==_config$actions?_config$actions:{},{$this:{supply:context.actions},$supply:context.actions})},[config.actions,context])}(instance.current,blueprint,context),listeners=function use_listeners_useActions(instance,config,context,actions){const engineCtx=Object(react.useContext)(src_context),listeners=Object(react.useMemo)(()=>{var _config$listeners;return parseActions(instance,null!==(_config$listeners=config.listeners)&&void 0!==_config$listeners?_config$listeners:{},{$this:{actions:actions,supply:context.actions},$supply:context.actions})},[config.actions,context,actions]);return Object(react.useEffect)(()=>{const _listeners=Object.keys(listeners||{}).map(key=>(engineCtx.ee.on(key,listeners[key]),()=>engineCtx.ee.off(key,listeners[key])));return()=>{_listeners.map(func=>func())}},[listeners]),listeners}(instance.current,blueprint,context,actions),handlers=function useHandlers(instance,brick,config,context,actions){return Object(react.useMemo)(()=>{var _brick$eventNames;const obj=null===(_brick$eventNames=brick.eventNames)||void 0===_brick$eventNames?void 0:_brick$eventNames.reduce((result,key)=>{var _config$handlers,_brick$defaultHandler;const handler=(null===(_config$handlers=config.handlers)||void 0===_config$handlers?void 0:_config$handlers[key])||(null===(_brick$defaultHandler=brick.defaultHandlers)||void 0===_brick$defaultHandler?void 0:_brick$defaultHandler[key]);return handler&&(result[key]=handler),result},{});return parseActions(instance,obj,{$this:{actions:actions,supply:context.actions},$supply:context.actions,...context.actions})},[brick,actions,config.handlers,context])}(instance.current,brick,blueprint,context,actions),supply=function useSupply(instance,config,context,data,actions){const supplyData=Object(react.useMemo)(()=>{var _config$supply;let supplyData={...null===(_config$supply=config.supply)||void 0===_config$supply?void 0:_config$supply.data};const result={$parent:supplyData},dataKeys=Object.keys(supplyData);return dataKeys.length<=0||(supplyData=dataKeys.reduce((result,key)=>{let value=supplyData[key];var _context$data;"string"==typeof value&&VALUE_PARAM_PATTERN.test(value)&&!/\b(item|index)\b/.test(value)&&(value=evalExpr(value,data,null!==(_context$data=context.data)&&void 0!==_context$data?_context$data:{}));return result[key]=value,result},{}),result.$parent=supplyData,config.id&&(result["$"+config.id]=supplyData)),result},[config,context,actions,data]),supplyActions=Object(react.useMemo)(()=>{var _config$supply$action,_config$supply2;let supplyActions={};const originActions=null!==(_config$supply$action=null===(_config$supply2=config.supply)||void 0===_config$supply2?void 0:_config$supply2.actions)&&void 0!==_config$supply$action?_config$supply$action:{},result={$parent:originActions};return Object.keys(originActions).length<=0||(supplyActions=parseActions(instance,originActions,{$this:{actions:actions},...context.actions}),result.$parent=supplyActions,config.id&&(result["$"+config.id]=supplyActions)),result},[config,context,actions]);return Object(react.useMemo)(()=>({data:{...context.data,...supplyData},actions:{...context.actions,...supplyActions}}),[supplyData,supplyActions,context])}(instance.current,blueprint,context,data,actions);instance.current.listeners=listeners,instance.current.actions=actions,instance.current.handlers=handlers;const renderChildren=use_render_children(instance.current,blueprint,supply,setBlueprint);instance.current.children=renderChildren();const render=function useRender(instance,brick,blueprint){const customRender=Object(react.useMemo)(()=>blueprint.render?Object(compile_custom_render.b)(instance,blueprint.render):null,[blueprint.render]);return Object(react.useMemo)(()=>customRender||Object(compile_custom_render.a)(brick.render,instance),[brick.render,customRender])}(instance.current,brick,blueprint);return engineCtx.previewMode&&null!==(_data$if=null==data?void 0:data.if)&&void 0!==_data$if&&!_data$if?null:react_default.a.createElement(brick_wrapper,{hidden:!(null===(_ref=null==data?void 0:data.if)||void 0===_ref||_ref),key:blueprint._key,onRemoveItemFormParent:props.onRemoveItemFromParent,onAddToOrMoveInParent:props.onAddToOrMoveInParent,blueprint:blueprint,isRoot:props.isRoot,parentBlueprint:props.parentBlueprint,onBlueprintChange:setBlueprint},Array.isArray(data.for)?react_default.a.createElement(CopyWrapper,null,data.for.map((item,i)=>{const instanceCopied={...instance.current};return instanceCopied.data=Object.keys(instanceCopied.data).reduce((acc,cur)=>{const value=instanceCopied.data[cur];return"string"==typeof value&&/\b(item|index)\b/.test(value)?acc[cur]=evalForExpr(value,instanceCopied.data,item,i):acc[cur]=value,acc},{}),instanceCopied.children=renderChildren(item,i),react_default.a.createElement(render_copy,{key:JSON.stringify(item),render:render.rebind(instanceCopied)})})):render())};try{brickrenderer.displayName="brickrenderer",brickrenderer.__docgenInfo={description:"",displayName:"brickrenderer",props:{blueprint:{defaultValue:null,description:"",name:"blueprint",required:!0,type:{name:"Blueprint"}},parentBlueprint:{defaultValue:null,description:"",name:"parentBlueprint",required:!1,type:{name:"Blueprint"}},context:{defaultValue:null,description:"",name:"context",required:!0,type:{name:"BrickContext"}},setBlueprint:{defaultValue:null,description:"",name:"setBlueprint",required:!0,type:{name:"SetBlueprint"}},onRemoveItemFromParent:{defaultValue:null,description:"",name:"onRemoveItemFromParent",required:!1,type:{name:"((key: string) => void)"}},onAddToOrMoveInParent:{defaultValue:null,description:"",name:"onAddToOrMoveInParent",required:!1,type:{name:"((blueprint: Blueprint, anchorKey: string, action: string) => void)"}},onDrop:{defaultValue:null,description:"",name:"onDrop",required:!1,type:{name:"((_blueprint: Blueprint) => void)"}},isRoot:{defaultValue:null,description:"",name:"isRoot",required:!1,type:{name:"boolean"}},data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"Record<string, unknown>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/engine/src/brick-renderer.tsx#brickrenderer"]={docgenInfo:brickrenderer.__docgenInfo,name:"brickrenderer",path:"packages/engine/src/brick-renderer.tsx#brickrenderer"})}catch(__react_docgen_typescript_loader_error){}var react_dom=__webpack_require__(42),react_dom_default=__webpack_require__.n(react_dom),Transition=__webpack_require__(30),render_configuration_form=(node,options)=>{var _context$configuratio,_context$configuratio3;const context=Object(react.useContext)(src_context),configFormVisible=Object(react.useMemo)(()=>context.selectedInstance===options.blueprint._key&&(!options.blueprint.copy||0===options.blueprint.copyID),[context.selectedInstance,options.blueprint._key,options.blueprint.copy,options.blueprint.copyID]),configurationPanelcontainer=null===(_context$configuratio=context.configurationPanelRef)||void 0===_context$configuratio?void 0:_context$configuratio.current,getPopupContainer=Object(react.useCallback)(()=>{var _context$configuratio2;return null===(_context$configuratio2=context.configurationPanelRef)||void 0===_context$configuratio2?void 0:_context$configuratio2.current},[null===(_context$configuratio3=context.configurationPanelRef)||void 0===_context$configuratio3?void 0:_context$configuratio3.current]);return react_default.a.createElement(react_default.a.Fragment,null,!context.configurationPanelContentUseTransition&&configFormVisible&&configurationPanelcontainer&&react_dom_default.a.createPortal(react_default.a.cloneElement(react_default.a.Children.only(node),{getPopupContainer:getPopupContainer}),configurationPanelcontainer),context.configurationPanelContentUseTransition&&react_default.a.createElement(Transition.default,{in:configFormVisible,timeout:300,unmountOnExit:!0},()=>configurationPanelcontainer&&react_dom_default.a.createPortal(react_default.a.cloneElement(react_default.a.Children.only(node),{getPopupContainer:getPopupContainer}),configurationPanelcontainer)))},DndProvider=__webpack_require__(1196),esm=__webpack_require__(540),deep_diff=__webpack_require__(258),deep_diff_default=__webpack_require__.n(deep_diff),index_browser=__webpack_require__(357);const menuStyle={display:"inline-block",marginRight:10,border:"solid 1px #ccc",borderRadius:5,padding:"5px 10px",cursor:"move"},BrickMenuItem=props=>{const engineCtx=Object(react.useContext)(src_context),data=Object(react.useMemo)(()=>{let brick=props.brick;if(function isBrickGroup(brick){return"object"==typeof brick.map}(props.brick)){const context={},render=function compactBrick(bricks,bgm,context){const brick=bricks[bgm.name];if(!brick)throw Error("brick not found");!function copyEvent(brick,context){var _brick$eventNames;context.eventNames||(context.eventNames=[],context.defaultHandlers={}),null===(_brick$eventNames=brick.eventNames)||void 0===_brick$eventNames||_brick$eventNames.map(name=>{var _context$eventNames,_context$eventNames2;null!=context&&null!==(_context$eventNames=context.eventNames)&&void 0!==_context$eventNames&&_context$eventNames.includes(name)||(null===(_context$eventNames2=context.eventNames)||void 0===_context$eventNames2||_context$eventNames2.push(name))})}(brick,context);const dataKeyMap=copyData(brick,bgm,context);let childrenRenders=[];return Array.isArray(bgm.children)&&bgm.children.length&&(childrenRenders=bgm.children.map(item=>compactBrick(bricks,item,context))),brickInstance=>{const data=Object.keys(dataKeyMap).reduce((acc,cur)=>(acc[cur]=brickInstance.data[dataKeyMap[cur]],acc),{});brickInstance.children=childrenRenders.map(render=>render(brickInstance));let _render=brick.render;return bgm.render&&(_render=Object(compile_custom_render.b)(bgm.render)),_render({...brickInstance,data:data,setData:(fn,options={})=>{let newData=fn({});newData=Object.keys(newData).reduce((acc,cur)=>(acc[dataKeyMap[cur]]=newData[cur],acc),{}),brickInstance.setData(data=>({...data,newData:newData}),options)}})}}(engineCtx.bricks,props.brick.map,context);brick={...props.brick,render:render,...context},engineCtx.bricks[props.brick.name]=brick}return Object.keys(brick.dataTypes).reduce((acc,cur)=>{const td=brick.dataTypes[cur];return"string"!=typeof td&&(acc[cur]=td.default),acc},{})},[props.brick.name]),[,drag]=Object(useDrag.a)({item:{type:ITEM_TYPE,blueprint:{_key:Object(index_browser.a)(),name:props.brick.name,data:data}},begin:()=>({type:ITEM_TYPE,blueprint:{_key:Object(index_browser.a)(),name:props.brick.name,data:data}}),canDrag:()=>!0},[props.brick.name,data]);return props.brick.renderMenu?Object(react.cloneElement)(props.brick.renderMenu(),{ref:drag,style:menuStyle}):react_default.a.createElement("div",{style:menuStyle,ref:drag},props.brick.name)};try{BrickMenuItem.displayName="BrickMenuItem",BrickMenuItem.__docgenInfo={description:"",displayName:"BrickMenuItem",props:{brick:{defaultValue:null,description:"",name:"brick",required:!0,type:{name:"Brick"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/engine/src/brick-menu-item.tsx#BrickMenuItem"]={docgenInfo:BrickMenuItem.__docgenInfo,name:"BrickMenuItem",path:"packages/engine/src/brick-menu-item.tsx#BrickMenuItem"})}catch(__react_docgen_typescript_loader_error){}var brick_menu=props=>{var _props$getContainer;const items=Object(react.useMemo)(()=>props.bricks.map(item=>react_default.a.createElement(BrickMenuItem,{key:item.name,brick:item})),[props.bricks]);return props.getContainer?null!==(_props$getContainer=props.getContainer)&&void 0!==_props$getContainer&&_props$getContainer.current?react_dom_default.a.createPortal(items,props.getContainer.current):null:react_default.a.createElement("div",{style:{display:"flex",margin:10}},items)};try{brickmenu.displayName="brickmenu",brickmenu.__docgenInfo={description:"",displayName:"brickmenu",props:{bricks:{defaultValue:null,description:"",name:"bricks",required:!0,type:{name:"Brick[]"}},getContainer:{defaultValue:null,description:"",name:"getContainer",required:!1,type:{name:"RefObject<HTMLElement>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/engine/src/brick-menu.tsx#brickmenu"]={docgenInfo:brickmenu.__docgenInfo,name:"brickmenu",path:"packages/engine/src/brick-menu.tsx#brickmenu"})}catch(__react_docgen_typescript_loader_error){}const configuration_panel_useStyles=Object(react_jss_esm.createUseStyles)({content:{}},{name:"ConfigurationPanel"});var configuration_panel=Object(react.forwardRef)((_,ref)=>{const duration=Object(react_jss_esm.useTheme)().transitions.duration.short,classes=configuration_panel_useStyles(),context=Object(react.useContext)(src_context),visible=Object(react.useMemo)(()=>null!==context.selectedInstance,[context.selectedInstance]),handleHideConfigPanel=Object(react.useCallback)(()=>{context.transactionRollback(),context.selectInstance(null)},[]),closeBtnProps=Object(react.useMemo)(()=>null==context.selectedInstance?{testID:"close-btn"}:{testID:context.selectedInstance+"-close-btn"},[context.selectedInstance]);return react_default.a.createElement(lib.Modal,{transitionDuration:duration,containerRef:context.configurationFormContainerRef,visible:visible,onClose:handleHideConfigPanel,maskClosable:!0,closeBtnProps:closeBtnProps},react_default.a.createElement("div",{className:classes.content,ref:ref}))});try{configurationpanel.displayName="configurationpanel",configurationpanel.__docgenInfo={description:"",displayName:"configurationpanel",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/engine/src/configuration-panel.tsx#configurationpanel"]={docgenInfo:configurationpanel.__docgenInfo,name:"configurationpanel",path:"packages/engine/src/configuration-panel.tsx#configurationpanel"})}catch(__react_docgen_typescript_loader_error){}var merge=__webpack_require__(354),merge_default=__webpack_require__.n(merge);function engine_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}const ee=new eventemitter3_default.a,generateId=Object(react_jss_esm.createGenerateId)();class engine_Engine extends react_default.a.Component{static registerBrick(brick){engine_Engine.bricks[brick.name]=brick}static registerDataType(dataType){engine_Engine.dataTypes[dataType.type]=dataType}static registerFormItem(type,formItem){const dataType=engine_Engine.dataTypes[type];if(!dataType)throw Error(`data type (${type}) not found`);dataType.formItem=formItem}constructor(props){super(props),engine_defineProperty(this,"state",{blueprint:null,selectedInstance:null}),engine_defineProperty(this,"options",{delimiters:["{{","}}"],identifiers:{forItem:"item",forIndex:"index",idPrefix:"$"}}),engine_defineProperty(this,"_isInTransaction",!1),engine_defineProperty(this,"_stagingBlueprint",null),engine_defineProperty(this,"_backwardDiffs",[]),engine_defineProperty(this,"_forwardDiffs",[]),engine_defineProperty(this,"_isUndoRedo",!1),engine_defineProperty(this,"_registerBrick",brick=>{engine_Engine.bricks[brick.name]=brick,this.forceUpdate()}),engine_defineProperty(this,"_configurationPanelRef",Object(react.createRef)()),engine_defineProperty(this,"_overlayRef",Object(react.createRef)()),engine_defineProperty(this,"_renderConfigurationForm",void 0),engine_defineProperty(this,"_handleSetBlueprint",fn=>{null==this._stagingBlueprint&&(this._stagingBlueprint=this.state.blueprint),this._stagingBlueprint=fn(this._stagingBlueprint),this._isInTransaction||this._commitBlueprint()}),engine_defineProperty(this,"_transactionBegin",()=>{this._commitBlueprint(),this._isInTransaction=!0}),engine_defineProperty(this,"_transactionCommit",()=>{this._isInTransaction=!1,this._commitBlueprint()}),engine_defineProperty(this,"_transactionRollback",()=>{this._stagingBlueprint=null}),engine_defineProperty(this,"_commitBlueprint",()=>{if(!this._stagingBlueprint)return;const stagingBlueprint=this._stagingBlueprint;this.setState(state=>({...state,blueprint:{...stagingBlueprint}}),()=>{this._forwardDiffs=[],this._stagingBlueprint=null})}),engine_defineProperty(this,"_handleKeyPress",event=>!event.ctrlKey||"z"!==event.key.toLowerCase()||(this._undeOrRedo(event.shiftKey),!1)),engine_defineProperty(this,"_selectInstance",key=>{this.setState({selectedInstance:key})}),this.state={...this.state,blueprint:props.blueprint},props.options&&(this.options=merge_default()(this.options,props.options)),props.configurationPanelRef&&(this._configurationPanelRef=props.configurationPanelRef),this._renderConfigurationForm=props.renderConfigurationForm||render_configuration_form}get _dndBackend(){return this.props.dndBackend?this.props.dndBackend:esm.a}componentDidMount(){document.onkeydown=this._handleKeyPress}componentWillUnmount(){document.onkeydown=null}componentDidUpdate(_,prevState){if(this.props.autoCommitMode&&this._transactionCommit(),this._isUndoRedo)return;const diff=deep_diff_default.a.diff(prevState.blueprint,this.state.blueprint);diff&&(this.props.debug&&console.log(diff),this._backwardDiffs.push(diff))}getBlueprint(){return this.state.blueprint}undo(){this._undeOrRedo()}redo(){this._undeOrRedo(!0)}_undeOrRedo(redo=!1){this._isUndoRedo=!0;let diffsStackA=this._backwardDiffs,diffsStackB=this._forwardDiffs;redo&&(diffsStackA=this._forwardDiffs,diffsStackB=this._backwardDiffs);const diffs=diffsStackA.pop();diffs&&diffsStackB.push(diffs);const blueprint=cloneDeep_default()(this.state.blueprint);null==diffs||diffs.forEach(diff=>{redo?deep_diff_default.a.applyChange(blueprint,blueprint,diff):deep_diff_default.a.revertChange(blueprint,blueprint,diff)}),this.setState(state=>({...state,blueprint:blueprint}),()=>{this._isUndoRedo=!1})}render(){var _this$props$generateJ;return this.props.autoCommitMode||(this._isInTransaction=!0),react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(react_jss_esm.JssProvider,{generateId:null!==(_this$props$generateJ=this.props.generateJssID)&&void 0!==_this$props$generateJ?_this$props$generateJ:generateId},react_default.a.createElement(react_jss_esm.ThemeProvider,{theme:merge_default()(shared_lib.theme.defaultTheme,this.props.theme)},react_default.a.createElement(src_context.Provider,{value:{options:this.options,renderConfigurationForm:this._renderConfigurationForm,configurationFormContainerRef:Object(react.createRef)(),bricks:engine_Engine.bricks,dataTypes:engine_Engine.dataTypes,ee:ee,previewMode:!!this.props.previewMode,transactionBegin:this._transactionBegin,transactionCommit:this._transactionCommit,transactionRollback:this._transactionRollback,autoCommit:!!this.props.autoCommitMode,registerBrick:this._registerBrick,selectInstance:this._selectInstance,selectedInstance:this.state.selectedInstance,configurationPanelRef:this._configurationPanelRef,configurationPanelContentUseTransition:!!this.props.configurationPanelContentUseTransition,overlayRef:this._overlayRef,moveOnDropOnly:!!this.props.moveOnDropOnly}},react_default.a.createElement(DndProvider.a,{backend:this._dndBackend,key:"dnd-provider"},react_default.a.createElement(brick_menu,{getContainer:this.props.menuBarRef,bricks:Object.values(engine_Engine.bricks)}),react_default.a.createElement("div",{style:{position:"fixed",top:0,left:0},ref:this._overlayRef}),!this.props.configurationPanelRef&&react_default.a.createElement(configuration_panel,{ref:this._configurationPanelRef}),this.state.blueprint&&react_default.a.createElement(error_boundary,{key:this.state.blueprint._key},react_default.a.createElement(brick_renderer,{isRoot:!0,context:{data:{$parent:{}},actions:{$parent:{}}},blueprint:this.state.blueprint,setBlueprint:this._handleSetBlueprint})))))))}}engine_defineProperty(engine_Engine,"bricks",{}),engine_defineProperty(engine_Engine,"dataTypes",{});try{engine_Engine.displayName="Engine",engine_Engine.__docgenInfo={description:"Engine render bricks according to the blueprint.",displayName:"Engine",props:{blueprint:{defaultValue:null,description:"Configuration for engine",name:"blueprint",required:!0,type:{name:"Blueprint | null"}},renderConfigurationForm:{defaultValue:null,description:"Render configuration form of brick",name:"renderConfigurationForm",required:!1,type:{name:"RenderConfigurationForm"}},previewMode:{defaultValue:null,description:"",name:"previewMode",required:!1,type:{name:"boolean"}},autoCommitMode:{defaultValue:null,description:"",name:"autoCommitMode",required:!1,type:{name:"boolean"}},dndBackend:{defaultValue:null,description:"",name:"dndBackend",required:!1,type:{name:"BackendFactory"}},menuBarRef:{defaultValue:null,description:"",name:"menuBarRef",required:!1,type:{name:"RefObject<HTMLElement>"}},configurationPanelRef:{defaultValue:null,description:"",name:"configurationPanelRef",required:!1,type:{name:"RefObject<HTMLElement>"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"DeepPartial<{ mixins: {}; overrides: {}; palette: { common: { black: string; white: string; }; type: string; primary: { main: string; light: string; dark: string; contrastText: string; }; secondary: { main: string; light: string; dark: string; contrastText: string; }; ... 11 more ...; action: { ...; }; }; ... 6 more..."}},generateJssID:{defaultValue:null,description:"",name:"generateJssID",required:!1,type:{name:"GenerateId"}},options:{defaultValue:null,description:"",name:"options",required:!1,type:{name:"DeepPartial<EngineOptions>"}},moveOnDropOnly:{defaultValue:null,description:"",name:"moveOnDropOnly",required:!1,type:{name:"boolean"}},debug:{defaultValue:null,description:"",name:"debug",required:!1,type:{name:"boolean"}},configurationPanelContentUseTransition:{defaultValue:null,description:"",name:"configurationPanelContentUseTransition",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/engine/src/engine.tsx#Engine"]={docgenInfo:engine_Engine.__docgenInfo,name:"Engine",path:"packages/engine/src/engine.tsx#Engine"})}catch(__react_docgen_typescript_loader_error){}var isPlainObject=__webpack_require__(85),isPlainObject_default=__webpack_require__.n(isPlainObject);const StringType={type:"string",default:"",formItem:placeholder=>react_default.a.createElement("input",{type:"text",className:"formitem-input",placeholder:placeholder}),isValid:value=>"string"==typeof value},NumberType={type:"number",default:0,formItem:placeholder=>react_default.a.createElement("input",{type:"text",className:"formitem-input",placeholder:placeholder}),isValid:value=>"number"==typeof value&&value==value},BooleanType={type:"boolean",default:!1,formItem:()=>react_default.a.createElement(lib.Switch,null),isValid:value=>"boolean"==typeof value},ObjectType={type:"object",default:{},formItem:()=>react_default.a.createElement(lib.ObjectKeyValueInput,{className:"formitem-textarea"}),isValid:value=>isPlainObject_default()(value)},CodeType={type:"code",default:"",formItem:()=>react_default.a.createElement("textarea",{className:"formitem-textarea",wrap:"hard"}),isValid:value=>"string"==typeof value},ColorType={type:"color",default:"",formItem:()=>react_default.a.createElement("input",{className:"formitem-input",type:"color"}),isValid:value=>"string"==typeof value},View={name:"View",dataTypes:{others:{type:"object",default:{},canUseExpression:!0},name:"string",style:"object",styleOverride:"object",if:{type:"boolean",default:!0,canUseExpression:!0},for:{type:"string",default:"",canUseExpression:!0}},childrenType:ChildrenType.MULTIPLE,render(){const style=Object(react.useMemo)(()=>({...this.data.style,...this.editing?this.data.styleOverride:{}}),[this.data,this.editing]);return react_default.a.createElement("div",{style:style},this.children)},renderMenu:()=>react_default.a.createElement("div",null,"View"),configurationForms:["id","actions","handlers","supply.data","supply.actions","render","data.wrapperStyle"],version:"0.0.1"},Text={name:"Text",style:BrickStyle.INLINE,dataTypes:{content:"string",style:"object",styleOverride:"object",for:{type:"string",default:"",canUseExpression:!0}},childrenType:ChildrenType.NONE,render(){const style=Object(react.useMemo)(()=>({...this.data.style,...this.editing?this.data.styleOverride:{}}),[this.data,this.editing]);return react_default.a.createElement("span",{style:style},this.data.content)},renderMenu:()=>react_default.a.createElement("div",null,"Text"),configurationForms:["render"],version:"0.0.1"},Image={name:"Image",style:BrickStyle.INLINE,dataTypes:{src:"string",style:"object",styleOverride:"object",if:{type:"boolean",default:!0,canUseExpression:!0}},childrenType:ChildrenType.NONE,render(){const style=Object(react.useMemo)(()=>({...this.data.style,...this.editing?this.data.styleOverride:{}}),[this.data,this.editing]);return react_default.a.createElement("img",{style:style,src:this.data.src})},renderMenu:()=>react_default.a.createElement("div",null,"Image"),version:"0.0.1"},Input={name:"Input",style:BrickStyle.INLINE,dataTypes:{style:"object",styleOverride:"object"},childrenType:ChildrenType.NONE,eventNames:["onChange","onKeyPress"],render(){const style=Object(react.useMemo)(()=>({...this.data.style,...this.editing?this.data.styleOverride:{}}),[this.data,this.editing]);return react_default.a.createElement("input",{style:style,onChange:this.handlers.onChange,onKeyPress:this.handlers.onKeyPress})},renderMenu:()=>react_default.a.createElement("div",null,"Input"),version:"0.0.1"},Button={name:"Button",style:BrickStyle.INLINE,dataTypes:{style:"object",styleOverride:"object"},childrenType:ChildrenType.NONE,eventNames:["onClick"],render(){const style=Object(react.useMemo)(()=>({...this.data.style,...this.editing?this.data.styleOverride:{}}),[this.data,this.editing]);return react_default.a.createElement("button",{style:style,onClick:()=>console.log("xxxxx")},"button")},renderMenu:()=>react_default.a.createElement("div",null,"Button"),version:"0.0.1"},TextWithAction={name:"TextWithAction",style:BrickStyle.INLINE,dataTypes:{content:"string",style:"object",styleOverride:"object"},childrenType:ChildrenType.NONE,eventNames:["onClick"],defaultHandlers:{onClick:"function () {\n      this.setData(function(data) {\n        return Object.assign({}, data, {\n          content: 'foo',\n        })\n      })\n    }"},render(){const style=Object(react.useMemo)(()=>({...this.data.style,...this.editing?this.data.styleOverride:{}}),[this.data,this.editing]);return react_default.a.createElement("span",{style:style,"data-testid":"element-with-action",onClick:this.handlers.onClick},this.data.content)},renderMenu:()=>react_default.a.createElement("div",null,"TextWithAction"),version:"0.0.1"},TitleBlock={name:"TitleBlock",style:BrickStyle.BLOCK,dataTypes:{title:{type:"string",label:"标题",default:"今年最佳毕设"},tags:{type:"string",label:"标签（空格分隔）",default:"最实验 最未来 最有爱 最跨界"},color:{type:"color",label:"颜色",default:"#00fff0"},code:{type:"number",label:"号码",default:10}},childrenType:ChildrenType.NONE,render(){return react_default.a.createElement("section",{style:{fontFamily:"sans-serif",padding:"20px 56px 20px 16px"}},react_default.a.createElement("section",{style:{height:"0px",transform:"translate(36px, 16px)"}},react_default.a.createElement("section",{style:{width:"72px",height:"72px",backgroundColor:this.data.color,borderRadius:"100%",marginLeft:"auto"}})),react_default.a.createElement("p",{style:{fontSize:"38px",fontWeight:"bold",margin:"0px 0px 5px",borderTop:"1.5px solid black",borderBottom:"1.5px solid black",transform:"translateY(0px)"}},this.data.title),react_default.a.createElement("section",{style:{display:"flex",lineHeight:"20px",transform:"translateY(0px)"}},react_default.a.createElement("section",{style:{fontSize:"10px",flexGrow:1}},this.data.tags.split(" ").map(tag=>react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement("p",{style:{display:"inline-block",margin:"0px",color:this.data.color}},"⬤"),react_default.a.createElement("p",{style:{display:"inline-block",margin:"0px",color:"black",padding:"0px 4px"}},tag)))),react_default.a.createElement("input",{type:"text"}),react_default.a.createElement("button",{onClick:()=>console.log("yyyyy")},"xxxx"),react_default.a.createElement("div",{onClick:()=>console.log("yyyyy")},"div"),react_default.a.createElement("p",{style:{fontWeight:"bold",fontSize:"12px",margin:"0px",fontFamily:"Arial"}},"vol.",this.data.code)))},renderMenu:()=>react_default.a.createElement("div",null,"TitleBlock"),version:"0.0.1"};__webpack_require__(1161),__webpack_require__(1163),__webpack_require__(1165);function engine_stories_extends(){return(engine_stories_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}__webpack_exports__.default={title:"Example/Engine",component:engine_Engine,argTypes:{}};const generateID=(rule,sheet)=>{var _sheet$options$classN;return`${null!==(_sheet$options$classN=null==sheet?void 0:sheet.options.classNamePrefix)&&void 0!==_sheet$options$classN?_sheet$options$classN:""}${rule.key}`},Template=args=>{engine_Engine.registerBrick(View),engine_Engine.registerBrick(Text),engine_Engine.registerBrick(Image),engine_Engine.registerBrick(Input),engine_Engine.registerBrick(Button),engine_Engine.registerBrick(TextWithAction),engine_Engine.registerBrick(TitleBlock),engine_Engine.registerDataType(StringType),engine_Engine.registerDataType(NumberType),engine_Engine.registerDataType(BooleanType),engine_Engine.registerDataType(ObjectType),engine_Engine.registerDataType(CodeType),engine_Engine.registerDataType(ColorType),engine_Engine.registerFormItem("code",()=>react_default.a.createElement(lib.Editor,{style:{width:"100%",height:200}}));const ref=Object(react.useRef)(null),handleUndo=Object(react.useCallback)(()=>{var _ref$current;null===(_ref$current=ref.current)||void 0===_ref$current||_ref$current.undo()},[]),handleRedo=Object(react.useCallback)(()=>{var _ref$current2;null===(_ref$current2=ref.current)||void 0===_ref$current2||_ref$current2.redo()},[]),handleGetBlueprint=Object(react.useCallback)(()=>{var _ref$current3;console.log(JSON.stringify(null===(_ref$current3=ref.current)||void 0===_ref$current3?void 0:_ref$current3.getBlueprint(),null,2))},[]),menuBarRef=Object(react.useRef)(null),configurationPanelRef=Object(react.useRef)(null),configurationPanelContentRef=Object(react.useRef)(null);return react_default.a.createElement("div",{key:JSON.stringify(args.blueprint)},react_default.a.createElement("button",{onClick:handleUndo},"undo"),react_default.a.createElement("button",{onClick:handleRedo},"redo"),react_default.a.createElement("button",{onClick:handleGetBlueprint},"blueprint"),react_default.a.createElement("div",{ref:menuBarRef}),react_default.a.createElement("div",{style:{display:"flex"}},react_default.a.createElement("div",{style:{flex:1}},react_default.a.createElement(engine_Engine,engine_stories_extends({debug:!0,generateJssID:generateID,ref:ref,menuBarRef:menuBarRef,configurationPanelRef:configurationPanelContentRef},args))),react_default.a.createElement("div",{style:{width:400},ref:configurationPanelRef},react_default.a.createElement("div",{style:{position:"relative"},ref:configurationPanelContentRef}))))},Default=Template.bind({});Default.args={configurationPanelContentUseTransition:!0,blueprint:{name:"Text",_key:"001",data:{content:"hello world"},version:"0.0.1"}};const WithHandler=Template.bind({});WithHandler.args={configurationPanelContentUseTransition:!1,blueprint:item_root_config};const WebPage=Template.bind({});WebPage.args={configurationPanelContentUseTransition:!0,blueprint:github_style_page_config};const Todos=Template.bind({});Todos.args={configurationPanelContentUseTransition:!0,blueprint:todos_config},Default.parameters={storySource:{source:"(args) => {\n  registerBricks()\n  const ref = useRef<Engine>(null)\n  const handleUndo = useCallback(() => {\n    ref.current?.undo()\n  }, [])\n  const handleRedo = useCallback(() => {\n    ref.current?.redo()\n  }, [])\n  const handleGetBlueprint = useCallback(() => {\n    console.log(JSON.stringify(ref.current?.getBlueprint(), null, 2))\n  }, [])\n  const menuBarRef = useRef<HTMLDivElement>(null)\n  const configurationPanelRef = useRef<HTMLDivElement>(null)\n  const configurationPanelContentRef = useRef<HTMLDivElement>(null)\n  return (\n    <div key={JSON.stringify(args.blueprint)}>\n      <button onClick={handleUndo}>undo</button>\n      <button onClick={handleRedo}>redo</button>\n      <button onClick={handleGetBlueprint}>blueprint</button>\n      <div ref={menuBarRef}></div>\n      <div style={{ display: 'flex' }}>\n        <div style={{ flex: 1 }}>\n          <Engine\n            debug\n            generateJssID={generateID}\n            ref={ref}\n            menuBarRef={menuBarRef}\n            configurationPanelRef={configurationPanelContentRef}\n            {...args}\n          />\n        </div>\n        <div style={{ width: 400 }} ref={configurationPanelRef}>\n          <div style={{ position: 'relative' }} ref={configurationPanelContentRef}></div>\n        </div>\n      </div>\n    </div>\n  )\n}"},...Default.parameters},WithHandler.parameters={storySource:{source:"(args) => {\n  registerBricks()\n  const ref = useRef<Engine>(null)\n  const handleUndo = useCallback(() => {\n    ref.current?.undo()\n  }, [])\n  const handleRedo = useCallback(() => {\n    ref.current?.redo()\n  }, [])\n  const handleGetBlueprint = useCallback(() => {\n    console.log(JSON.stringify(ref.current?.getBlueprint(), null, 2))\n  }, [])\n  const menuBarRef = useRef<HTMLDivElement>(null)\n  const configurationPanelRef = useRef<HTMLDivElement>(null)\n  const configurationPanelContentRef = useRef<HTMLDivElement>(null)\n  return (\n    <div key={JSON.stringify(args.blueprint)}>\n      <button onClick={handleUndo}>undo</button>\n      <button onClick={handleRedo}>redo</button>\n      <button onClick={handleGetBlueprint}>blueprint</button>\n      <div ref={menuBarRef}></div>\n      <div style={{ display: 'flex' }}>\n        <div style={{ flex: 1 }}>\n          <Engine\n            debug\n            generateJssID={generateID}\n            ref={ref}\n            menuBarRef={menuBarRef}\n            configurationPanelRef={configurationPanelContentRef}\n            {...args}\n          />\n        </div>\n        <div style={{ width: 400 }} ref={configurationPanelRef}>\n          <div style={{ position: 'relative' }} ref={configurationPanelContentRef}></div>\n        </div>\n      </div>\n    </div>\n  )\n}"},...WithHandler.parameters},WebPage.parameters={storySource:{source:"(args) => {\n  registerBricks()\n  const ref = useRef<Engine>(null)\n  const handleUndo = useCallback(() => {\n    ref.current?.undo()\n  }, [])\n  const handleRedo = useCallback(() => {\n    ref.current?.redo()\n  }, [])\n  const handleGetBlueprint = useCallback(() => {\n    console.log(JSON.stringify(ref.current?.getBlueprint(), null, 2))\n  }, [])\n  const menuBarRef = useRef<HTMLDivElement>(null)\n  const configurationPanelRef = useRef<HTMLDivElement>(null)\n  const configurationPanelContentRef = useRef<HTMLDivElement>(null)\n  return (\n    <div key={JSON.stringify(args.blueprint)}>\n      <button onClick={handleUndo}>undo</button>\n      <button onClick={handleRedo}>redo</button>\n      <button onClick={handleGetBlueprint}>blueprint</button>\n      <div ref={menuBarRef}></div>\n      <div style={{ display: 'flex' }}>\n        <div style={{ flex: 1 }}>\n          <Engine\n            debug\n            generateJssID={generateID}\n            ref={ref}\n            menuBarRef={menuBarRef}\n            configurationPanelRef={configurationPanelContentRef}\n            {...args}\n          />\n        </div>\n        <div style={{ width: 400 }} ref={configurationPanelRef}>\n          <div style={{ position: 'relative' }} ref={configurationPanelContentRef}></div>\n        </div>\n      </div>\n    </div>\n  )\n}"},...WebPage.parameters},Todos.parameters={storySource:{source:"(args) => {\n  registerBricks()\n  const ref = useRef<Engine>(null)\n  const handleUndo = useCallback(() => {\n    ref.current?.undo()\n  }, [])\n  const handleRedo = useCallback(() => {\n    ref.current?.redo()\n  }, [])\n  const handleGetBlueprint = useCallback(() => {\n    console.log(JSON.stringify(ref.current?.getBlueprint(), null, 2))\n  }, [])\n  const menuBarRef = useRef<HTMLDivElement>(null)\n  const configurationPanelRef = useRef<HTMLDivElement>(null)\n  const configurationPanelContentRef = useRef<HTMLDivElement>(null)\n  return (\n    <div key={JSON.stringify(args.blueprint)}>\n      <button onClick={handleUndo}>undo</button>\n      <button onClick={handleRedo}>redo</button>\n      <button onClick={handleGetBlueprint}>blueprint</button>\n      <div ref={menuBarRef}></div>\n      <div style={{ display: 'flex' }}>\n        <div style={{ flex: 1 }}>\n          <Engine\n            debug\n            generateJssID={generateID}\n            ref={ref}\n            menuBarRef={menuBarRef}\n            configurationPanelRef={configurationPanelContentRef}\n            {...args}\n          />\n        </div>\n        <div style={{ width: 400 }} ref={configurationPanelRef}>\n          <div style={{ position: 'relative' }} ref={configurationPanelContentRef}></div>\n        </div>\n      </div>\n    </div>\n  )\n}"},...Todos.parameters}},1181:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Default",(function(){return Default})),__webpack_require__.d(__webpack_exports__,"OneType",(function(){return OneType}));var react=__webpack_require__(1),react_default=__webpack_require__.n(react),isPlainObject=__webpack_require__(85),isPlainObject_default=__webpack_require__.n(isPlainObject),index_esm=__webpack_require__(66),code_editor=__webpack_require__(187),src_select=__webpack_require__(138),pattern=__webpack_require__(252),src_switch=__webpack_require__(152);const valueInputWrapperStyle={position:"relative",flex:1,marginRight:10},valueInputBtnStyle={position:"absolute",right:8,top:6};let InputType;!function(InputType){InputType.STRING="string",InputType.CODE="code",InputType.BOOLEAN="boolean"}(InputType||(InputType={}));const inputTypeOptions=[{label:"String",value:InputType.STRING},{label:"Code",value:InputType.CODE},{label:"Boolean",value:InputType.BOOLEAN}],valueValidatorMap={[InputType.BOOLEAN]:{defaultValue:!1,validate:value=>"boolean"==typeof value},[InputType.STRING]:{defaultValue:"",validate:value=>"string"==typeof value},[InputType.CODE]:{defaultValue:"function() {}",validate:value=>"string"==typeof value&&pattern.FUNCTION_STR.test(value)}};var object_key_value_input_item=({value:value,index:index,label:label,handleChange:handleChange,handleDeleteItem:handleDeleteItem,...props})=>{const itemValue=Object(react.useMemo)(()=>{var _value$label;return null!==(_value$label=null==value?void 0:value[label])&&void 0!==_value$label?_value$label:""},[value,label]),[inputType,setInputType]=Object(react.useState)(InputType.STRING),enterExpand=Object(react.useCallback)(()=>props.setExpandKey(label),[label]),exitExpand=Object(react.useCallback)(()=>props.setExpandKey(null),[]),isExpand=Object(react.useMemo)(()=>props.expandKey===label,[props.expandKey,label]),typeOptions=Object(react.useMemo)(()=>props.types?inputTypeOptions.filter(item=>{var _props$types;return null===(_props$types=props.types)||void 0===_props$types?void 0:_props$types.includes(item.value)}):inputTypeOptions,[props.types]);return Object(react.useEffect)(()=>{pattern.FUNCTION_STR.test(itemValue)?setInputType(InputType.CODE):"boolean"!=typeof itemValue||setInputType(InputType.BOOLEAN)},[itemValue]),Object(react.useEffect)(()=>{const validator=valueValidatorMap[inputType];!validator.validate(itemValue)&&handleChange&&handleChange({target:{name:index+"-value",value:validator.defaultValue}})},[inputType,itemValue]),react_default.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",margin:"10px 0"},key:index},react_default.a.createElement("input",{placeholder:"key",className:"formitem-input",style:{width:100,height:16,lineHeight:"16px",flex:"unset",marginRight:10},name:index+"-label",type:"text",value:label,onChange:handleChange}),react_default.a.createElement("div",{style:{...valueInputWrapperStyle,visibility:isExpand?"hidden":"visible"}},inputType===InputType.BOOLEAN&&react_default.a.createElement(src_switch.a,{value:!!itemValue,name:index+"-value",onChange:handleChange}),inputType!==InputType.BOOLEAN&&react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement("input",{placeholder:"value",className:"formitem-input",style:{paddingRight:30,lineHeight:"16px",boxSizing:"border-box",width:"100%"},name:index+"-value",type:"text",value:itemValue,onChange:handleChange}),react_default.a.createElement("div",{style:valueInputBtnStyle,onClick:enterExpand,title:"expand"},react_default.a.createElement(index_esm.AiOutlineExpand,null)))),typeOptions.length>1&&react_default.a.createElement(src_select.a,{value:inputType,options:typeOptions,onChange:setInputType,getOverlayContainer:props.getOverlayContainer}),react_default.a.createElement("div",{style:{paddingTop:6,marginLeft:10},"data-testid":"remove-btn-"+index,"data-index":index,onClick:handleDeleteItem,title:"remove item"},react_default.a.createElement(index_esm.AiOutlineMinusCircle,null)),isExpand&&react_default.a.createElement("div",{style:{width:"100%",position:"relative",marginTop:5}},inputType===InputType.CODE&&react_default.a.createElement(code_editor.a,{value:itemValue,name:index+"-value",onChange:handleChange,style:{width:"100%",height:200}}),inputType!==InputType.CODE&&react_default.a.createElement("textarea",{className:"formitem-textarea",style:{width:"100%",height:200,paddingBottom:30,boxSizing:"border-box"},name:index+"-value",value:itemValue,onChange:handleChange}),react_default.a.createElement("div",{title:"reduce",style:{textAlign:"right",position:"absolute",bottom:10,right:10}},react_default.a.createElement(index_esm.AiOutlineCompress,{className:"config-form__item-btn",onClick:exitExpand}))))};try{item.displayName="item",item.__docgenInfo={description:"",displayName:"item",props:{index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},expandKey:{defaultValue:null,description:"",name:"expandKey",required:!0,type:{name:"string | null"}},setExpandKey:{defaultValue:null,description:"",name:"setExpandKey",required:!0,type:{name:"(key: string | null) => void"}},handleChange:{defaultValue:null,description:"",name:"handleChange",required:!0,type:{name:"(event: EventData<unknown>) => void"}},handleDeleteItem:{defaultValue:null,description:"",name:"handleDeleteItem",required:!0,type:{name:"(event: MouseEvent<HTMLElement, MouseEvent>) => void"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"Record<string, string>"}},getOverlayContainer:{defaultValue:null,description:"",name:"getOverlayContainer",required:!1,type:{name:"(() => HTMLElement)"}},types:{defaultValue:null,description:"",name:"types",required:!1,type:{name:"InputType[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/components/src/object-key-value-input/item.tsx#item"]={docgenInfo:item.__docgenInfo,name:"item",path:"packages/components/src/object-key-value-input/item.tsx#item"})}catch(__react_docgen_typescript_loader_error){}const ObjectKeyValueInput=react_default.a.forwardRef((props,ref)=>{const[value,setValue]=Object(react.useState)(props.value),[keys,setKeys]=Object(react.useState)(()=>{const value=props.value||{};return Object.keys(value)}),[expandKey,setExpandKey]=Object(react.useState)(null);Object(react.useEffect)(()=>{isPlainObject_default()(props.value)||triggerChange({})},[props.value]),Object(react.useEffect)(()=>{const newKeys=keys.slice(),valueKeys=Object.keys(props.value||{});newKeys.forEach(key=>{valueKeys.includes(key)&&!newKeys.includes(key)&&newKeys.push(key)}),valueKeys.forEach(key=>{newKeys.includes(key)||newKeys.push(key)}),setKeys(newKeys),setValue(props.value)},[props.value]);const triggerChange=Object(react.useCallback)(obj=>{props.onChange&&props.onChange({target:{name:props.name||"",value:obj}})},[props.name,props.onChange]),instance=Object(react.useMemo)(()=>{const obj={value:{}};return Object.defineProperty(obj,"value",{set(newValue){newValue&&(setValue(newValue),setKeys(Object.keys(newValue)),triggerChange(newValue))}}),obj},[]);Object(react.useImperativeHandle)(ref,()=>instance);const handleChange=Object(react.useCallback)(event=>{const[index,inputType]=event.target.name.split("-"),newValue=keys.reduce((result,key,i)=>{const targetValue=event.target.value;if(index!=i.toString())result[key]=(null==value?void 0:value[key])||"";else if("label"===inputType){const newKeys=keys.slice();newKeys.splice(i,1,String(targetValue)),setKeys(newKeys),result[String(targetValue)]=(null==value?void 0:value[key])||""}else result[key]=targetValue;return result},{});setValue(newValue),triggerChange(newValue)},[keys,value]),isAddBtnDisabled=Object(react.useMemo)(()=>keys.includes(""),[keys]),handleAddItem=Object(react.useCallback)(()=>{if(isAddBtnDisabled)return;const newKeys=keys.slice();newKeys.push(""),setKeys(newKeys)},[keys,isAddBtnDisabled]),handleDeleteItem=Object(react.useCallback)(event=>{const newValue={...value},index=parseInt(event.currentTarget.dataset.index||"0"),newKeys=keys.slice();delete newValue[newKeys.splice(index,1)[0]],setKeys(newKeys),setValue(newValue),triggerChange(newValue)},[keys,value]);return react_default.a.createElement("div",{style:{...props.style,width:"100%"}},keys.map((key,index)=>react_default.a.createElement(object_key_value_input_item,{value:value,expandKey:expandKey,setExpandKey:setExpandKey,index:index,key:index,label:key,types:props.types,handleChange:handleChange,handleDeleteItem:handleDeleteItem,getOverlayContainer:props.getOverlayContainer})),!isAddBtnDisabled&&react_default.a.createElement("div",{style:{display:"inline-block"},"data-testid":"add-item",title:"add item",onClick:handleAddItem},react_default.a.createElement(index_esm.AiOutlinePlusCircle,null)))});try{ObjectKeyValueInput.displayName="ObjectKeyValueInput",ObjectKeyValueInput.__docgenInfo={description:"",displayName:"ObjectKeyValueInput",props:{types:{defaultValue:null,description:"",name:"types",required:!1,type:{name:"InputType[]"}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"Record<string, string>"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((data: EventData<unknown>) => void)"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},getOverlayContainer:{defaultValue:null,description:"",name:"getOverlayContainer",required:!1,type:{name:"(() => HTMLElement)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/components/src/object-key-value-input/index.tsx#ObjectKeyValueInput"]={docgenInfo:ObjectKeyValueInput.__docgenInfo,name:"ObjectKeyValueInput",path:"packages/components/src/object-key-value-input/index.tsx#ObjectKeyValueInput"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__(515),__webpack_require__(1153);window.__BRICK_INSTANCE_TYPES__="";__webpack_exports__.default={title:"Components/ObjectKeyValueInput",component:ObjectKeyValueInput,argTypes:{}};const Template=args=>react_default.a.createElement("div",{className:"container"},react_default.a.createElement(ObjectKeyValueInput,args)),Default=Template.bind({});Default.args={value:{foo:"bar",onClick:"function(instance, name) {\n            instance.setData(function(data) {\n    console.log('000001', data);\n          return Object.assign({}, data, {\n                name: name,\n              })\n            }, {\n              setToBlueprint: true,\n            })\n          }"}};const OneType=Template.bind({});OneType.args={value:{onChange:"() => {}",onClick:"function(instance, name) {\n            instance.setData(function(data) {\n    console.log('000001', data);\n          return Object.assign({}, data, {\n                name: name,\n              })\n            }, {\n              setToBlueprint: true,\n            })\n          }"},types:[InputType.CODE]},Default.parameters={storySource:{source:'(args) => (\n  <div className="container">\n    <ObjectKeyValueInput {...args} />\n  </div>\n)'},...Default.parameters},OneType.parameters={storySource:{source:'(args) => (\n  <div className="container">\n    <ObjectKeyValueInput {...args} />\n  </div>\n)'},...OneType.parameters}},1182:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"OptionsChildren",(function(){return OptionsChildren}));var react=__webpack_require__(1),react_default=__webpack_require__.n(react),react_dom=__webpack_require__(42),react_dom_default=__webpack_require__.n(react_dom),CSSTransition=__webpack_require__(352),react_jss_esm=__webpack_require__(33);const useStyles=Object(react_jss_esm.createUseStyles)(theme=>({delimiter:{fontFamily:"monospace",fontSize:theme.typography.fontSize,color:theme.palette.grey[500]}}));const parseValue=value=>{var _value$replace;return"string"==typeof value&&null!==(_value$replace=null==value?void 0:value.replace(/^\{\{\s*|\s*\}\}$/g,""))&&void 0!==_value$replace?_value$replace:""},ExpressionInput=react_default.a.forwardRef((props,ref)=>{const classes=useStyles(),[showOptions,setShowOptions]=Object(react.useState)(!1),[optionMenuId]=Object(react.useState)(Math.random().toString(36).slice(2)),[value,setValue]=Object(react.useState)(parseValue(props.value)),wrapper=react_default.a.useRef(null),container=Object(react.useMemo)(()=>props.getOverlayContainer?props.getOverlayContainer():document.body,[props.getOverlayContainer]),handleClickOutside=Object(react.useCallback)(event=>{wrapper.current&&(wrapper.current===event.target||wrapper.current.contains(event.target)||setShowOptions(!1))},[wrapper.current]);Object(react.useEffect)(()=>{setValue(parseValue(props.value))},[props.value]),Object(react.useEffect)(()=>(window.addEventListener("click",handleClickOutside,!0),()=>{window.removeEventListener("click",handleClickOutside,!0)}),[]),Object(react.useEffect)(()=>()=>{var _container$getElement;if(!container)return;const element=null===(_container$getElement=container.getElementsByClassName("option-container-"+optionMenuId))||void 0===_container$getElement?void 0:_container$getElement[0];element&&container.removeChild(element)},[container]);const overlayContainer=Object(react.useMemo)(()=>{var _container$getElement2;if(!container)return null;let element=null===(_container$getElement2=container.getElementsByClassName("option-container-"+optionMenuId))||void 0===_container$getElement2?void 0:_container$getElement2[0];return element||(element=document.createElement("div"),element.className="option-container",container.appendChild(element)),element},[container]),triggerChange=Object(react.useCallback)(value=>{var _props$name;setValue(value),props.onChange&&props.onChange({target:{name:null!==(_props$name=props.name)&&void 0!==_props$name?_props$name:"",value:"{{"+value+"}}"}})},[]),handleChange=Object(react.useCallback)(event=>{triggerChange(event.target.value)},[]),instance=Object(react.useMemo)(()=>{const obj={value:""};return Object.defineProperty(obj,"value",{set(newValue){newValue&&(newValue=parseValue(newValue),setValue(newValue),triggerChange(newValue))}}),obj},[]);Object(react.useImperativeHandle)(ref,()=>instance);const overlay=Object(react.useMemo)(()=>{var _wrapper$current;if(!overlayContainer)return null;const rect=(null===(_wrapper$current=wrapper.current)||void 0===_wrapper$current?void 0:_wrapper$current.getBoundingClientRect())||{width:0,height:0},offset=function offsetFromContainer(node,container){if(!node||!node.offsetParent)return{x:0,y:0};const offsetOfNode={x:node.offsetLeft,y:node.offsetTop};if(node.offsetParent===document.body||node.offsetParent===container)return offsetOfNode;const offsetOfParent=offsetFromContainer(node.offsetParent,container);return{x:offsetOfNode.x+offsetOfParent.x,y:offsetOfNode.y+offsetOfParent.y}}(wrapper.current,container),style={top:offset.y+rect.height+10,left:offset.x};return react_dom_default.a.createPortal(react_default.a.createElement(CSSTransition.a,{in:showOptions,timeout:200,unmountOnExit:!0,classNames:"fade-down"},react_default.a.createElement("div",{className:"select__overlay",style:style},props.options&&props.options.map(option=>react_default.a.createElement("span",{key:option.label,className:"select-option",onClick:()=>triggerChange(option.value)},option.label)))),overlayContainer)},[showOptions,container,props.options]);return react_default.a.createElement("span",{ref:wrapper,style:props.style},react_default.a.createElement("span",{className:classes.delimiter},"{{  "),react_default.a.createElement("input",{type:"text",value:value,onChange:handleChange}),react_default.a.createElement("span",{className:classes.delimiter},"  }}"),overlay)});try{ExpressionInput.displayName="ExpressionInput",ExpressionInput.__docgenInfo={description:"",displayName:"ExpressionInput",props:{value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},options:{defaultValue:null,description:"",name:"options",required:!1,type:{name:"IOption[]"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((value: EventData<string>) => void)"}},getOverlayContainer:{defaultValue:null,description:"",name:"getOverlayContainer",required:!1,type:{name:"(() => HTMLElement)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/components/src/expression-input/index.tsx#ExpressionInput"]={docgenInfo:ExpressionInput.__docgenInfo,name:"ExpressionInput",path:"packages/components/src/expression-input/index.tsx#ExpressionInput"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__(1149),__webpack_exports__.default={title:"Components/ExpressionInput",component:ExpressionInput,argTypes:{}};const OptionsChildren=(args=>react_default.a.createElement("div",{className:"container"},react_default.a.createElement(ExpressionInput,args))).bind({});OptionsChildren.args={value:"hello"},OptionsChildren.parameters={storySource:{source:'(args) => {\n  return (\n    <div className="container">\n      <ExpressionInput {...args} />\n    </div>\n  )\n}'},...OptionsChildren.parameters}},1183:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Default",(function(){return Default}));var react=__webpack_require__(1),react_default=__webpack_require__.n(react),react_jss_esm=__webpack_require__(33),classnames=__webpack_require__(86),classnames_default=__webpack_require__.n(classnames),Transition=__webpack_require__(30),index_esm=__webpack_require__(66);let mousePosition=null;const getClickPosition=e=>{mousePosition={x:e.pageX,y:e.pageY},setTimeout(()=>{mousePosition=null},100)};"undefined"!=typeof window&&window.document&&window.document.createElement&&document.documentElement.addEventListener("click",getClickPosition,!0);const useStyles=Object(react_jss_esm.createUseStyles)(theme=>({mask:{position:"fixed",top:0,bottom:0,left:0,right:0,backgroundColor:theme.palette.mask.main,zIndex:theme.zIndex.modal,opacity:0,transition:({duration:duration})=>`all ${duration}ms ease-in-out`},maskEntering:{opacity:0},maskEntered:{opacity:1},maskExiting:{opacity:0},maskExited:{opacity:0},modalWrapper:{position:"fixed",top:0,bottom:0,left:0,right:0,zIndex:theme.zIndex.modal,transform:"scale(0.1)",opacity:0,transition:({duration:duration})=>`all ${duration}ms ease-in-out`,overflowY:"auto"},modalWrapperEntering:{transform:"scale(0.1)",opacity:0},modalWrapperEntered:{transform:"scale(1)",opacity:1},modalWrapperExiting:{transform:"scale(0.1)",opacity:0},modalWrapperExited:{transform:"scale(0.1)",opacity:0},modal:{margin:4*theme.spacing.Lg+"px auto",width:600,padding:theme.spacing.Lg,borderRadius:theme.shape.borderRadius,backgroundColor:theme.palette.background.default},header:{display:"flex",alignItems:"center",color:theme.palette.text.primary,fontWeight:theme.typography.fontWeightMedium,marginBottom:theme.spacing.Sm},title:{flex:1},closeBtn:{fontSize:20}}),{name:"Modal"}),Modal=props=>{const{visible:visible,children:children,transitionDuration:transitionDuration}=props,theme=Object(react_jss_esm.useTheme)(),duration=null!=transitionDuration?transitionDuration:theme.transitions.duration.short,containerRef=Object(react.useRef)(null),modalRef=Object(react.useRef)(null),classes=useStyles({duration:duration}),pos=Object(react.useRef)();Object(react.useMemo)(()=>{var _mousePosition$y,_mousePosition,_mousePosition$x,_mousePosition2;visible&&containerRef.current&&(pos.current={top:(null!==(_mousePosition$y=null===(_mousePosition=mousePosition)||void 0===_mousePosition?void 0:_mousePosition.y)&&void 0!==_mousePosition$y?_mousePosition$y:0)-containerRef.current.ownerDocument.documentElement.scrollTop,left:(null!==(_mousePosition$x=null===(_mousePosition2=mousePosition)||void 0===_mousePosition2?void 0:_mousePosition2.x)&&void 0!==_mousePosition$x?_mousePosition$x:0)-containerRef.current.ownerDocument.documentElement.scrollLeft})},[visible]),Object(react.useEffect)(()=>{if(visible&&"undefined"!=typeof window){const overflow=window.document.body.style.overflow;return window.document.body.style.overflow="hidden",()=>{window.document.body.style.overflow=overflow}}return()=>null},[visible]);const handleClickModalWrapper=Object(react.useCallback)(event=>{props.maskClosable&&props.onClose&&(modalRef.current&&modalRef.current.contains(event.target)||props.onClose())},[props.maskClosable,props.onClose]);return react_default.a.createElement("div",{ref:containerRef},react_default.a.createElement(Transition.default,{in:visible,timeout:{appear:0,enter:0,exit:duration},unmountOnExit:!0},state=>react_default.a.createElement("div",{className:classnames_default()(classes.mask,{[classes.maskEntering]:state===Transition.ENTERING,[classes.maskEntered]:state===Transition.ENTERED,[classes.maskExiting]:state===Transition.EXITING,[classes.maskExited]:state===Transition.EXITED})})),react_default.a.createElement(Transition.default,{in:visible,timeout:{appear:0,enter:0,exit:duration},unmountOnExit:!0},state=>{var _pos$current$left,_pos$current,_pos$current$top,_pos$current2,_props$closeBtnProps,_props$closeBtnProps2;return react_default.a.createElement("div",{onClick:handleClickModalWrapper,ref:props.containerRef,className:classnames_default()(classes.modalWrapper,{[classes.modalWrapperEntering]:state===Transition.ENTERING,[classes.modalWrapperEntered]:state===Transition.ENTERED,[classes.modalWrapperExiting]:state===Transition.EXITING,[classes.modalWrapperExited]:state===Transition.EXITED}),style:{transformOrigin:`${null!==(_pos$current$left=null===(_pos$current=pos.current)||void 0===_pos$current?void 0:_pos$current.left)&&void 0!==_pos$current$left?_pos$current$left:0}px ${null!==(_pos$current$top=null===(_pos$current2=pos.current)||void 0===_pos$current2?void 0:_pos$current2.top)&&void 0!==_pos$current$top?_pos$current$top:0}px`}},react_default.a.createElement("div",{className:classnames_default()(classes.modal),ref:modalRef},react_default.a.createElement("div",{className:classes.header},react_default.a.createElement("div",{className:classes.title},props.title),react_default.a.createElement("div",{className:classnames_default()(classes.closeBtn,null===(_props$closeBtnProps=props.closeBtnProps)||void 0===_props$closeBtnProps?void 0:_props$closeBtnProps.className),"data-testid":null===(_props$closeBtnProps2=props.closeBtnProps)||void 0===_props$closeBtnProps2?void 0:_props$closeBtnProps2.testID,onClick:props.onClose,title:"close"},react_default.a.createElement(index_esm.AiFillCloseCircle,null))),children))}))};try{Modal.displayName="Modal",Modal.__docgenInfo={description:"",displayName:"Modal",props:{visible:{defaultValue:null,description:"",name:"visible",required:!0,type:{name:"boolean"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!1,type:{name:"(() => void)"}},closeBtnProps:{defaultValue:null,description:"",name:"closeBtnProps",required:!1,type:{name:"ModalCloseBtnProps"}},transitionDuration:{defaultValue:null,description:"",name:"transitionDuration",required:!1,type:{name:"number"}},maskClosable:{defaultValue:null,description:"",name:"maskClosable",required:!1,type:{name:"boolean"}},containerRef:{defaultValue:null,description:"",name:"containerRef",required:!1,type:{name:"RefObject<HTMLElement>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/components/src/modal/index.tsx#Modal"]={docgenInfo:Modal.__docgenInfo,name:"Modal",path:"packages/components/src/modal/index.tsx#Modal"})}catch(__react_docgen_typescript_loader_error){}var lib=__webpack_require__(116);function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}__webpack_exports__.default={title:"Components/Modal",component:Modal,argTypes:{}};const Default=(({visible:_visible,...props})=>{const[visible,setVisible]=Object(react.useState)(!!_visible),handleClick=Object(react.useCallback)(()=>setVisible(!0),[]),handleClose=Object(react.useCallback)(()=>setVisible(!1),[]);return Object(react.useEffect)(()=>setVisible(_visible),[_visible]),react_default.a.createElement(react_jss_esm.JssProvider,null,react_default.a.createElement(react_jss_esm.ThemeProvider,{theme:lib.theme.defaultTheme},react_default.a.createElement("div",{className:"container"},react_default.a.createElement("button",{onClick:handleClick},"click"),react_default.a.createElement(Modal,_extends({title:"Hello World",visible:visible},props,{onClose:handleClose}),react_default.a.createElement("div",null,"hello world")))))}).bind({});Default.args={transitionDuration:300},Default.parameters={storySource:{source:'({ visible: _visible, ...props }) => {\n  const [visible, setVisible] = useState(!!_visible)\n  const handleClick = useCallback(() => setVisible(true), [])\n  const handleClose = useCallback(() => setVisible(false), [])\n  useEffect(() => setVisible(_visible), [_visible])\n  return (\n    <JssProvider>\n      <ThemeProvider theme={theme.defaultTheme}>\n        <div className="container">\n          <button onClick={handleClick}>click</button>\n          <Modal title="Hello World" visible={visible} {...props} onClose={handleClose}>\n            <div>hello world</div>\n          </Modal>\n        </div>\n      </ThemeProvider>\n    </JssProvider>\n  )\n}'},...Default.parameters}},1184:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Default",(function(){return Default}));var react=__webpack_require__(1),react_default=__webpack_require__.n(react),isPlainObject=__webpack_require__(85),isPlainObject_default=__webpack_require__.n(isPlainObject);const ObjectStringInput=react_default.a.forwardRef((props,ref)=>{const[valueStr,setValueStr]=Object(react.useState)(JSON.stringify(props.value)),triggerChange=Object(react.useCallback)(obj=>{props.onChange&&props.onChange({target:{name:props.name||"",value:obj}})},[props.name,props.onChange]),instance=Object(react.useMemo)(()=>{const obj={value:""};return Object.defineProperty(obj,"value",{set(newValue){newValue&&setValueStr(JSON.stringify(newValue))}}),obj},[]);Object(react.useImperativeHandle)(ref,()=>instance),Object(react.useEffect)(()=>{isPlainObject_default()(props.value)||void 0===props.value?setValueStr(JSON.stringify(props.value||{})):(setValueStr("{}"),triggerChange({}))},[props.value,triggerChange]);const handleChange=Object(react.useCallback)(event=>{const value=event.target.value||"";setValueStr(value);try{const obj=JSON.parse(value);triggerChange(obj)}catch(err){window.__DEV__&&console.error(err)}},[triggerChange]);return react_default.a.createElement("textarea",{className:props.className,style:props.style,name:props.name,value:valueStr,onChange:handleChange})});try{ObjectStringInput.displayName="ObjectStringInput",ObjectStringInput.__docgenInfo={description:"",displayName:"ObjectStringInput",props:{name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"Record<string, string>"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((data: EventData<unknown>) => void)"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},getOverlayContainer:{defaultValue:null,description:"",name:"getOverlayContainer",required:!1,type:{name:"(() => HTMLElement)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/components/src/object-string-input/index.tsx#ObjectStringInput"]={docgenInfo:ObjectStringInput.__docgenInfo,name:"ObjectStringInput",path:"packages/components/src/object-string-input/index.tsx#ObjectStringInput"})}catch(__react_docgen_typescript_loader_error){}__webpack_exports__.default={title:"Components/ObjectStringInput",component:ObjectStringInput,argTypes:{}};const Default=(args=>react_default.a.createElement(ObjectStringInput,args)).bind({});Default.args={value:{foo:"bar"}},Default.parameters={storySource:{source:"(args) => <ObjectStringInput {...args} />"},...Default.parameters}},1185:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Default",(function(){return Default})),__webpack_require__.d(__webpack_exports__,"BlockChild",(function(){return BlockChild}));var react=__webpack_require__(1),react_default=__webpack_require__.n(react),react_dom=__webpack_require__(42),react_dom_default=__webpack_require__.n(react_dom),Transition=__webpack_require__(30),react_jss_esm=__webpack_require__(33),debounce=__webpack_require__(136),debounce_default=__webpack_require__.n(debounce),classnames=__webpack_require__(86),classnames_default=__webpack_require__.n(classnames);const useStyles=Object(react_jss_esm.createUseStyles)(theme=>({tooltip:{position:"absolute",borderRadius:"5px",maxWidth:"300px",padding:"10px",background:"rgba(0, 0, 0, 0.8)",color:"#fff",transformOrigin:"-5px 15px",zIndex:9999,transition:`all ${theme.transitions.duration.shortest}ms`,"&::before":{content:'""',position:"absolute",left:"-10px",top:"10px",borderStyle:"solid",borderWidth:5,borderColor:"transparent",borderRightColor:"rgba(0, 0, 0, 0.8)"}},tooltipEntering:{opacity:0,transform:"scale(0.4) translateX(-20px)"},tooltipEntered:{opacity:1,transform:"scale(1) translateX(0)"},tooltipExiting:{opacity:0,transform:"scale(0.4) translateX(-20px)"},tooltipExited:{opacity:0,transform:"scale(0.4) translateX(-20px)"}}),{name:"Tooltip"});const Tooltip=props=>{const classes=useStyles(),[isHover,setIsHover]=Object(react.useState)(!1),ref=react_default.a.useRef(null),handleHoverChange=Object(react.useCallback)(debounce_default()(hover=>setIsHover(hover),200),[]),handleMouseEnter=Object(react.useCallback)(()=>{handleHoverChange(!0)},[]),handleMouseLeave=Object(react.useCallback)(()=>{handleHoverChange(!1)},[]),container=Object(react.useMemo)(()=>props.getOverlayContainer?props.getOverlayContainer():document.body,[isHover]),tooltip=Object(react.useMemo)(()=>{var _container$getElement;if(!container)return null;let element=null===(_container$getElement=container.getElementsByClassName("tooltip-container"))||void 0===_container$getElement?void 0:_container$getElement[0];return element||(element=document.createElement("div"),element.className="tooltip-container",container.appendChild(element)),element},[container]),overlay=Object(react.useMemo)(()=>{var _ref$current;if(!tooltip)return null;const rect=(null===(_ref$current=ref.current)||void 0===_ref$current?void 0:_ref$current.getBoundingClientRect())||{width:0,height:0},offset=function offsetFromContainer(node,container){if(!node||!node.offsetParent)return{x:0,y:0};const offsetOfNode={x:node.offsetLeft,y:node.offsetTop};if(node.offsetParent===document.body||node.offsetParent===container)return offsetOfNode;const offsetOfParent=offsetFromContainer(node.offsetParent,container);return{x:offsetOfNode.x+offsetOfParent.x,y:offsetOfNode.y+offsetOfParent.y}}(ref.current,container),style={top:offset.y-5-10+rect.height/2,left:offset.x+rect.width+10};return react_dom_default.a.createPortal(react_default.a.createElement(Transition.default,{in:isHover,timeout:200,unmountOnExit:!0},state=>react_default.a.createElement("div",{className:classnames_default()(classes.tooltip,{[classes.tooltipEntering]:state===Transition.ENTERING,[classes.tooltipEntered]:state===Transition.ENTERED,[classes.tooltipExiting]:state===Transition.EXITING,[classes.tooltipExited]:state===Transition.EXITED}),onMouseEnter:handleMouseEnter,onMouseLeave:handleMouseLeave,style:style},props.content)),tooltip)},[isHover,container]),child=react_default.a.Children.only(props.children);return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.cloneElement(child,{ref:ref,onMouseEnter:handleMouseEnter,onMouseLeave:handleMouseLeave}),overlay)};try{Tooltip.displayName="Tooltip",Tooltip.__docgenInfo={description:"",displayName:"Tooltip",props:{content:{defaultValue:null,description:"",name:"content",required:!0,type:{name:"string | ReactElement<any, string | ((props: any) => ReactElement<any, string | ... | (new (props: any) => Component<any, any, any>)> | null) | (new (props: any) => Component<any, any, any>)>"}},getOverlayContainer:{defaultValue:null,description:"",name:"getOverlayContainer",required:!1,type:{name:"(() => HTMLElement)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/components/src/tooltip/index.tsx#Tooltip"]={docgenInfo:Tooltip.__docgenInfo,name:"Tooltip",path:"packages/components/src/tooltip/index.tsx#Tooltip"})}catch(__react_docgen_typescript_loader_error){}var lib=__webpack_require__(116);__webpack_exports__.default={title:"Components/Tooltip",component:Tooltip,argTypes:{}};const Template=args=>react_default.a.createElement(react_jss_esm.JssProvider,null,react_default.a.createElement(react_jss_esm.ThemeProvider,{theme:lib.theme.defaultTheme},react_default.a.createElement(Tooltip,args))),Default=Template.bind({});Default.args={content:"This is tooltip message",children:react_default.a.createElement("span",null,"hello world")};const BlockChild=Template.bind({});BlockChild.args={content:"This is tooltip message",children:react_default.a.createElement("div",{style:{display:"inline-block",width:50}},react_default.a.createElement("div",null,"hello"),react_default.a.createElement("div",null,"world"))},Default.parameters={storySource:{source:"(args) => (\n  <JssProvider>\n    <ThemeProvider theme={theme.defaultTheme}>\n      <Tooltip {...args}></Tooltip>\n    </ThemeProvider>\n  </JssProvider>\n)"},...Default.parameters},BlockChild.parameters={storySource:{source:"(args) => (\n  <JssProvider>\n    <ThemeProvider theme={theme.defaultTheme}>\n      <Tooltip {...args}></Tooltip>\n    </ThemeProvider>\n  </JssProvider>\n)"},...BlockChild.parameters}},138:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Select}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),react_dom__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(42),react_dom__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_1__),react_transition_group__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(352),react_icons_bs__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(351),classnames__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(86),classnames__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_4__);function Select(props){const[showOptions,setShowOptions]=Object(react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),[optionMenuId]=Object(react__WEBPACK_IMPORTED_MODULE_0__.useState)(Math.random().toString(36).slice(2)),ref=react__WEBPACK_IMPORTED_MODULE_0___default.a.useRef(null),container=Object(react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>props.getOverlayContainer?props.getOverlayContainer():document.body,[props.getOverlayContainer]),handleClickOutside=Object(react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(event=>{ref.current&&(ref.current===event.target||ref.current.contains(event.target)||setShowOptions(!1))},[ref.current]);Object(react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>(window.addEventListener("click",handleClickOutside,!0),()=>{window.removeEventListener("click",handleClickOutside,!0)}),[]),Object(react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>()=>{var _container$getElement;if(!container)return;const element=null===(_container$getElement=container.getElementsByClassName("tooltip-container-"+optionMenuId))||void 0===_container$getElement?void 0:_container$getElement[0];element&&container.removeChild(element)},[container]);const overlayContainer=Object(react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>{var _container$getElement2;if(!container)return null;let element=null===(_container$getElement2=container.getElementsByClassName("tooltip-container-"+optionMenuId))||void 0===_container$getElement2?void 0:_container$getElement2[0];return element||(element=document.createElement("div"),element.className="tooltip-container",container.appendChild(element)),element},[container]),value=Object(react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>{if(!props.value)return null;let selectedOption=null;return props.options?props.options.map(option=>{option.value===props.value&&(selectedOption=option.label)}):react__WEBPACK_IMPORTED_MODULE_0__.Children.forEach(props.children,child=>{child&&child.props.value===props.value&&(selectedOption=Object(react__WEBPACK_IMPORTED_MODULE_0__.cloneElement)(child,{className:""}))}),null===selectedOption&&(selectedOption=""),selectedOption},[props.children,props.value,props.options]),handleValueChange=Object(react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(value=>{props.onChange&&props.onChange(value)},[]),overlay=Object(react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>{var _ref$current;if(!overlayContainer)return null;const rect=(null===(_ref$current=ref.current)||void 0===_ref$current?void 0:_ref$current.getBoundingClientRect())||{width:0,height:0},offset=function offsetFromContainer(node,container){if(!node||!node.offsetParent)return{x:0,y:0};const offsetOfNode={x:node.offsetLeft,y:node.offsetTop};if(node.offsetParent===document.body||node.offsetParent===container)return offsetOfNode;const offsetOfParent=offsetFromContainer(node.offsetParent,container);return{x:offsetOfNode.x+offsetOfParent.x,y:offsetOfNode.y+offsetOfParent.y}}(ref.current,container),style={top:offset.y+rect.height+10,left:offset.x};return react_dom__WEBPACK_IMPORTED_MODULE_1___default.a.createPortal(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_transition_group__WEBPACK_IMPORTED_MODULE_2__.a,{in:showOptions,timeout:200,unmountOnExit:!0,classNames:"fade-down"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{className:"select__overlay",style:style},props.options&&props.options.map(option=>react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("span",{key:option.label,className:"select-option",onClick:()=>handleValueChange(option.value)},option.label)),!props.options&&props.children&&react__WEBPACK_IMPORTED_MODULE_0__.Children.map(props.children,child=>Object(react__WEBPACK_IMPORTED_MODULE_0__.cloneElement)(child,{onClick:handleValueChange})))),overlayContainer)},[showOptions,container,props.options]),handleClick=Object(react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>setShowOptions(!0),[]),className=Object(react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>classnames__WEBPACK_IMPORTED_MODULE_4___default()("select",{"select--active":showOptions}),[showOptions]);return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("span",{className:className,ref:ref,onClick:handleClick},value," ",react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_icons_bs__WEBPACK_IMPORTED_MODULE_3__.BsChevronRight,{className:"select__arrow"})),overlay)}Select.Option=function Option(props){const handleClick=Object(react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{props.onClick&&props.onClick(props.value)},[props.value]);return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("span",{className:classnames__WEBPACK_IMPORTED_MODULE_4___default()("select-option",props.className),onClick:handleClick},props.children)};try{Select.displayName="Select",Select.__docgenInfo={description:"",displayName:"Select",props:{value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"T"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},options:{defaultValue:null,description:"",name:"options",required:!1,type:{name:"IOption<T>[]"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((value: T) => void)"}},getOverlayContainer:{defaultValue:null,description:"",name:"getOverlayContainer",required:!1,type:{name:"(() => HTMLElement)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/components/src/select/index.tsx#Select"]={docgenInfo:Select.__docgenInfo,name:"Select",path:"packages/components/src/select/index.tsx#Select"})}catch(__react_docgen_typescript_loader_error){}},152:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Switch}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);const style={position:"relative",display:"inline-block",height:24,borderRadius:12,width:50,border:"solid 1px #ccc"},sliderStyle={position:"absolute",top:0,left:0,width:24,height:24,borderRadius:"50%",transition:"all 200ms ease",boxSizing:"border-box",background:"#fff"},Switch=react__WEBPACK_IMPORTED_MODULE_0___default.a.forwardRef((props,ref)=>{const[value,setValue]=Object(react__WEBPACK_IMPORTED_MODULE_0__.useState)(props.value),triggerChange=Object(react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(value=>{var _props$name;props.onChange&&props.onChange({target:{name:null!==(_props$name=props.name)&&void 0!==_props$name?_props$name:"",value:value}})},[props.name,props.onChange]);Object(react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{void 0===value&&void 0!==props.defaultValue&&(setValue(props.defaultValue),triggerChange(props.defaultValue))},[value]);const instance=Object(react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>{const obj={value:!1};return Object.defineProperty(obj,"value",{set(newValue){void 0!==newValue&&(setValue(newValue),triggerChange(newValue))}}),obj},[triggerChange]);Object(react__WEBPACK_IMPORTED_MODULE_0__.useImperativeHandle)(ref,()=>instance),Object(react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{void 0!==props.value&&setValue(props.value)},[props.value]);const handleClick=Object(react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{const newValue=!value;setValue(newValue),triggerChange(newValue)},[value,triggerChange]);return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{onClick:handleClick,style:{...style,background:value?"#999":"#ddd",display:void 0===props.hidden||props.hidden?"inline-block":"none",...props.style}},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{style:{...sliderStyle,left:value?"100%":0,transform:value?"translateX(-100%)":"translateX(0)"}}))});try{Switch.displayName="Switch",Switch.__docgenInfo={description:"",displayName:"Switch",props:{value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"boolean"}},defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!1,type:{name:"boolean"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((value: EventData<unknown>) => void)"}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},hidden:{defaultValue:null,description:"",name:"hidden",required:!1,type:{name:"boolean"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/components/src/switch/index.tsx#Switch"]={docgenInfo:Switch.__docgenInfo,name:"Switch",path:"packages/components/src/switch/index.tsx#Switch"})}catch(__react_docgen_typescript_loader_error){}},187:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Editor}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);let inited=!1;const Editor=Object(react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)((props,ref)=>{var _props$style2;const divEl=Object(react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),[editor,setEditor]=Object(react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);Object(react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{if(divEl.current){!function initMonaco(){if(inited)return;inited=!0,monaco.languages.typescript.typescriptDefaults.setDiagnosticsOptions({noSemanticValidation:!0,noSyntaxValidation:!0}),monaco.languages.typescript.typescriptDefaults.setCompilerOptions({jsx:monaco.languages.typescript.JsxEmit.React,jsxFactory:"React.createElement",reactNamespace:"React",allowNonTsExtensions:!0,allowJs:!0,target:monaco.languages.typescript.ScriptTarget.Latest});const libSource=window.__BRICK_INSTANCE_TYPES__,libUri="ts:filename/brick-instance.d.ts";monaco.languages.typescript.javascriptDefaults.addExtraLib(libSource,libUri),monaco.editor.createModel(libSource,"typescript",monaco.Uri.parse(libUri))}();const _editor=monaco.editor.create(divEl.current,{value:props.value,language:"typescript",tabSize:2,minimap:{enabled:!1}});_editor.onDidChangeModelContent(()=>{var _props$name,_editor$getValue;props.onChange&&props.onChange({target:{name:null!==(_props$name=props.name)&&void 0!==_props$name?_props$name:"",value:null!==(_editor$getValue=null==_editor?void 0:_editor.getValue())&&void 0!==_editor$getValue?_editor$getValue:""}})}),setEditor(_editor)}return()=>{null==editor||editor.dispose()}},[]),Object(react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{var _props$style;editor&&"none"!=(null===(_props$style=props.style)||void 0===_props$style?void 0:_props$style.display)&&(null==editor||editor.layout())},[editor,null===(_props$style2=props.style)||void 0===_props$style2?void 0:_props$style2.display]);const instance=Object(react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>{const obj={value:""};return editor?(Object.defineProperty(obj,"value",{set(newValue){newValue&&editor&&editor.setValue(newValue)}}),obj):obj},[editor]);return Object(react__WEBPACK_IMPORTED_MODULE_0__.useImperativeHandle)(ref,()=>instance),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{style:{border:"solid 1px #ccc",borderRadius:5,...props.style},className:props.className,ref:divEl})});try{Editor.displayName="Editor",Editor.__docgenInfo={description:"",displayName:"Editor",props:{value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((data: EventData<string>) => void)"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/components/src/code-editor/index.tsx#Editor"]={docgenInfo:Editor.__docgenInfo,name:"Editor",path:"packages/components/src/code-editor/index.tsx#Editor"})}catch(__react_docgen_typescript_loader_error){}},189:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return bindInstance})),__webpack_require__.d(__webpack_exports__,"b",(function(){return compileCustomRender}));var _babel_standalone__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(254),_babel_standalone__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_standalone__WEBPACK_IMPORTED_MODULE_0__);function customRenderIsString(fn){return"string"==typeof fn}function bindInstance(render,instance,source){const newRender=render.bind(instance);return source&&(newRender.__source=source),newRender.__raw=render,newRender.rebind=function(instance){return bindInstance(this.__raw,instance,this.__source)}.bind(newRender),newRender}function compileCustomRender(instance,fn){let fnStr="";const render=function(){const React=__webpack_require__(1);let _render=function(){};if(customRenderIsString(fn)){fnStr=fn,fn.startsWith("_render =")||(fn="_render = "+fn);try{fn=Object(_babel_standalone__WEBPACK_IMPORTED_MODULE_0__.transform)(fn,{filename:"render.tsx",presets:["env","react","typescript"]}).code||"",eval(fn)}catch(err){_render=()=>React.createElement("pre",{key:"error"},"Error: ",String(err))}}else _render=fn();return _render=_render.bind(this),_render()},newRender=bindInstance(render,instance,fnStr);return newRender}},252:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"FUNCTION_STR",(function(){return FUNCTION_STR}));const FUNCTION_STR=/^\s*function\s*\w*\s*\(|^(\w+|\((\s*\w+,?)*\))\s*=>\s*/},41:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var tslib=__webpack_require__(1175),React=__webpack_require__(1),isPlainObject=__webpack_require__(85),ai=__webpack_require__(66),ReactDOM=__webpack_require__(42),reactTransitionGroup=__webpack_require__(149),bs=__webpack_require__(351),clx=__webpack_require__(86),pattern=__webpack_require__(252),reactJss=__webpack_require__(33),debounce=__webpack_require__(136),Transition=__webpack_require__(30);function _interopDefaultLegacy(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var React__default=_interopDefaultLegacy(React),isPlainObject__default=_interopDefaultLegacy(isPlainObject),ReactDOM__default=_interopDefaultLegacy(ReactDOM),clx__default=_interopDefaultLegacy(clx),debounce__default=_interopDefaultLegacy(debounce),inited=!1;var Editor=React.forwardRef((function(props,ref){var _a,divEl=React.useRef(null),_b=React.useState(null),editor=_b[0],setEditor=_b[1];React.useEffect((function(){if(divEl.current){!function initMonaco(){if(!inited){inited=!0,monaco.languages.typescript.typescriptDefaults.setDiagnosticsOptions({noSemanticValidation:!0,noSyntaxValidation:!0}),monaco.languages.typescript.typescriptDefaults.setCompilerOptions({jsx:monaco.languages.typescript.JsxEmit.React,jsxFactory:"React.createElement",reactNamespace:"React",allowNonTsExtensions:!0,allowJs:!0,target:monaco.languages.typescript.ScriptTarget.Latest});var libSource="declare interface SetDataFn {\n  (data: DataObject): DataObject\n}\n\ndeclare interface SetDataOptions {\n  setToBlueprint?: boolean // whether set data into blueprint, if false set data at runtime only\n}\n\ndeclare interface SetData {\n  (fn: SetDataFn, options: SetDataOptions): void\n}\n\ndeclare interface BrickContext {\n  data?: Record<string, unknown>\n  actions?: Record<string, unknown>\n}\n\ndeclare interface Action {\n  (...args: unknown[]): void\n  __source?: string\n  binded?: boolean\n  instance_key?: string\n}\n\ndeclare type DataObject = Record<string, unknown>\n\ndeclare interface Emit {\n  (event: string, ...args: unknown[]): void\n}\n\ndeclare interface BrickInstance {\n  key: string\n  data: DataObject\n  actions: Record<string, Action>\n  handlers: Record<string, Action>\n  context: BrickContext\n  setData: SetData\n  emit: Emit\n  editing?: boolean\n  children?: React.ReactNode\n}\n",libUri="ts:filename/brick-instance.d.ts";monaco.languages.typescript.javascriptDefaults.addExtraLib(libSource,libUri),monaco.editor.createModel(libSource,"typescript",monaco.Uri.parse(libUri))}}();var _editor_1=monaco.editor.create(divEl.current,{value:props.value,language:"typescript",tabSize:2,minimap:{enabled:!1}});_editor_1.onDidChangeModelContent((function(){var _a,_b;props.onChange&&props.onChange({target:{name:null!==(_a=props.name)&&void 0!==_a?_a:"",value:null!==(_b=null==_editor_1?void 0:_editor_1.getValue())&&void 0!==_b?_b:""}})})),setEditor(_editor_1)}return function(){null==editor||editor.dispose()}}),[]),React.useEffect((function(){var _a;editor&&"none"!=(null===(_a=props.style)||void 0===_a?void 0:_a.display)&&(null==editor||editor.layout())}),[editor,null===(_a=props.style)||void 0===_a?void 0:_a.display]);var instance=React.useMemo((function(){var obj={value:""};return editor?(Object.defineProperty(obj,"value",{set:function(newValue){newValue&&editor&&editor.setValue(newValue)}}),obj):obj}),[editor]);return React.useImperativeHandle(ref,(function(){return instance})),React__default.default.createElement("div",{style:tslib.__assign({border:"solid 1px #ccc",borderRadius:5},props.style),className:props.className,ref:divEl})}));function Select(props){var _a=React.useState(!1),showOptions=_a[0],setShowOptions=_a[1],optionMenuId=React.useState(Math.random().toString(36).slice(2))[0],ref=React__default.default.useRef(null),container=React.useMemo((function(){return props.getOverlayContainer?props.getOverlayContainer():document.body}),[props.getOverlayContainer]),handleClickOutside=React.useCallback((function(event){ref.current&&(ref.current===event.target||ref.current.contains(event.target)||setShowOptions(!1))}),[ref.current]);React.useEffect((function(){return window.addEventListener("click",handleClickOutside,!0),function(){window.removeEventListener("click",handleClickOutside,!0)}}),[]),React.useEffect((function(){return function(){var _a;if(container){var element=null===(_a=container.getElementsByClassName("tooltip-container-"+optionMenuId))||void 0===_a?void 0:_a[0];element&&container.removeChild(element)}}}),[container]);var overlayContainer=React.useMemo((function(){var _a;if(!container)return null;var element=null===(_a=container.getElementsByClassName("tooltip-container-"+optionMenuId))||void 0===_a?void 0:_a[0];return element||((element=document.createElement("div")).className="tooltip-container",container.appendChild(element)),element}),[container]),value=React.useMemo((function(){if(!props.value)return null;var selectedOption=null;return props.options?props.options.map((function(option){option.value===props.value&&(selectedOption=option.label)})):React.Children.forEach(props.children,(function(child){child&&child.props.value===props.value&&(selectedOption=React.cloneElement(child,{className:""}))})),null===selectedOption&&(selectedOption=""),selectedOption}),[props.children,props.value,props.options]),handleValueChange=React.useCallback((function(value){props.onChange&&props.onChange(value)}),[]),overlay=React.useMemo((function(){var _a;if(!overlayContainer)return null;var rect=(null===(_a=ref.current)||void 0===_a?void 0:_a.getBoundingClientRect())||{width:0,height:0},offset=function offsetFromContainer(node,container){if(!node||!node.offsetParent)return{x:0,y:0};var offsetOfNode={x:node.offsetLeft,y:node.offsetTop};if(node.offsetParent===document.body||node.offsetParent===container)return offsetOfNode;var offsetOfParent=offsetFromContainer(node.offsetParent,container);return{x:offsetOfNode.x+offsetOfParent.x,y:offsetOfNode.y+offsetOfParent.y}}(ref.current,container),style={top:offset.y+rect.height+10,left:offset.x};return ReactDOM__default.default.createPortal(React__default.default.createElement(reactTransitionGroup.CSSTransition,{in:showOptions,timeout:200,unmountOnExit:!0,classNames:"fade-down"},React__default.default.createElement("div",{className:"select__overlay",style:style},props.options&&props.options.map((function(option){return React__default.default.createElement("span",{key:option.label,className:"select-option",onClick:function(){return handleValueChange(option.value)}},option.label)})),!props.options&&props.children&&React.Children.map(props.children,(function(child){return React.cloneElement(child,{onClick:handleValueChange})})))),overlayContainer)}),[showOptions,container,props.options]),handleClick=React.useCallback((function(){return setShowOptions(!0)}),[]),className=React.useMemo((function(){return clx__default.default("select",{"select--active":showOptions})}),[showOptions]);return React__default.default.createElement(React__default.default.Fragment,null,React__default.default.createElement("span",{className:className,ref:ref,onClick:handleClick},value," ",React__default.default.createElement(bs.BsChevronRight,{className:"select__arrow"})),overlay)}Select.Option=function Option(props){var handleClick=React.useCallback((function(){props.onClick&&props.onClick(props.value)}),[props.value]);return React__default.default.createElement("span",{className:clx__default.default("select-option",props.className),onClick:handleClick},props.children)};var _a,InputType,style={position:"relative",display:"inline-block",height:24,borderRadius:12,width:50,border:"solid 1px #ccc"},sliderStyle={position:"absolute",top:0,left:0,width:24,height:24,borderRadius:"50%",transition:"all 200ms ease",boxSizing:"border-box",background:"#fff"},Switch=React__default.default.forwardRef((function(props,ref){var _a=React.useState(props.value),value=_a[0],setValue=_a[1],triggerChange=React.useCallback((function(value){var _a;props.onChange&&props.onChange({target:{name:null!==(_a=props.name)&&void 0!==_a?_a:"",value:value}})}),[props.name,props.onChange]);React.useEffect((function(){void 0===value&&void 0!==props.defaultValue&&(setValue(props.defaultValue),triggerChange(props.defaultValue))}),[value]);var instance=React.useMemo((function(){var obj={value:!1};return Object.defineProperty(obj,"value",{set:function(newValue){void 0!==newValue&&(setValue(newValue),triggerChange(newValue))}}),obj}),[triggerChange]);React.useImperativeHandle(ref,(function(){return instance})),React.useEffect((function(){void 0!==props.value&&setValue(props.value)}),[props.value]);var handleClick=React.useCallback((function(){var newValue=!value;setValue(newValue),triggerChange(newValue)}),[value,triggerChange]);return React__default.default.createElement("div",{onClick:handleClick,style:tslib.__assign(tslib.__assign(tslib.__assign({},style),{background:value?"#999":"#ddd",display:void 0===props.hidden||props.hidden?"inline-block":"none"}),props.style)},React__default.default.createElement("div",{style:tslib.__assign(tslib.__assign({},sliderStyle),{left:value?"100%":0,transform:value?"translateX(-100%)":"translateX(0)"})}))})),valueInputWrapperStyle={position:"relative",flex:1,marginRight:10},valueInputBtnStyle={position:"absolute",right:8,top:6};(InputType=exports.InputType||(exports.InputType={})).STRING="string",InputType.CODE="code",InputType.BOOLEAN="boolean";var inputTypeOptions=[{label:"String",value:exports.InputType.STRING},{label:"Code",value:exports.InputType.CODE},{label:"Boolean",value:exports.InputType.BOOLEAN}],valueValidatorMap=((_a={})[exports.InputType.BOOLEAN]={defaultValue:!1,validate:function(value){return"boolean"==typeof value}},_a[exports.InputType.STRING]={defaultValue:"",validate:function(value){return"string"==typeof value}},_a[exports.InputType.CODE]={defaultValue:"function() {}",validate:function(value){return"string"==typeof value&&pattern.FUNCTION_STR.test(value)}},_a),Item=function(_a){var value=_a.value,index=_a.index,label=_a.label,handleChange=_a.handleChange,handleDeleteItem=_a.handleDeleteItem,props=tslib.__rest(_a,["value","index","label","handleChange","handleDeleteItem"]),itemValue=React.useMemo((function(){var _a;return null!==(_a=null==value?void 0:value[label])&&void 0!==_a?_a:""}),[value,label]),_b=React.useState(exports.InputType.STRING),inputType=_b[0],setInputType=_b[1],enterExpand=React.useCallback((function(){return props.setExpandKey(label)}),[label]),exitExpand=React.useCallback((function(){return props.setExpandKey(null)}),[]),isExpand=React.useMemo((function(){return props.expandKey===label}),[props.expandKey,label]),typeOptions=React.useMemo((function(){return props.types?inputTypeOptions.filter((function(item){var _a;return null===(_a=props.types)||void 0===_a?void 0:_a.includes(item.value)})):inputTypeOptions}),[props.types]);return React.useEffect((function(){pattern.FUNCTION_STR.test(itemValue)?setInputType(exports.InputType.CODE):"boolean"!=typeof itemValue||setInputType(exports.InputType.BOOLEAN)}),[itemValue]),React.useEffect((function(){var validator=valueValidatorMap[inputType];!validator.validate(itemValue)&&handleChange&&handleChange({target:{name:index+"-value",value:validator.defaultValue}})}),[inputType,itemValue]),React__default.default.createElement("div",{style:{display:"flex",flexWrap:"wrap",margin:"10px 0"},key:index},React__default.default.createElement("input",{placeholder:"key",className:"formitem-input",style:{width:100,height:16,lineHeight:"16px",flex:"unset",marginRight:10},name:index+"-label",type:"text",value:label,onChange:handleChange}),React__default.default.createElement("div",{style:tslib.__assign(tslib.__assign({},valueInputWrapperStyle),{visibility:isExpand?"hidden":"visible"})},inputType===exports.InputType.BOOLEAN&&React__default.default.createElement(Switch,{value:!!itemValue,name:index+"-value",onChange:handleChange}),inputType!==exports.InputType.BOOLEAN&&React__default.default.createElement(React__default.default.Fragment,null,React__default.default.createElement("input",{placeholder:"value",className:"formitem-input",style:{paddingRight:30,lineHeight:"16px",boxSizing:"border-box",width:"100%"},name:index+"-value",type:"text",value:itemValue,onChange:handleChange}),React__default.default.createElement("div",{style:valueInputBtnStyle,onClick:enterExpand,title:"expand"},React__default.default.createElement(ai.AiOutlineExpand,null)))),typeOptions.length>1&&React__default.default.createElement(Select,{value:inputType,options:typeOptions,onChange:setInputType,getOverlayContainer:props.getOverlayContainer}),React__default.default.createElement("div",{style:{paddingTop:6,marginLeft:10},"data-testid":"remove-btn-"+index,"data-index":index,onClick:handleDeleteItem,title:"remove item"},React__default.default.createElement(ai.AiOutlineMinusCircle,null)),isExpand&&React__default.default.createElement("div",{style:{width:"100%",position:"relative",marginTop:5}},inputType===exports.InputType.CODE&&React__default.default.createElement(Editor,{value:itemValue,name:index+"-value",onChange:handleChange,style:{width:"100%",height:200}}),inputType!==exports.InputType.CODE&&React__default.default.createElement("textarea",{className:"formitem-textarea",style:{width:"100%",height:200,paddingBottom:30,boxSizing:"border-box"},name:index+"-value",value:itemValue,onChange:handleChange}),React__default.default.createElement("div",{title:"reduce",style:{textAlign:"right",position:"absolute",bottom:10,right:10}},React__default.default.createElement(ai.AiOutlineCompress,{className:"config-form__item-btn",onClick:exitExpand}))))},ObjectKeyValueInput=React__default.default.forwardRef((function(props,ref){var _a=React.useState(props.value),value=_a[0],setValue=_a[1],_b=React.useState((function(){var value=props.value||{};return Object.keys(value)})),keys=_b[0],setKeys=_b[1],_c=React.useState(null),expandKey=_c[0],setExpandKey=_c[1];React.useEffect((function(){isPlainObject__default.default(props.value)||triggerChange({})}),[props.value]),React.useEffect((function(){var newKeys=keys.slice(),valueKeys=Object.keys(props.value||{});newKeys.forEach((function(key){valueKeys.includes(key)&&!newKeys.includes(key)&&newKeys.push(key)})),valueKeys.forEach((function(key){newKeys.includes(key)||newKeys.push(key)})),setKeys(newKeys),setValue(props.value)}),[props.value]);var triggerChange=React.useCallback((function(obj){props.onChange&&props.onChange({target:{name:props.name||"",value:obj}})}),[props.name,props.onChange]),instance=React.useMemo((function(){var obj={value:{}};return Object.defineProperty(obj,"value",{set:function(newValue){newValue&&(setValue(newValue),setKeys(Object.keys(newValue)),triggerChange(newValue))}}),obj}),[]);React.useImperativeHandle(ref,(function(){return instance}));var handleChange=React.useCallback((function(event){var _a=event.target.name.split("-"),index=_a[0],inputType=_a[1],newValue=keys.reduce((function(result,key,i){var targetValue=event.target.value;if(index!=i.toString())result[key]=(null==value?void 0:value[key])||"";else if("label"===inputType){var newKeys=keys.slice();newKeys.splice(i,1,String(targetValue)),setKeys(newKeys),result[String(targetValue)]=(null==value?void 0:value[key])||""}else result[key]=targetValue;return result}),{});setValue(newValue),triggerChange(newValue)}),[keys,value]),isAddBtnDisabled=React.useMemo((function(){return keys.includes("")}),[keys]),handleAddItem=React.useCallback((function(){if(!isAddBtnDisabled){var newKeys=keys.slice();newKeys.push(""),setKeys(newKeys)}}),[keys,isAddBtnDisabled]),handleDeleteItem=React.useCallback((function(event){var newValue=tslib.__assign({},value),index=parseInt(event.currentTarget.dataset.index||"0"),newKeys=keys.slice();delete newValue[newKeys.splice(index,1)[0]],setKeys(newKeys),setValue(newValue),triggerChange(newValue)}),[keys,value]);return React__default.default.createElement("div",{style:tslib.__assign(tslib.__assign({},props.style),{width:"100%"})},keys.map((function(key,index){return React__default.default.createElement(Item,{value:value,expandKey:expandKey,setExpandKey:setExpandKey,index:index,key:index,label:key,types:props.types,handleChange:handleChange,handleDeleteItem:handleDeleteItem,getOverlayContainer:props.getOverlayContainer})})),!isAddBtnDisabled&&React__default.default.createElement("div",{style:{display:"inline-block"},"data-testid":"add-item",title:"add item",onClick:handleAddItem},React__default.default.createElement(ai.AiOutlinePlusCircle,null)))})),ObjectStringInput=React__default.default.forwardRef((function(props,ref){var _a=React.useState(JSON.stringify(props.value)),valueStr=_a[0],setValueStr=_a[1],triggerChange=React.useCallback((function(obj){props.onChange&&props.onChange({target:{name:props.name||"",value:obj}})}),[props.name,props.onChange]),instance=React.useMemo((function(){var obj={value:""};return Object.defineProperty(obj,"value",{set:function(newValue){newValue&&setValueStr(JSON.stringify(newValue))}}),obj}),[]);React.useImperativeHandle(ref,(function(){return instance})),React.useEffect((function(){isPlainObject__default.default(props.value)||void 0===props.value?setValueStr(JSON.stringify(props.value||{})):(setValueStr("{}"),triggerChange({}))}),[props.value,triggerChange]);var handleChange=React.useCallback((function(event){var value=event.target.value||"";setValueStr(value);try{var obj=JSON.parse(value);triggerChange(obj)}catch(err){window.__DEV__&&console.error(err)}}),[triggerChange]);return React__default.default.createElement("textarea",{className:props.className,style:props.style,name:props.name,value:valueStr,onChange:handleChange})})),name="tooltip-container",useStyles=reactJss.createUseStyles((function(theme){return{tooltip:{position:"absolute",borderRadius:"5px",maxWidth:"300px",padding:"10px",background:"rgba(0, 0, 0, 0.8)",color:"#fff",transformOrigin:"-5px 15px",zIndex:9999,transition:"all "+theme.transitions.duration.shortest+"ms","&::before":{content:'""',position:"absolute",left:"-10px",top:"10px",borderStyle:"solid",borderWidth:5,borderColor:"transparent",borderRightColor:"rgba(0, 0, 0, 0.8)"}},tooltipEntering:{opacity:0,transform:"scale(0.4) translateX(-20px)"},tooltipEntered:{opacity:1,transform:"scale(1) translateX(0)"},tooltipExiting:{opacity:0,transform:"scale(0.4) translateX(-20px)"},tooltipExited:{opacity:0,transform:"scale(0.4) translateX(-20px)"}}}),{name:"Tooltip"});var mousePosition=null;"undefined"!=typeof window&&window.document&&window.document.createElement&&document.documentElement.addEventListener("click",(function(e){mousePosition={x:e.pageX,y:e.pageY},setTimeout((function(){mousePosition=null}),100)}),!0);var useStyles$1=reactJss.createUseStyles((function(theme){return{mask:{position:"fixed",top:0,bottom:0,left:0,right:0,backgroundColor:theme.palette.mask.main,zIndex:theme.zIndex.modal,opacity:0,transition:function(_a){return"all "+_a.duration+"ms ease-in-out"}},maskEntering:{opacity:0},maskEntered:{opacity:1},maskExiting:{opacity:0},maskExited:{opacity:0},modalWrapper:{position:"fixed",top:0,bottom:0,left:0,right:0,zIndex:theme.zIndex.modal,transform:"scale(0.1)",opacity:0,transition:function(_a){return"all "+_a.duration+"ms ease-in-out"},overflowY:"auto"},modalWrapperEntering:{transform:"scale(0.1)",opacity:0},modalWrapperEntered:{transform:"scale(1)",opacity:1},modalWrapperExiting:{transform:"scale(0.1)",opacity:0},modalWrapperExited:{transform:"scale(0.1)",opacity:0},modal:{margin:4*theme.spacing.Lg+"px auto",width:600,padding:theme.spacing.Lg,borderRadius:theme.shape.borderRadius,backgroundColor:theme.palette.background.default},header:{display:"flex",alignItems:"center",color:theme.palette.text.primary,fontWeight:theme.typography.fontWeightMedium,marginBottom:theme.spacing.Sm},title:{flex:1},closeBtn:{fontSize:20}}}),{name:"Modal"}),useStyles$2=reactJss.createUseStyles((function(theme){return{delimiter:{fontFamily:"monospace",fontSize:theme.typography.fontSize,color:theme.palette.grey[500]}}}));var parseValue=function(value){var _a;return"string"==typeof value&&null!==(_a=null==value?void 0:value.replace(/^\{\{\s*|\s*\}\}$/g,""))&&void 0!==_a?_a:""},ExpressionInput=React__default.default.forwardRef((function(props,ref){var classes=useStyles$2(),_a=React.useState(!1),showOptions=_a[0],setShowOptions=_a[1],optionMenuId=React.useState(Math.random().toString(36).slice(2))[0],_b=React.useState(parseValue(props.value)),value=_b[0],setValue=_b[1],wrapper=React__default.default.useRef(null),container=React.useMemo((function(){return props.getOverlayContainer?props.getOverlayContainer():document.body}),[props.getOverlayContainer]),handleClickOutside=React.useCallback((function(event){wrapper.current&&(wrapper.current===event.target||wrapper.current.contains(event.target)||setShowOptions(!1))}),[wrapper.current]);React.useEffect((function(){setValue(parseValue(props.value))}),[props.value]),React.useEffect((function(){return window.addEventListener("click",handleClickOutside,!0),function(){window.removeEventListener("click",handleClickOutside,!0)}}),[]),React.useEffect((function(){return function(){var _a;if(container){var element=null===(_a=container.getElementsByClassName("option-container-"+optionMenuId))||void 0===_a?void 0:_a[0];element&&container.removeChild(element)}}}),[container]);var overlayContainer=React.useMemo((function(){var _a;if(!container)return null;var element=null===(_a=container.getElementsByClassName("option-container-"+optionMenuId))||void 0===_a?void 0:_a[0];return element||((element=document.createElement("div")).className="option-container",container.appendChild(element)),element}),[container]),triggerChange=React.useCallback((function(value){var _a;setValue(value),props.onChange&&props.onChange({target:{name:null!==(_a=props.name)&&void 0!==_a?_a:"",value:"{{"+value+"}}"}})}),[]),handleChange=React.useCallback((function(event){triggerChange(event.target.value)}),[]),instance=React.useMemo((function(){var obj={value:""};return Object.defineProperty(obj,"value",{set:function(newValue){newValue&&(newValue=parseValue(newValue),setValue(newValue),triggerChange(newValue))}}),obj}),[]);React.useImperativeHandle(ref,(function(){return instance}));var overlay=React.useMemo((function(){var _a;if(!overlayContainer)return null;var rect=(null===(_a=wrapper.current)||void 0===_a?void 0:_a.getBoundingClientRect())||{width:0,height:0},offset=function offsetFromContainer$2(node,container){if(!node||!node.offsetParent)return{x:0,y:0};var offsetOfNode={x:node.offsetLeft,y:node.offsetTop};if(node.offsetParent===document.body||node.offsetParent===container)return offsetOfNode;var offsetOfParent=offsetFromContainer$2(node.offsetParent,container);return{x:offsetOfNode.x+offsetOfParent.x,y:offsetOfNode.y+offsetOfParent.y}}(wrapper.current,container),style={top:offset.y+rect.height+10,left:offset.x};return ReactDOM__default.default.createPortal(React__default.default.createElement(reactTransitionGroup.CSSTransition,{in:showOptions,timeout:200,unmountOnExit:!0,classNames:"fade-down"},React__default.default.createElement("div",{className:"select__overlay",style:style},props.options&&props.options.map((function(option){return React__default.default.createElement("span",{key:option.label,className:"select-option",onClick:function(){return triggerChange(option.value)}},option.label)})))),overlayContainer)}),[showOptions,container,props.options]);return React__default.default.createElement("span",{ref:wrapper,style:props.style},React__default.default.createElement("span",{className:classes.delimiter},"{{  "),React__default.default.createElement("input",{type:"text",value:value,onChange:handleChange}),React__default.default.createElement("span",{className:classes.delimiter},"  }}"),overlay)}));exports.Editor=Editor,exports.ExpressionInput=ExpressionInput,exports.Modal=function(props){var visible=props.visible,children=props.children,transitionDuration=props.transitionDuration,theme=reactJss.useTheme(),duration=null!=transitionDuration?transitionDuration:theme.transitions.duration.short,containerRef=React.useRef(null),modalRef=React.useRef(null),classes=useStyles$1({duration:duration}),pos=React.useRef();React.useMemo((function(){var _a,_b;visible&&containerRef.current&&(pos.current={top:(null!==(_a=null==mousePosition?void 0:mousePosition.y)&&void 0!==_a?_a:0)-containerRef.current.ownerDocument.documentElement.scrollTop,left:(null!==(_b=null==mousePosition?void 0:mousePosition.x)&&void 0!==_b?_b:0)-containerRef.current.ownerDocument.documentElement.scrollLeft})}),[visible]),React.useEffect((function(){if(visible&&"undefined"!=typeof window){var overflow_1=window.document.body.style.overflow;return window.document.body.style.overflow="hidden",function(){window.document.body.style.overflow=overflow_1}}return function(){return null}}),[visible]);var handleClickModalWrapper=React.useCallback((function(event){props.maskClosable&&props.onClose&&(modalRef.current&&modalRef.current.contains(event.target)||props.onClose())}),[props.maskClosable,props.onClose]);return React__default.default.createElement("div",{ref:containerRef},React__default.default.createElement(reactTransitionGroup.Transition,{in:visible,timeout:{appear:0,enter:0,exit:duration},unmountOnExit:!0},(function(state){var _a;return React__default.default.createElement("div",{className:clx__default.default(classes.mask,(_a={},_a[classes.maskEntering]=state===Transition.ENTERING,_a[classes.maskEntered]=state===Transition.ENTERED,_a[classes.maskExiting]=state===Transition.EXITING,_a[classes.maskExited]=state===Transition.EXITED,_a))})})),React__default.default.createElement(reactTransitionGroup.Transition,{in:visible,timeout:{appear:0,enter:0,exit:duration},unmountOnExit:!0},(function(state){var _a,_b,_c,_d,_e,_f,_g;return React__default.default.createElement("div",{onClick:handleClickModalWrapper,ref:props.containerRef,className:clx__default.default(classes.modalWrapper,(_a={},_a[classes.modalWrapperEntering]=state===Transition.ENTERING,_a[classes.modalWrapperEntered]=state===Transition.ENTERED,_a[classes.modalWrapperExiting]=state===Transition.EXITING,_a[classes.modalWrapperExited]=state===Transition.EXITED,_a)),style:{transformOrigin:(null!==(_c=null===(_b=pos.current)||void 0===_b?void 0:_b.left)&&void 0!==_c?_c:0)+"px "+(null!==(_e=null===(_d=pos.current)||void 0===_d?void 0:_d.top)&&void 0!==_e?_e:0)+"px"}},React__default.default.createElement("div",{className:clx__default.default(classes.modal),ref:modalRef},React__default.default.createElement("div",{className:classes.header},React__default.default.createElement("div",{className:classes.title},props.title),React__default.default.createElement("div",{className:clx__default.default(classes.closeBtn,null===(_f=props.closeBtnProps)||void 0===_f?void 0:_f.className),"data-testid":null===(_g=props.closeBtnProps)||void 0===_g?void 0:_g.testID,onClick:props.onClose,title:"close"},React__default.default.createElement(ai.AiFillCloseCircle,null))),children))})))},exports.ObjectKeyValueInput=ObjectKeyValueInput,exports.ObjectStringInput=ObjectStringInput,exports.Switch=Switch,exports.Tooltip=function(props){var classes=useStyles(),_a=React.useState(!1),isHover=_a[0],setIsHover=_a[1],ref=React__default.default.useRef(null),handleHoverChange=React.useCallback(debounce__default.default((function(hover){return setIsHover(hover)}),200),[]),handleMouseEnter=React.useCallback((function(){handleHoverChange(!0)}),[]),handleMouseLeave=React.useCallback((function(){handleHoverChange(!1)}),[]),container=React.useMemo((function(){return props.getOverlayContainer?props.getOverlayContainer():document.body}),[isHover]),tooltip=React.useMemo((function(){var _a;if(!container)return null;var element=null===(_a=container.getElementsByClassName(name))||void 0===_a?void 0:_a[0];return element||((element=document.createElement("div")).className=name,container.appendChild(element)),element}),[container]),overlay=React.useMemo((function(){var _a;if(!tooltip)return null;var rect=(null===(_a=ref.current)||void 0===_a?void 0:_a.getBoundingClientRect())||{width:0,height:0},offset=function offsetFromContainer$1(node,container){if(!node||!node.offsetParent)return{x:0,y:0};var offsetOfNode={x:node.offsetLeft,y:node.offsetTop};if(node.offsetParent===document.body||node.offsetParent===container)return offsetOfNode;var offsetOfParent=offsetFromContainer$1(node.offsetParent,container);return{x:offsetOfNode.x+offsetOfParent.x,y:offsetOfNode.y+offsetOfParent.y}}(ref.current,container),style={top:offset.y-5-10+rect.height/2,left:offset.x+rect.width+10};return ReactDOM__default.default.createPortal(React__default.default.createElement(reactTransitionGroup.Transition,{in:isHover,timeout:200,unmountOnExit:!0},(function(state){var _a;return React__default.default.createElement("div",{className:clx__default.default(classes.tooltip,(_a={},_a[classes.tooltipEntering]=state===Transition.ENTERING,_a[classes.tooltipEntered]=state===Transition.ENTERED,_a[classes.tooltipExiting]=state===Transition.EXITING,_a[classes.tooltipExited]=state===Transition.EXITED,_a)),onMouseEnter:handleMouseEnter,onMouseLeave:handleMouseLeave,style:style},props.content)})),tooltip)}),[isHover,container]),child=React__default.default.Children.only(props.children);return React__default.default.createElement(React__default.default.Fragment,null,React__default.default.cloneElement(child,{ref:ref,onMouseEnter:handleMouseEnter,onMouseLeave:handleMouseLeave}),overlay)},Editor.__docgenInfo={description:"",methods:[],displayName:"Editor"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/components/lib/index.js"]={name:"Editor",docgenInfo:Editor.__docgenInfo,path:"packages/components/lib/index.js"})},515:function(module,exports,__webpack_require__){var api=__webpack_require__(131),content=__webpack_require__(1152);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},525:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/code-brackets.2e1112d7.svg"},526:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/colors.a4bd0486.svg"},527:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/comments.a3859089.svg"},528:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/direction.b770f9af.svg"},529:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/flow.edad2ac1.svg"},530:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/plugin.d494b228.svg"},531:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/repo.6d496322.svg"},532:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/stackalt.dba9fbb3.svg"},536:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return compileAction}));var _babel_standalone__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(254),_babel_standalone__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_standalone__WEBPACK_IMPORTED_MODULE_0__);function checkFnIsAction(fn){return"function"==typeof fn}function compileAction(instance,fn){let fnStr="";const action=function(...args){let _action=()=>{};return checkFnIsAction(fn)?_action=fn():(fnStr=fn,fn="_action = "+fn,fn=Object(_babel_standalone__WEBPACK_IMPORTED_MODULE_0__.transform)(fn,{filename:"action.ts",presets:["env","typescript"]}).code||"",eval(fn)),_action=_action.bind(this),_action(...args)};return fnStr&&(action.__source=fnStr),action.bind(instance)}},537:function(module){module.exports=JSON.parse('{"name":"View","_key":"001","id":"container","data":{"dataSource":{},"name":"baz","style":{},"styleOverride":{},"if":true,"for":""},"actions":{"onClick":"function(name) {\\n  this.setData(function (data) {\\n    console.log(\'000001\', data);\\n    return Object.assign({}, data, {\\n      name: name,\\n    })\\n  }, {\\n    setToBlueprint: true,\\n  })\\n}"},"supply":{"data":{"text":"{{$this.name}}","array":"{{[\'111\', \'222\', \'333\']}}"},"actions":{"onClick":"{{$this.onClick}}"}},"children":[{"name":"Image","_key":"009","data":{"src":"https://img.iplaysoft.com/wp-content/uploads/2019/free-images/free_stock_photo.jpg!0x0.webp","styleOverride":{},"wrapperStyle":{"width":100,"display":"block"},"style":{"width":100,"display":"block"}},"version":"0.0.1"},{"name":"Text","_key":"002","data":{"content":"{{$container.text}}"},"version":"0.0.1"},{"name":"View","_key":"004","id":"container2","supply":{"actions":{"onClick":"{{$container.onClick}}","onInputChange":"function(value) {\\n   this.context.actions.$container.onClick(value)}"}},"children":[{"name":"Input","_key":"0010","handlers":{"onChange":"function(event) {\\n             this.context.actions.$container2.onInputChange(event.target.value)\\n                }"},"version":"0.0.1"},{"name":"Text","_key":"011","data":{"for":"{{$container.array}}","content":"{{item}}"},"version":"0.0.1"},{"name":"TextWithAction","_key":"005","actions":{"handleClick":"function(...args) {\\n  this.context.actions.$container2.onClick(this.data.content)\\n}"},"handlers":{"onClick":"{{$this.handleClick}}"},"data":{"content":"123456789"},"version":"0.0.1","supply":{"actions":{}}}],"version":"0.0.1"},{"name":"View","_key":"006","data":{"for":"{{$container.array}}"},"supply":{"data":{"content":"{{item}}"}},"children":[{"name":"Text","_key":"007","data":{"content":"{{$parent.content}}"},"version":"0.0.1"},{"name":"Text","_key":"008","data":{"content":"hello world"},"render":"function (this: BrickInstance) {\\n\\treturn (\\n\\t\\t<span>content: {this.data.content}</span>\\n\\t)\\n}","version":"0.0.1"},{"name":"Text","_key":"003","data":{"content":"fooo","style":{"color":"blue","fontSize":"24px"}},"version":"0.0.1"}],"version":"0.0.1"}],"version":"0.0.1","handlers":{}}')},538:function(module){module.exports=JSON.parse('{"name":"View","_key":"001","id":"container","children":[{"name":"View","_key":"002","data":{"styleOverride":{"height":"unset"},"style":{"display":"flex","alignItems":"center","flexWrap":"nowrap","height":"62px","background":"#24292e","box-sizing":"border-box","padding":"16px 32px"}},"children":[{"name":"Text","_key":"003","data":{"style":{"color":"#fff","marginRight":"16px"}},"render":"function (this: BrickInstance) {return <span style={this.data.style}><svg style={{fill: \'currentColor\'}} height=\'32\' viewBox=\'0 0 16 16\' version=\'1.1\' width=\'32\' aria-hidden=\'true\'><path fill-rule=\'evenodd\' d=\'M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z\'></path></svg></span>}","version":"0.0.1"},{"name":"Input","_key":"004","data":{"style":{"color":"#fff","width":"272px","minHeight":"28px","background":"#24292e","border":"1px solid #444d56","borderRadius":"6px","verticalAlign":"middle","marginRight":"16px"}},"version":"0.0.1"},{"name":"Text","_key":"005","data":{"content":"Pull requests","style":{"color":"#fff","marginRight":"16px"}},"version":"0.0.1"},{"name":"Text","_key":"006","data":{"content":"Issues","style":{"color":"#fff","marginRight":"16px"}},"version":"0.0.1"},{"name":"Text","_key":"007","data":{"content":"Marketplace","style":{"color":"#fff","marginRight":"16px"}},"version":"0.0.1"},{"name":"Text","_key":"008","data":{"content":"Explore","style":{"color":"#fff","marginRight":"16px"}},"version":"0.0.1"}],"version":"0.0.1"}],"version":"0.0.1"}')},539:function(module){module.exports=JSON.parse('{"name":"View","_key":"001","id":"container","children":[{"_key":"8flFbhPZmzDmJesuMAUcN","name":"Text","data":{"content":"todos","style":{"color":"#b83f45","fontSize":"80px","display":"block","textAlign":"center"}},"actions":{},"handlers":{},"supply":{"actions":{}},"version":"0.0.1"},{"_key":"OYACaLO718nBJZhhcAsG0","name":"View","data":{"if":true,"style":{"boxShadow":"0 2px 4px 0 rgba(0, 0, 0, 0.2), 0 25px 50px 0 rgba(0, 0, 0, 0.1)","width":"550px","margin":"0 auto"},"styleOverride":{},"others":{}},"actions":{},"handlers":{},"supply":{"actions":{},"data":{}},"children":[{"_key":"e5qaQJBw4qW10USecmsoM","name":"View","data":{"if":true,"style":{"display":"flex","boxShadow":"inset 0 -2px 1px rgba(0,0,0,0.03)"}},"children":[{"_key":"qxChEb2MiLdL1JRvBv7q2","name":"Text","data":{"content":"❯","style":{"display":"block","padding":"10px 20px","fontSize":"22px","transform":"rotate(90deg)","color":"#949494"},"styleOverride":{"transform":"none"}},"actions":{},"handlers":{},"supply":{"actions":{}}},{"_key":"aADzXprhZfpcg3E_3Whqs","name":"Input","data":{"style":{"padding":"16px","width":"100%","boxSizing":"border-box","border":"none","background":"transparent","height":"65px","fontSize":"24px"},"styleOverride":{},"wrapperStyle":{"width":"100%","display":"block"}},"actions":{},"handlers":{"onKeyPress":"function(event) {\\n  if (event.key === \'Enter\' && !!this.data._text) {\\n    console.log(this.data._text)\\n    this.context.actions.$container.addTodo({\\n      title: this.data._text,\\n      complete: false,\\n    })\\n    event.target.value = \'\'\\n  }\\n}","onChange":"function(event) {\\n  this.data._text = event.target.value\\n}"},"supply":{"actions":{}}}],"actions":{},"handlers":{},"supply":{"actions":{}},"version":"0.0.1"},{"_key":"iVgLWZRrbrCkJbrmzR3WC","name":"View","data":{"if":true},"actions":{},"handlers":{},"supply":{"actions":{}},"children":[{"_key":"huzaAMvq29ZVjdtwwGttW","name":"View","data":{"if":true,"for":"{{$container.others}}"},"children":[{"_key":"Sspez85t8cO0VU1LPxE1J","name":"TextWithAction","data":{"for":"{{}}","content":"{{$parent.todo.title}}","style":{"backgroundImage":"url(\'data:image/svg+xml;utf8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2240%22%20height%3D%2240%22%20viewBox%3D%22-10%20-18%20100%20135%22%3E%3Ccircle%20cx%3D%2250%22%20cy%3D%2250%22%20r%3D%2250%22%20fill%3D%22none%22%20stroke%3D%22%23949494%22%20stroke-width%3D%223%22/%3E%3C/svg%3E\')","backgroundRepeat":"no-repeat","backgroundPosition":"15px center","padding":"15px 15px 15px 70px","lineHeight":"1.2","fontWeight":"400","fontSize":"24px","color":"#484848","display":"block","borderBottom":"1px solid #ededed"}},"actions":{},"handlers":{"onClick":"function () {\\n  this.context.actions.$container.removeTodo(this.context.data.$parent.index)\\n}"},"supply":{"actions":{}},"copy":true,"copyID":0,"version":"0.0.1"}],"actions":{},"handlers":{},"supply":{"actions":{},"data":{"todo":"{{item}}","index":"{{index}}"}},"version":"0.0.1"}],"version":"0.0.1"}],"id":"container","version":"0.0.1"}],"version":"0.0.1","actions":{"addTodo":"function(this: BrickInstance, todo: any) {\\n  this.setData(function (data) {\\n    return Object.assign({}, data, {\\n      others: data.others.concat(todo),\\n    })\\n  })\\n}","removeTodo":"function(this: BrickInstance, index: number) {\\n  this.setData(function (data) {\\n    return Object.assign({}, data, {\\n      others: data.others.filter((_, i) => i !== index),\\n    })\\n  })\\n}"},"handlers":{},"supply":{"actions":{"addTodo":"{{$this.addTodo}}","removeTodo":"{{$this.removeTodo}}"},"data":{"others":"{{$this.others}}"}},"data":{"style":{"fontFamily":"\'Helvetica Neue\', Helvetica, Arial, sans-serif"},"others":"{{[{title: \'hello world\', complete: false}, {title: \'hello world 02\', complete: false}]}}"}}')},545:function(module,exports,__webpack_require__){__webpack_require__(546),__webpack_require__(713),__webpack_require__(714),__webpack_require__(868),__webpack_require__(1082),__webpack_require__(1115),__webpack_require__(1120),__webpack_require__(1132),__webpack_require__(1134),__webpack_require__(1139),__webpack_require__(1141),module.exports=__webpack_require__(1143)},620:function(module,exports){},714:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(399)}},[[545,1,2]]]);
//# sourceMappingURL=main.1ebae0022e22560b9152.bundle.js.map